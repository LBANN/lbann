\hypertarget{classlbann_1_1image__utils}{}\section{lbann\+:\+:image\+\_\+utils Class Reference}
\label{classlbann_1_1image__utils}\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}


{\ttfamily \#include $<$image\+\_\+utils.\+hpp$>$}

\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \hyperlink{classlbann_1_1image__utils_a6043097a96cf246ac1b63053ed15962b}{load\+I\+MG} (std\+::vector$<$ unsigned char $>$ \&image\+\_\+buf, int \&Width, int \&Height, bool Flip, unsigned char $\ast$\&Pixels)
\item 
static bool \hyperlink{classlbann_1_1image__utils_a0ed89f3bc964aec90799ace32bf788e4}{load\+I\+MG} (const std\+::string \&Imagefile, int \&Width, int \&Height, bool Flip, unsigned char $\ast$\&Pixels)
\item 
static bool \hyperlink{classlbann_1_1image__utils_a215ea7f6ac4ddb38f7e2b5c7b5ea1420}{save\+I\+MG} (const std\+::string \&Imagefile, int Width, int Height, bool Flip, unsigned char $\ast$Pixels)
\item 
static bool \hyperlink{classlbann_1_1image__utils_ac324a04f877601387cfb10750f1f6b8d}{load\+\_\+image} (const std\+::string \&filename, int \&Width, int \&Height, int \&Type, cv\+\_\+process \&pp, std\+::vector$<$ uint8\+\_\+t $>$ \&buf)
\begin{DoxyCompactList}\small\item\em Load an image from a file and put it into a serialized buffer. \end{DoxyCompactList}\item 
static bool \hyperlink{classlbann_1_1image__utils_a203c94bf2f0d1180af1be27da33a0ad6}{save\+\_\+image} (const std\+::string \&filename, const int Width, const int Height, const int Type, cv\+\_\+process \&pp, const std\+::vector$<$ uint8\+\_\+t $>$ \&buf)
\begin{DoxyCompactList}\small\item\em Save an image from a serialized buffer into a file. \end{DoxyCompactList}\item 
static bool \hyperlink{classlbann_1_1image__utils_ae7270652ab69d7b659c2a9ae5a7057ab}{load\+\_\+image} (std\+::vector$<$ unsigned char $>$ \&image\+\_\+buf, int \&Width, int \&Height, int \&Type, cv\+\_\+process \&pp, \+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&data)
\item 
static bool \hyperlink{classlbann_1_1image__utils_a75895e02feffc8b32c6c7d168f856778}{load\+\_\+image} (std\+::vector$<$ unsigned char $>$ \&image\+\_\+buf, int \&Width, int \&Height, int \&Type, cv\+\_\+process\+\_\+patches \&pp, std\+::vector$<$\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} $>$ \&data)
\item 
static bool \hyperlink{classlbann_1_1image__utils_a6e55d50736ff8c80c91300488df117a1}{load\+\_\+image} (const std\+::string \&filename, int \&Width, int \&Height, int \&Type, cv\+\_\+process \&pp, \+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&data)
\begin{DoxyCompactList}\small\item\em Load an image from a file and put it into an L\+B\+A\+NN Mat data block. \end{DoxyCompactList}\item 
static bool \hyperlink{classlbann_1_1image__utils_a45ce40d5989cfe65f4d9081335a1e10f}{load\+\_\+image} (const std\+::string \&filename, int \&Width, int \&Height, int \&Type, cv\+\_\+process\+\_\+patches \&pp, std\+::vector$<$\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} $>$ \&data)
\begin{DoxyCompactList}\small\item\em Load an image from a file, extract patches from it and put them into L\+B\+A\+NN Mat data blocks. \end{DoxyCompactList}\item 
static bool \hyperlink{classlbann_1_1image__utils_a86e65a4c267319e77ae9e8c65033ac15}{save\+\_\+image} (const std\+::string \&filename, const int Width, const int Height, const int Type, cv\+\_\+process \&pp, const \+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&data)
\begin{DoxyCompactList}\small\item\em Save an image using data from an L\+B\+A\+NN Mat data block. \end{DoxyCompactList}\item 
static bool \hyperlink{classlbann_1_1image__utils_a720f0987ec8eff333bf697ed18aafc93}{import\+\_\+image} (cv\+::\+Input\+Array inbuf, int \&Width, int \&Height, int \&Type, cv\+\_\+process \&pp, \+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&data)
\begin{DoxyCompactList}\small\item\em Import an image from a file buffer (inbuf) and put it into an L\+B\+A\+NN Mat data block. \end{DoxyCompactList}\item 
static bool \hyperlink{classlbann_1_1image__utils_af7c5409bd273f77282ecd9656e892cd3}{import\+\_\+image} (cv\+::\+Input\+Array inbuf, int \&Width, int \&Height, int \&Type, cv\+\_\+process\+\_\+patches \&pp, std\+::vector$<$\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} $>$ \&data)
\begin{DoxyCompactList}\small\item\em Import an image from a file buffer (inbuf), extract patches from it and put them into L\+B\+A\+NN Mat data blocks. \end{DoxyCompactList}\item 
static bool \hyperlink{classlbann_1_1image__utils_a155896efaea4c03897a3a2a6c82cf7b2}{export\+\_\+image} (const std\+::string \&file\+Ext, std\+::vector$<$ uchar $>$ \&outbuf, const int Width, const int Height, const int Type, cv\+\_\+process \&pp, const \+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&data)
\begin{DoxyCompactList}\small\item\em Export an image using data from an L\+B\+A\+NN Mat block into a file buffer (outbuf) \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 43 of file image\+\_\+utils.\+hpp.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1image__utils_a155896efaea4c03897a3a2a6c82cf7b2}\label{classlbann_1_1image__utils_a155896efaea4c03897a3a2a6c82cf7b2}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!export\+\_\+image@{export\+\_\+image}}
\index{export\+\_\+image@{export\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{export\+\_\+image()}{export\_image()}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::export\+\_\+image (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{file\+Ext,  }\item[{std\+::vector$<$ uchar $>$ \&}]{outbuf,  }\item[{const int}]{Width,  }\item[{const int}]{Height,  }\item[{const int}]{Type,  }\item[{cv\+\_\+process \&}]{pp,  }\item[{const \+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Export an image using data from an L\+B\+A\+NN Mat block into a file buffer (outbuf) 


\begin{DoxyParams}{Parameters}
{\em file\+Ext} & The format extension name of image file\+: e.\+g., \char`\"{}.\+jpeg\char`\"{}, \char`\"{}.\+png\char`\"{} \\
\hline
{\em outbuf} & The preallocated buffer to contain the bytes to be written into an image file \\
\hline
{\em Width} & The width of the image to be consturcted based on the given data of \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \\
\hline
{\em Height} & The height of the image \\
\hline
{\em Type} & The type of the image (Open\+CV code used for cv\+::\+Mat) \\
\hline
{\em pp} & The post-\/processing parameters \\
\hline
{\em data} & The image data. A sub-\/matrix View can be passed instead of the entire matrix. \\
\hline
\end{DoxyParams}


Definition at line 350 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
351                                                                                                            
                     \{
352 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
353   pp.determine\_inverse\_lazy\_normalization();
354   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv\_utils::copy\_buf\_to\_cvMat(\hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}, Width, Height, Type, pp);
355   \textcolor{keywordtype}{bool} ok = !image.empty() && pp.postprocess(image);
356 
357   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Either the image is empty or postprocessing has failed."}
      , \textcolor{keyword}{false})
358   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(fileExt.empty(), "Empty file format extension!", false)
359 
360   const std::\textcolor{keywordtype}{string} ext = ((fileExt[0] != '.')? ("." + fileExt) : fileExt);
361 
362   static const \textcolor{keywordtype}{size\_t} max\_img\_header\_size = 1024;
363   const \textcolor{keywordtype}{size\_t} capacity = image\_data\_amount(image) + max\_img\_header\_size;
364 
365   if (outbuf.size() < capacity) \{
366     \textcolor{comment}{//std::cout << "bytes reserved for the image: " << image\_data\_amount(image) << std::endl;}
367     outbuf.resize(capacity);
368   \}
369 
370   \textcolor{keywordflow}{return} (ok && cv::imencode(ext, image, outbuf));
371 \textcolor{preprocessor}{#else}
372   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
373 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
374 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1image__utils_a720f0987ec8eff333bf697ed18aafc93}\label{classlbann_1_1image__utils_a720f0987ec8eff333bf697ed18aafc93}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!import\+\_\+image@{import\+\_\+image}}
\index{import\+\_\+image@{import\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{import\+\_\+image()}{import\_image()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::import\+\_\+image (\begin{DoxyParamCaption}\item[{cv\+::\+Input\+Array}]{inbuf,  }\item[{int \&}]{Width,  }\item[{int \&}]{Height,  }\item[{int \&}]{Type,  }\item[{cv\+\_\+process \&}]{pp,  }\item[{\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Import an image from a file buffer (inbuf) and put it into an L\+B\+A\+NN Mat data block. 


\begin{DoxyParams}{Parameters}
{\em inbuf} & The buffer that contains the raw bytes read from an image file This can be for example, const std\+:vector$<$uchar$>$\& or const cv\+::\+Mat\&. \href{http://docs.opencv.org/trunk/d4/d32/classcv_1_1__InputArray.html}{\tt http\+://docs.\+opencv.\+org/trunk/d4/d32/classcv\+\_\+1\+\_\+1\+\_\+\+\_\+\+Input\+Array.\+html} \\
\hline
{\em Width} & The width of the image consturcted out of inbuf \\
\hline
{\em Height} & The height of the image consructed \\
\hline
{\em Type} & The type of the image constructed (Open\+CV code used for cv\+::\+Mat) \\
\hline
{\em pp} & The pre-\/processing parameters \\
\hline
{\em data} & The pre-\/processed image data. A set of sub-\/matrix Views can be used to store the data. \\
\hline
\end{DoxyParams}


Definition at line 284 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
285                                                                                                      \{
286 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
287   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv::imdecode(inbuf, cv::IMREAD\_ANYCOLOR | cv::IMREAD\_ANYDEPTH);
288   \textcolor{keywordtype}{bool} ok = !image.empty() && pp.preprocess(image);
289   ok = ok && cv\_utils::copy\_cvMat\_to\_buf(image, \hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}, pp);
290   pp.disable\_lazy\_normalizer();
291 
292   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Image preprocessing or copying failed."}, \textcolor{keyword}{false})
293 
294   Width  = image.cols;
295   Height = image.rows;
296   Type   = image.type();
297   return ok;
298 \textcolor{preprocessor}{#else}
299   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
300 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
301 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1image__utils_a720f0987ec8eff333bf697ed18aafc93_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1image__utils_af7c5409bd273f77282ecd9656e892cd3}\label{classlbann_1_1image__utils_af7c5409bd273f77282ecd9656e892cd3}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!import\+\_\+image@{import\+\_\+image}}
\index{import\+\_\+image@{import\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{import\+\_\+image()}{import\_image()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::import\+\_\+image (\begin{DoxyParamCaption}\item[{cv\+::\+Input\+Array}]{inbuf,  }\item[{int \&}]{Width,  }\item[{int \&}]{Height,  }\item[{int \&}]{Type,  }\item[{cv\+\_\+process\+\_\+patches \&}]{pp,  }\item[{std\+::vector$<$\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} $>$ \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Import an image from a file buffer (inbuf), extract patches from it and put them into L\+B\+A\+NN Mat data blocks. 


\begin{DoxyParams}{Parameters}
{\em inbuf} & The buffer that contains the raw bytes read from an image file This can be for example, const std\+:vector$<$uchar$>$\& or const cv\+::\+Mat\&. \href{http://docs.opencv.org/trunk/d4/d32/classcv_1_1__InputArray.html}{\tt http\+://docs.\+opencv.\+org/trunk/d4/d32/classcv\+\_\+1\+\_\+1\+\_\+\+\_\+\+Input\+Array.\+html} \\
\hline
{\em Width} & The width of a patch from the image consturcted out of inbuf \\
\hline
{\em Height} & The height of a patch from the image consructed \\
\hline
{\em Type} & The type of the image patches (Open\+CV code used for cv\+::\+Mat) \\
\hline
{\em pp} & The pre-\/processing parameters \\
\hline
{\em data} & The pre-\/processed image data. A set of sub-\/matrix Views can be used to store the data. \\
\hline
\end{DoxyParams}


Definition at line 313 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
314                                                                                                            
                   \{
315 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
316   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv::imdecode(inbuf, cv::IMREAD\_ANYCOLOR | cv::IMREAD\_ANYDEPTH);
317 
318   std::vector<cv::Mat> patches;
319   \textcolor{keywordtype}{bool} ok = !image.empty() && pp.preprocess(image, patches);
320   \textcolor{keywordflow}{if} ((patches.size() == 0u) || (patches.size() != \hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}.size())) \{
321     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
322   \}
323 
324   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i=0u; ok && (i < patches.size()); ++i) \{
325     ok = cv\_utils::copy\_cvMat\_to\_buf(patches[i], \hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}[i], pp);
326   \}
327 
328   pp.disable\_lazy\_normalizer();
329 
330   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Image preprocessing or copying failed."}, \textcolor{keyword}{false})
331 
332   Width  = patches[0].cols;
333   Height = patches[0].rows;
334   Type   = patches[0].type();
335   return ok;
336 \textcolor{preprocessor}{#else}
337   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
338 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
339 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1image__utils_ac324a04f877601387cfb10750f1f6b8d}\label{classlbann_1_1image__utils_ac324a04f877601387cfb10750f1f6b8d}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!load\+\_\+image@{load\+\_\+image}}
\index{load\+\_\+image@{load\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{load\+\_\+image()}{load\_image()}\hspace{0.1cm}{\footnotesize\ttfamily [1/5]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::load\+\_\+image (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename,  }\item[{int \&}]{Width,  }\item[{int \&}]{Height,  }\item[{int \&}]{Type,  }\item[{cv\+\_\+process \&}]{pp,  }\item[{std\+::vector$<$ uint8\+\_\+t $>$ \&}]{buf }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Load an image from a file and put it into a serialized buffer. 



Definition at line 108 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
109                                                                                                            
            \{
110 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
111   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv::imread(filename, cv::IMREAD\_ANYCOLOR | cv::IMREAD\_ANYDEPTH);
112   \textcolor{keywordtype}{bool} ok = !image.empty() && pp.preprocess(image);
113   ok = ok && cv\_utils::copy\_cvMat\_to\_buf(image, buf, pp);
114   pp.disable\_lazy\_normalizer();
115 
116   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Image preprocessing or copying failed."}, \textcolor{keyword}{false})
117 
118   Width  = image.cols;
119   Height = image.rows;
120   Type   = image.type();
121   return ok;
122 \textcolor{preprocessor}{#else}
123   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
124 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
125 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1image__utils_ac324a04f877601387cfb10750f1f6b8d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1image__utils_ae7270652ab69d7b659c2a9ae5a7057ab}\label{classlbann_1_1image__utils_ae7270652ab69d7b659c2a9ae5a7057ab}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!load\+\_\+image@{load\+\_\+image}}
\index{load\+\_\+image@{load\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{load\+\_\+image()}{load\_image()}\hspace{0.1cm}{\footnotesize\ttfamily [2/5]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::load\+\_\+image (\begin{DoxyParamCaption}\item[{std\+::vector$<$ unsigned char $>$ \&}]{image\+\_\+buf,  }\item[{int \&}]{Width,  }\item[{int \&}]{Height,  }\item[{int \&}]{Type,  }\item[{cv\+\_\+process \&}]{pp,  }\item[{\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 379 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
380                                                                                                    \{
381 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
382   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv::imdecode(image\_buf, cv::IMREAD\_ANYCOLOR | cv::IMREAD\_ANYDEPTH);
383   \textcolor{keywordflow}{if} (image.empty()) \{
384     std::stringstream err;
385     err << \_\_FILE\_\_ << \textcolor{stringliteral}{" "} << \_\_LINE\_\_ << \textcolor{stringliteral}{" :: image is empty"};
386     \textcolor{keywordflow}{throw} lbann\_exception(err.str());
387   \}
388   \textcolor{keywordtype}{bool} pp\_test = pp.preprocess(image);
389   \textcolor{keywordflow}{if} (! pp\_test) \{
390     std::stringstream err;
391     err << \_\_FILE\_\_ << \textcolor{stringliteral}{" "} << \_\_LINE\_\_ << \textcolor{stringliteral}{" :: pp.preprocess(image) failed"};
392     \textcolor{keywordflow}{throw} lbann\_exception(err.str());
393   \}
394   \textcolor{comment}{//bool ok = !image.empty() && pp.preprocess(image);}
395   \textcolor{keywordtype}{bool} ok = cv\_utils::copy\_cvMat\_to\_buf(image, \hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}, pp);
396   \textcolor{keywordflow}{if} (! ok) \{
397     std::stringstream err;
398     err << \_\_FILE\_\_ << \textcolor{stringliteral}{" "} << \_\_LINE\_\_ << \textcolor{stringliteral}{" :: cv\_utils::copy\_cvMat\_to\_buf() failed"};
399     \textcolor{keywordflow}{throw} lbann\_exception(err.str());
400   \}
401   \textcolor{comment}{// Disabling normalizer is needed because normalizer is not necessarily}
402   \textcolor{comment}{// called during preprocessing but implicitly applied during data copying to}
403   \textcolor{comment}{// reduce overhead.}
404   pp.disable\_lazy\_normalizer();
405 
406   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Image preprocessing or copying failed."}, \textcolor{keyword}{false})
407 
408   Width  = image.cols;
409   Height = image.rows;
410   Type   = image.type();
411   return ok;
412 \textcolor{preprocessor}{#else}
413   std::stringstream err;
414   err << \_\_FILE\_\_ << \textcolor{stringliteral}{" "} << \_\_LINE\_\_
415       << \textcolor{stringliteral}{" :: not compiled with LBANN\_ENABLE\_OPENCV!"};
416   \textcolor{keywordflow}{throw} lbann\_exception(err.str());
417   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
418 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
419 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1image__utils_a75895e02feffc8b32c6c7d168f856778}\label{classlbann_1_1image__utils_a75895e02feffc8b32c6c7d168f856778}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!load\+\_\+image@{load\+\_\+image}}
\index{load\+\_\+image@{load\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{load\+\_\+image()}{load\_image()}\hspace{0.1cm}{\footnotesize\ttfamily [3/5]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::load\+\_\+image (\begin{DoxyParamCaption}\item[{std\+::vector$<$ unsigned char $>$ \&}]{image\+\_\+buf,  }\item[{int \&}]{Width,  }\item[{int \&}]{Height,  }\item[{int \&}]{Type,  }\item[{cv\+\_\+process\+\_\+patches \&}]{pp,  }\item[{std\+::vector$<$\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} $>$ \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyParams}{Parameters}
{\em filename} & The name of the image file to read in \\
\hline
{\em Width} & The width of a patch from the image read \\
\hline
{\em Height} & The height of a patch from the image read \\
\hline
{\em Type} & The type of the image patches (Open\+CV code used for cv\+::\+Mat) \\
\hline
{\em pp} & The pre-\/processing parameters \\
\hline
{\em data} & The pre-\/processed image data to be stored in El\+::\+Matrix$<$\+Data\+Type$>$ format \\
\hline
\end{DoxyParams}


Definition at line 220 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
221                                                                                                            
                 \{
222 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
223   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv::imdecode(image\_buf, cv::IMREAD\_ANYCOLOR | cv::IMREAD\_ANYDEPTH);
224 
225   std::vector<cv::Mat> patches;
226   \textcolor{keywordtype}{bool} ok = !image.empty() && pp.preprocess(image, patches);
227   \textcolor{keywordflow}{if} ((patches.size() == 0u) || (patches.size() != \hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}.size())) \{
228     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
229   \}
230 
231   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i=0u; ok && (i < patches.size()); ++i) \{
232     ok = cv\_utils::copy\_cvMat\_to\_buf(patches[i], \hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}[i], pp);
233   \}
234 
235   \textcolor{comment}{// Disabling normalizer is needed because normalizer is not necessarily}
236   \textcolor{comment}{// called during preprocessing but implicitly applied during data copying to}
237   \textcolor{comment}{// reduce overhead.}
238   pp.disable\_lazy\_normalizer();
239 
240   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Image preprocessing or copying failed."}, \textcolor{keyword}{false})
241 
242   Width  = patches[0].cols;
243   Height = patches[0].rows;
244   Type   = patches[0].type();
245   return ok;
246 \textcolor{preprocessor}{#else}
247   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
248 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
249 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1image__utils_a6e55d50736ff8c80c91300488df117a1}\label{classlbann_1_1image__utils_a6e55d50736ff8c80c91300488df117a1}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!load\+\_\+image@{load\+\_\+image}}
\index{load\+\_\+image@{load\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{load\+\_\+image()}{load\_image()}\hspace{0.1cm}{\footnotesize\ttfamily [4/5]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::load\+\_\+image (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename,  }\item[{int \&}]{Width,  }\item[{int \&}]{Height,  }\item[{int \&}]{Type,  }\item[{cv\+\_\+process \&}]{pp,  }\item[{\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Load an image from a file and put it into an L\+B\+A\+NN Mat data block. 


\begin{DoxyParams}{Parameters}
{\em filename} & The name of the image file to read in \\
\hline
{\em Width} & The width of the image read \\
\hline
{\em Height} & The height of the image read \\
\hline
{\em Type} & The type of the image read (Open\+CV code used for cv\+::\+Mat) \\
\hline
{\em pp} & The pre-\/processing parameters \\
\hline
{\em data} & The pre-\/processed image data to be stored in El\+::\+Matrix$<$\+Data\+Type$>$ format \\
\hline
\end{DoxyParams}


Definition at line 150 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
151                                                                                                    \{
152 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
153   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv::imread(filename, cv::IMREAD\_ANYCOLOR | cv::IMREAD\_ANYDEPTH);
154   \textcolor{keywordtype}{bool} ok = !image.empty() && pp.preprocess(image);
155   ok = ok && cv\_utils::copy\_cvMat\_to\_buf(image, \hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}, pp);
156   \textcolor{comment}{// Disabling normalizer is needed because normalizer is not necessarily}
157   \textcolor{comment}{// called during preprocessing but implicitly applied during data copying to}
158   \textcolor{comment}{// reduce overhead.}
159   pp.disable\_lazy\_normalizer();
160 
161   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Image preprocessing or copying failed."}, \textcolor{keyword}{false})
162 
163   Width  = image.cols;
164   Height = image.rows;
165   Type   = image.type();
166   return ok;
167 \textcolor{preprocessor}{#else}
168   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
169 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
170 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1image__utils_a45ce40d5989cfe65f4d9081335a1e10f}\label{classlbann_1_1image__utils_a45ce40d5989cfe65f4d9081335a1e10f}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!load\+\_\+image@{load\+\_\+image}}
\index{load\+\_\+image@{load\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{load\+\_\+image()}{load\_image()}\hspace{0.1cm}{\footnotesize\ttfamily [5/5]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::load\+\_\+image (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename,  }\item[{int \&}]{Width,  }\item[{int \&}]{Height,  }\item[{int \&}]{Type,  }\item[{cv\+\_\+process\+\_\+patches \&}]{pp,  }\item[{std\+::vector$<$\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} $>$ \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Load an image from a file, extract patches from it and put them into L\+B\+A\+NN Mat data blocks. 


\begin{DoxyParams}{Parameters}
{\em filename} & The name of the image file to read in \\
\hline
{\em Width} & The width of a patch from the image read \\
\hline
{\em Height} & The height of a patch from the image read \\
\hline
{\em Type} & The type of the image patches (Open\+CV code used for cv\+::\+Mat) \\
\hline
{\em pp} & The pre-\/processing parameters \\
\hline
{\em data} & The pre-\/processed image data to be stored in El\+::\+Matrix$<$\+Data\+Type$>$ format \\
\hline
\end{DoxyParams}


Definition at line 180 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
181                                                                                                            
                 \{
182 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
183   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv::imread(filename, cv::IMREAD\_ANYCOLOR | cv::IMREAD\_ANYDEPTH);
184 
185   std::vector<cv::Mat> patches;
186   \textcolor{keywordtype}{bool} ok = !image.empty() && pp.preprocess(image, patches);
187   \textcolor{keywordflow}{if} ((patches.size() == 0u) || (patches.size() != \hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}.size())) \{
188     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
189   \}
190 
191   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i=0u; ok && (i < patches.size()); ++i) \{
192     ok = cv\_utils::copy\_cvMat\_to\_buf(patches[i], \hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}[i], pp);
193   \}
194 
195   \textcolor{comment}{// Disabling normalizer is needed because normalizer is not necessarily}
196   \textcolor{comment}{// called during preprocessing but implicitly applied during data copying to}
197   \textcolor{comment}{// reduce overhead.}
198   pp.disable\_lazy\_normalizer();
199 
200   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Image preprocessing or copying failed."}, \textcolor{keyword}{false})
201 
202   Width  = patches[0].cols;
203   Height = patches[0].rows;
204   Type   = patches[0].type();
205   return ok;
206 \textcolor{preprocessor}{#else}
207   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
208 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
209 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1image__utils_a6043097a96cf246ac1b63053ed15962b}\label{classlbann_1_1image__utils_a6043097a96cf246ac1b63053ed15962b}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!load\+I\+MG@{load\+I\+MG}}
\index{load\+I\+MG@{load\+I\+MG}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{load\+I\+M\+G()}{loadIMG()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::load\+I\+MG (\begin{DoxyParamCaption}\item[{std\+::vector$<$ unsigned char $>$ \&}]{image\+\_\+buf,  }\item[{int \&}]{Width,  }\item[{int \&}]{Height,  }\item[{bool}]{Flip,  }\item[{unsigned char $\ast$\&}]{Pixels }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 59 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
59                                                                                                            
                         \{
60 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
61   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv::imdecode(image\_buf, \_LBANN\_CV\_COLOR\_);
62   \textcolor{comment}{//cv::Mat image = cv::imdecode(image\_buf, cv::IMREAD\_ANYCOLOR | cv::IMREAD\_ANYDEPTH);}
63   \textcolor{keywordflow}{if} (image.empty()) \{
64     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
65   \}
66 
67   Width = image.cols;
68   Height = image.rows;
69 
70   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < Height; y++) \{
71     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < Width; x++) \{
72       cv::Vec3b pixel = image.at<cv::Vec3b>(y, x);
73       \textcolor{keywordtype}{int} offset = (Flip) ? ((Height - 1 - y) * Width + x) : (y * Width + x);
74       Pixels[offset]                  = pixel[\_LBANN\_CV\_BLUE\_];
75       Pixels[offset + Height*Width]   = pixel[\_LBANN\_CV\_GREEN\_];
76       Pixels[offset + 2*Height*Width] = pixel[\_LBANN\_CV\_RED\_];
77     \}
78   \}
79 
80   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
81 \textcolor{preprocessor}{#else}
82   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
83 \textcolor{preprocessor}{#endif}
84 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1image__utils_a6043097a96cf246ac1b63053ed15962b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1image__utils_a0ed89f3bc964aec90799ace32bf788e4}\label{classlbann_1_1image__utils_a0ed89f3bc964aec90799ace32bf788e4}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!load\+I\+MG@{load\+I\+MG}}
\index{load\+I\+MG@{load\+I\+MG}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{load\+I\+M\+G()}{loadIMG()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::load\+I\+MG (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{Imagefile,  }\item[{int \&}]{Width,  }\item[{int \&}]{Height,  }\item[{bool}]{Flip,  }\item[{unsigned char $\ast$\&}]{Pixels }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 33 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
33                                                                                                            
                \{
34 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
35   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv::imread(Imagefile, \_LBANN\_CV\_COLOR\_);
36   \textcolor{keywordflow}{if} (image.empty()) \{
37     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
38   \}
39 
40   Width = image.cols;
41   Height = image.rows;
42 
43   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < Height; y++) \{
44     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < Width; x++) \{
45       cv::Vec3b pixel = image.at<cv::Vec3b>(y, x);
46       \textcolor{keywordtype}{int} offset = (Flip) ? ((Height - 1 - y) * Width + x) : (y * Width + x);
47       Pixels[offset]                  = pixel[\_LBANN\_CV\_BLUE\_];
48       Pixels[offset + Height*Width]   = pixel[\_LBANN\_CV\_GREEN\_];
49       Pixels[offset + 2*Height*Width] = pixel[\_LBANN\_CV\_RED\_];
50     \}
51   \}
52 
53   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
54 \textcolor{preprocessor}{#else}
55   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
56 \textcolor{preprocessor}{#endif}
57 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1image__utils_a203c94bf2f0d1180af1be27da33a0ad6}\label{classlbann_1_1image__utils_a203c94bf2f0d1180af1be27da33a0ad6}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!save\+\_\+image@{save\+\_\+image}}
\index{save\+\_\+image@{save\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{save\+\_\+image()}{save\_image()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::save\+\_\+image (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename,  }\item[{const int}]{Width,  }\item[{const int}]{Height,  }\item[{const int}]{Type,  }\item[{cv\+\_\+process \&}]{pp,  }\item[{const std\+::vector$<$ uint8\+\_\+t $>$ \&}]{buf }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Save an image from a serialized buffer into a file. 



Definition at line 127 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
128                                                                                                            
                                 \{
129 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
130   pp.determine\_inverse\_lazy\_normalization();
131   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv\_utils::copy\_buf\_to\_cvMat(buf, Width, Height, Type, pp);
132   \textcolor{keywordtype}{bool} ok = !image.empty() && pp.postprocess(image);
133 
134   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Either the image is empty or postprocessing has failed."}
      , \textcolor{keyword}{false})
135 
136   return (ok && cv::imwrite(filename, image));
137 \textcolor{preprocessor}{#else}
138   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
139 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
140 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1image__utils_a86e65a4c267319e77ae9e8c65033ac15}\label{classlbann_1_1image__utils_a86e65a4c267319e77ae9e8c65033ac15}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!save\+\_\+image@{save\+\_\+image}}
\index{save\+\_\+image@{save\+\_\+image}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{save\+\_\+image()}{save\_image()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::save\+\_\+image (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename,  }\item[{const int}]{Width,  }\item[{const int}]{Height,  }\item[{const int}]{Type,  }\item[{cv\+\_\+process \&}]{pp,  }\item[{const \+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Save an image using data from an L\+B\+A\+NN Mat data block. 


\begin{DoxyParams}{Parameters}
{\em filename} & The name of the image file to write \\
\hline
{\em Width} & The width of the image to be written \\
\hline
{\em Height} & The height of the image to be written \\
\hline
{\em Type} & The type of the image to be written (Open\+CV code used for cv\+::\+Mat) \\
\hline
{\em pp} & The post-\/processing parameters \\
\hline
{\em data} & The image data in El\+::\+Matrix$<$\+Data\+Type$>$ format to post-\/process and write \\
\hline
\end{DoxyParams}


Definition at line 259 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
260                                                                                                            
                   \{
261 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
262   pp.determine\_inverse\_lazy\_normalization();
263   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = cv\_utils::copy\_buf\_to\_cvMat(\hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data}, Width, Height, Type, pp);
264   \textcolor{keywordtype}{bool} ok = !image.empty() && pp.postprocess(image);
265 
266   \hyperlink{mild__exception_8hpp_a7b8339c566152ab29ce66b63e90c67f9}{\_LBANN\_MILD\_EXCEPTION}(!ok, \textcolor{stringliteral}{"Image postprocessing has failed."}, \textcolor{keyword}{false})
267 
268   return (ok && cv::imwrite(filename, image));
269 \textcolor{preprocessor}{#else}
270   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
271 \textcolor{preprocessor}{#endif // LBANN\_HAS\_OPENCV}
272 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1image__utils_a215ea7f6ac4ddb38f7e2b5c7b5ea1420}\label{classlbann_1_1image__utils_a215ea7f6ac4ddb38f7e2b5c7b5ea1420}} 
\index{lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}!save\+I\+MG@{save\+I\+MG}}
\index{save\+I\+MG@{save\+I\+MG}!lbann\+::image\+\_\+utils@{lbann\+::image\+\_\+utils}}
\subsubsection{\texorpdfstring{save\+I\+M\+G()}{saveIMG()}}
{\footnotesize\ttfamily bool lbann\+::image\+\_\+utils\+::save\+I\+MG (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{Imagefile,  }\item[{int}]{Width,  }\item[{int}]{Height,  }\item[{bool}]{Flip,  }\item[{unsigned char $\ast$}]{Pixels }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 86 of file image\+\_\+utils.\+cpp.


\begin{DoxyCode}
86                                                                                                            
             \{
87 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_OPENCV}
88   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat} image = \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{cv::Mat}(Height, Width, CV\_8UC3);
89 
90   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < Height; y++) \{
91     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < Width; x++) \{
92       cv::Vec3b pixel;
93       \textcolor{keywordtype}{int} offset = (Flip) ? ((Height - 1 - y) * Width + x) : (y * Width + x);
94       pixel[\_LBANN\_CV\_BLUE\_]  = Pixels[offset];
95       pixel[\_LBANN\_CV\_GREEN\_] = Pixels[offset + Height*Width];
96       pixel[\_LBANN\_CV\_RED\_]   = Pixels[offset + 2*Height*Width];
97       image.at<cv::Vec3b>(y, x) = pixel;
98     \}
99   \}
100   cv::imwrite(Imagefile, image);
101 
102   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
103 \textcolor{preprocessor}{#else}
104   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
105 \textcolor{preprocessor}{#endif}
106 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/data\+\_\+readers/\hyperlink{image__utils_8hpp}{image\+\_\+utils.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/data\+\_\+readers/\hyperlink{image__utils_8cpp}{image\+\_\+utils.\+cpp}\end{DoxyCompactItemize}
