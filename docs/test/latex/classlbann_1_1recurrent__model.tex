\hypertarget{classlbann_1_1recurrent__model}{}\section{lbann\+:\+:recurrent\+\_\+model Class Reference}
\label{classlbann_1_1recurrent__model}\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}


{\ttfamily \#include $<$recurrent.\+hpp$>$}



Inheritance diagram for lbann\+:\+:recurrent\+\_\+model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=199pt]{classlbann_1_1recurrent__model__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:recurrent\+\_\+model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1recurrent__model__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1recurrent__model_ac1d3118a1642bd460c9cc9617a592a0b}{recurrent\+\_\+model} (\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm}, int mini\+\_\+batch\+\_\+size, \hyperlink{classlbann_1_1objective__function}{objective\+\_\+function} $\ast$obj\+\_\+fn, \hyperlink{classlbann_1_1optimizer}{optimizer} $\ast$default\+\_\+optimizer, int unroll\+\_\+depth)
\item 
\hyperlink{classlbann_1_1recurrent__model_adc71cbd387e03acc05a0f2e77aa36457}{recurrent\+\_\+model} (const \hyperlink{classlbann_1_1recurrent__model}{recurrent\+\_\+model} \&other)=default
\item 
\hyperlink{classlbann_1_1recurrent__model}{recurrent\+\_\+model} \& \hyperlink{classlbann_1_1recurrent__model_a32882b23c459e1ce577fc97414521315}{operator=} (const \hyperlink{classlbann_1_1recurrent__model}{recurrent\+\_\+model} \&other)=default
\item 
\hyperlink{classlbann_1_1recurrent__model_aa52648414c397fc4a11ac462c278a4f1}{$\sim$recurrent\+\_\+model} () override=default
\item 
\hyperlink{classlbann_1_1recurrent__model}{recurrent\+\_\+model} $\ast$ \hyperlink{classlbann_1_1recurrent__model_ad184f898241fe026f140db689f129d47}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1recurrent__model_a01b4f6dce63bc2e0545b2bd7603b32b2}{name} () const override
\item 
void \hyperlink{classlbann_1_1recurrent__model_aa4e43de8bf0d11a0f51dedbcf22a73cc}{freeze\+\_\+layers\+\_\+under\+\_\+frozen\+\_\+surface} () override
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classlbann_1_1recurrent__model_ac89ddfa607e5cb6b940eb389ebbce6f6}{setup\+\_\+layer\+\_\+topology} () override
\item 
void \hyperlink{classlbann_1_1recurrent__model_a712dabb1c1e90f6e268b42f6abaedd93}{setup\+\_\+layers} () override
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{classlbann_1_1recurrent__model_a71eb93ebf3411a5c170f6570c93e3cca}{m\+\_\+unroll\+\_\+depth}
\item 
std\+::unordered\+\_\+map$<$ const \hyperlink{classlbann_1_1Layer}{Layer} $\ast$, \hyperlink{classlbann_1_1Layer}{Layer} $\ast$ $>$ \hyperlink{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}{m\+\_\+previous\+\_\+step\+\_\+layer}
\item 
std\+::unordered\+\_\+map$<$ const \hyperlink{classlbann_1_1Layer}{Layer} $\ast$, \hyperlink{classlbann_1_1Layer}{Layer} $\ast$ $>$ \hyperlink{classlbann_1_1recurrent__model_a426829f7fa36b112b4b91393c1657ddd}{m\+\_\+next\+\_\+step\+\_\+layer}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Recurrent neural network model. Training is performed with back propagation through time, i.\+e. by unrolling the recurrent network into a D\+AG. 

Definition at line 40 of file recurrent.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1recurrent__model_ac1d3118a1642bd460c9cc9617a592a0b}\label{classlbann_1_1recurrent__model_ac1d3118a1642bd460c9cc9617a592a0b}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!recurrent\+\_\+model@{recurrent\+\_\+model}}
\index{recurrent\+\_\+model@{recurrent\+\_\+model}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{recurrent\+\_\+model()}{recurrent\_model()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily lbann\+::recurrent\+\_\+model\+::recurrent\+\_\+model (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$}]{comm,  }\item[{int}]{mini\+\_\+batch\+\_\+size,  }\item[{\hyperlink{classlbann_1_1objective__function}{objective\+\_\+function} $\ast$}]{obj\+\_\+fn,  }\item[{\hyperlink{classlbann_1_1optimizer}{optimizer} $\ast$}]{default\+\_\+optimizer,  }\item[{int}]{unroll\+\_\+depth }\end{DoxyParamCaption})}

Constructor. 

Definition at line 349 of file recurrent.\+cpp.


\begin{DoxyCode}
354   : \hyperlink{classlbann_1_1directed__acyclic__graph__model_a2b5f8058b341073a0a95d4882fb4ff52}{directed\_acyclic\_graph\_model}(\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm},
355                                  mini\_batch\_size,
356                                  obj\_fn,
357                                  default\_optimizer) \{
358   \hyperlink{classlbann_1_1recurrent__model_a71eb93ebf3411a5c170f6570c93e3cca}{m\_unroll\_depth} = std::max(unroll\_depth, 1);
359 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1recurrent__model_ac1d3118a1642bd460c9cc9617a592a0b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1recurrent__model_adc71cbd387e03acc05a0f2e77aa36457}\label{classlbann_1_1recurrent__model_adc71cbd387e03acc05a0f2e77aa36457}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!recurrent\+\_\+model@{recurrent\+\_\+model}}
\index{recurrent\+\_\+model@{recurrent\+\_\+model}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{recurrent\+\_\+model()}{recurrent\_model()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily lbann\+::recurrent\+\_\+model\+::recurrent\+\_\+model (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1recurrent__model}{recurrent\+\_\+model} \&}]{other }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

Copy constructor. \mbox{\Hypertarget{classlbann_1_1recurrent__model_aa52648414c397fc4a11ac462c278a4f1}\label{classlbann_1_1recurrent__model_aa52648414c397fc4a11ac462c278a4f1}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!````~recurrent\+\_\+model@{$\sim$recurrent\+\_\+model}}
\index{````~recurrent\+\_\+model@{$\sim$recurrent\+\_\+model}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{$\sim$recurrent\+\_\+model()}{~recurrent\_model()}}
{\footnotesize\ttfamily lbann\+::recurrent\+\_\+model\+::$\sim$recurrent\+\_\+model (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [default]}}

Destructor. 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1recurrent__model_ad184f898241fe026f140db689f129d47}\label{classlbann_1_1recurrent__model_ad184f898241fe026f140db689f129d47}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!copy@{copy}}
\index{copy@{copy}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1recurrent__model}{recurrent\+\_\+model}$\ast$ lbann\+::recurrent\+\_\+model\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Create copy. 

Reimplemented from \hyperlink{classlbann_1_1directed__acyclic__graph__model_a6a21050a732686e9e6c9f384ff9fda51}{lbann\+::directed\+\_\+acyclic\+\_\+graph\+\_\+model}.



Definition at line 58 of file recurrent.\+hpp.


\begin{DoxyCode}
58 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1recurrent__model_ac1d3118a1642bd460c9cc9617a592a0b}{recurrent\_model}(*\textcolor{keyword}{this}); \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1recurrent__model_ad184f898241fe026f140db689f129d47_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1recurrent__model_aa4e43de8bf0d11a0f51dedbcf22a73cc}\label{classlbann_1_1recurrent__model_aa4e43de8bf0d11a0f51dedbcf22a73cc}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!freeze\+\_\+layers\+\_\+under\+\_\+frozen\+\_\+surface@{freeze\+\_\+layers\+\_\+under\+\_\+frozen\+\_\+surface}}
\index{freeze\+\_\+layers\+\_\+under\+\_\+frozen\+\_\+surface@{freeze\+\_\+layers\+\_\+under\+\_\+frozen\+\_\+surface}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{freeze\+\_\+layers\+\_\+under\+\_\+frozen\+\_\+surface()}{freeze\_layers\_under\_frozen\_surface()}}
{\footnotesize\ttfamily void lbann\+::recurrent\+\_\+model\+::freeze\+\_\+layers\+\_\+under\+\_\+frozen\+\_\+surface (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

For general D\+AG models, users need to manually specify each layer to freeze in the model description prototext. 

Reimplemented from \hyperlink{classlbann_1_1directed__acyclic__graph__model_a9f2a6e9472235ec91c5a50356471b3cb}{lbann\+::directed\+\_\+acyclic\+\_\+graph\+\_\+model}.



Definition at line 64 of file recurrent.\+hpp.


\begin{DoxyCode}
64 \{\}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1recurrent__model_aa4e43de8bf0d11a0f51dedbcf22a73cc_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1recurrent__model_a01b4f6dce63bc2e0545b2bd7603b32b2}\label{classlbann_1_1recurrent__model_a01b4f6dce63bc2e0545b2bd7603b32b2}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!name@{name}}
\index{name@{name}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{name()}{name()}}
{\footnotesize\ttfamily std\+::string lbann\+::recurrent\+\_\+model\+::name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get model name. 

Reimplemented from \hyperlink{classlbann_1_1directed__acyclic__graph__model_ad2b97ab2670e76538a754e28e19b5c94}{lbann\+::directed\+\_\+acyclic\+\_\+graph\+\_\+model}.



Definition at line 61 of file recurrent.\+hpp.


\begin{DoxyCode}
61 \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"recurrent\_model"}; \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1recurrent__model_a32882b23c459e1ce577fc97414521315}\label{classlbann_1_1recurrent__model_a32882b23c459e1ce577fc97414521315}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1recurrent__model}{recurrent\+\_\+model}\& lbann\+::recurrent\+\_\+model\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1recurrent__model}{recurrent\+\_\+model} \&}]{other }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

Copy assignment operator. \mbox{\Hypertarget{classlbann_1_1recurrent__model_ac89ddfa607e5cb6b940eb389ebbce6f6}\label{classlbann_1_1recurrent__model_ac89ddfa607e5cb6b940eb389ebbce6f6}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!setup\+\_\+layer\+\_\+topology@{setup\+\_\+layer\+\_\+topology}}
\index{setup\+\_\+layer\+\_\+topology@{setup\+\_\+layer\+\_\+topology}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{setup\+\_\+layer\+\_\+topology()}{setup\_layer\_topology()}}
{\footnotesize\ttfamily void lbann\+::recurrent\+\_\+model\+::setup\+\_\+layer\+\_\+topology (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Set up topology of layer graph. Called in setup function. All layers in connected component of layer graph are added to the model and all parent/child relationships between layers are reciprocated. 

Reimplemented from \hyperlink{classlbann_1_1model_a7b3e2a643c658dcaa7478d2568f29784}{lbann\+::model}.



Definition at line 361 of file recurrent.\+cpp.


\begin{DoxyCode}
361                                            \{
362   
363   \textcolor{comment}{// Make sure parent/child relationships are reciprocated}
364   \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}& l : \hyperlink{classlbann_1_1model_a0229fc226ec163d1411548446104569d}{m\_layers}) \{
365     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}& parent : l->get\_parent\_layers()) \{
366       \textcolor{keyword}{const\_cast<}Layer*\textcolor{keyword}{>}(parent)->add\_child\_layer(l);
367     \}
368     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}& child : l->get\_child\_layers()) \{
369       \textcolor{keyword}{const\_cast<}Layer*\textcolor{keyword}{>}(child)->add\_parent\_layer(l);
370     \}
371   \}
372 
373   \textcolor{comment}{// Unroll layers}
374   \textcolor{keywordflow}{if} (m\_layers.size() < 2) \{
375     std::stringstream err;
376     err << \_\_FILE\_\_ << \textcolor{stringliteral}{" "} << \_\_LINE\_\_ << \textcolor{stringliteral}{" :: "}
377         << \textcolor{stringliteral}{"expected the first layer to be an input layer "}
378         << \textcolor{stringliteral}{"and the last to be a target layer"};
379     \textcolor{keywordflow}{throw} lbann\_exception(err.str());
380 
381   \}
382   \hyperlink{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}{m\_previous\_step\_layer}.clear();
383   \hyperlink{classlbann_1_1recurrent__model_a426829f7fa36b112b4b91393c1657ddd}{m\_next\_step\_layer}.clear();
384   \hyperlink{namespacelbann_1_1anonymous__namespace_02recurrent_8cpp_03_a8c76387c2dd531058700ad9a41cd093a}{unroll\_input\_layer}(\hyperlink{classlbann_1_1recurrent__model_a71eb93ebf3411a5c170f6570c93e3cca}{m\_unroll\_depth}, m\_layers, 
      \hyperlink{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}{m\_previous\_step\_layer}, \hyperlink{classlbann_1_1recurrent__model_a426829f7fa36b112b4b91393c1657ddd}{m\_next\_step\_layer});
385   \hyperlink{namespacelbann_1_1anonymous__namespace_02recurrent_8cpp_03_af04adecd9a62fdcd16ae78b3e95d4bb5}{unroll\_target\_layer}(\hyperlink{classlbann_1_1recurrent__model_a71eb93ebf3411a5c170f6570c93e3cca}{m\_unroll\_depth}, m\_layers, 
      \hyperlink{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}{m\_previous\_step\_layer}, \hyperlink{classlbann_1_1recurrent__model_a426829f7fa36b112b4b91393c1657ddd}{m\_next\_step\_layer});
386   \hyperlink{namespacelbann_1_1anonymous__namespace_02recurrent_8cpp_03_a16733e1fb301c3099a5fe07d703c3782}{add\_unrolled\_layers}(\hyperlink{classlbann_1_1recurrent__model_a71eb93ebf3411a5c170f6570c93e3cca}{m\_unroll\_depth}, m\_layers, 
      \hyperlink{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}{m\_previous\_step\_layer}, \hyperlink{classlbann_1_1recurrent__model_a426829f7fa36b112b4b91393c1657ddd}{m\_next\_step\_layer});
387   \hyperlink{namespacelbann_1_1anonymous__namespace_02recurrent_8cpp_03_a50bca1c07c6f3146947b2a0fb5cc815a}{add\_placeholder\_layers}(m\_layers, \hyperlink{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}{m\_previous\_step\_layer}, 
      \hyperlink{classlbann_1_1recurrent__model_a426829f7fa36b112b4b91393c1657ddd}{m\_next\_step\_layer});
388   \hyperlink{namespacelbann_1_1anonymous__namespace_02recurrent_8cpp_03_a12a6f96a1c15c91218169bf7157cd800}{setup\_unrolled\_layer\_pointers}(m\_layers, 
      \hyperlink{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}{m\_previous\_step\_layer}, \hyperlink{classlbann_1_1recurrent__model_a426829f7fa36b112b4b91393c1657ddd}{m\_next\_step\_layer});
389 
390   \textcolor{comment}{// Make sure unrolled topology is a DAG}
391   \hyperlink{classlbann_1_1model_a7b3e2a643c658dcaa7478d2568f29784}{directed\_acyclic\_graph\_model::setup\_layer\_topology}();
392   
393 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1recurrent__model_ac89ddfa607e5cb6b940eb389ebbce6f6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1recurrent__model_ac89ddfa607e5cb6b940eb389ebbce6f6_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1recurrent__model_a712dabb1c1e90f6e268b42f6abaedd93}\label{classlbann_1_1recurrent__model_a712dabb1c1e90f6e268b42f6abaedd93}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!setup\+\_\+layers@{setup\+\_\+layers}}
\index{setup\+\_\+layers@{setup\+\_\+layers}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{setup\+\_\+layers()}{setup\_layers()}}
{\footnotesize\ttfamily void lbann\+::recurrent\+\_\+model\+::setup\+\_\+layers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Set up layers. Called in setup function. 

Reimplemented from \hyperlink{classlbann_1_1model_a989ab581e359f65c9238d627cce5b589}{lbann\+::model}.



Definition at line 395 of file recurrent.\+cpp.


\begin{DoxyCode}
395                                    \{
396   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0; i<\hyperlink{classlbann_1_1model_a0229fc226ec163d1411548446104569d}{m\_layers}.size(); ++i) \{
397     \textcolor{keyword}{auto}&& l = \hyperlink{classlbann_1_1model_a0229fc226ec163d1411548446104569d}{m\_layers}[i];
398 
399     \textcolor{comment}{// Set slice points for the inserted slice layer}
400     \textcolor{keywordflow}{if} (i == 1) \{
401       std::vector<int> slice\_points;
402       \textcolor{keyword}{const} \textcolor{keyword}{auto}& input\_dims = \hyperlink{classlbann_1_1model_a0229fc226ec163d1411548446104569d}{m\_layers}[0]->get\_neuron\_dims();
403       \textcolor{keyword}{const} \textcolor{keyword}{auto}& slice\_size = input\_dims[0] / \hyperlink{classlbann_1_1recurrent__model_a71eb93ebf3411a5c170f6570c93e3cca}{m\_unroll\_depth};
404       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} step = 0; step <= \hyperlink{classlbann_1_1recurrent__model_a71eb93ebf3411a5c170f6570c93e3cca}{m\_unroll\_depth}; ++step) \{
405         slice\_points.push\_back(slice\_size * step);
406       \}
407       \textcolor{keyword}{auto}&& slice\_dp = \textcolor{keyword}{dynamic\_cast<}slice\_layer<data\_layout::DATA\_PARALLEL>*\textcolor{keyword}{>}(l);
408       \textcolor{keyword}{auto}&& slice\_mp = \textcolor{keyword}{dynamic\_cast<}slice\_layer<data\_layout::MODEL\_PARALLEL>*\textcolor{keyword}{>}(l);
409       \textcolor{keywordflow}{if} (slice\_dp != \textcolor{keyword}{nullptr}) \{
410         slice\_dp->get\_slice\_points() = slice\_points;
411       \}
412       \textcolor{keywordflow}{if} (slice\_mp != \textcolor{keyword}{nullptr}) \{
413         slice\_mp->get\_slice\_points() = slice\_points;
414       \}
415       \textcolor{keywordflow}{if} (slice\_dp == \textcolor{keyword}{nullptr} && slice\_mp == \textcolor{keyword}{nullptr}) \{
416         std::stringstream err;
417         err << \_\_FILE\_\_ << \textcolor{stringliteral}{" "} << \_\_LINE\_\_ << \textcolor{stringliteral}{" :: "}
418             << \textcolor{stringliteral}{"expected the second layer to be a slice layer, "}
419             << \textcolor{stringliteral}{"but "} << l->get\_name() << \textcolor{stringliteral}{" is "} << l->get\_type();
420         \textcolor{keywordflow}{throw} lbann\_exception(err.str());
421       \}
422     \}
423   
424     \textcolor{comment}{// Corresponding weights in different steps share weights}
425     \textcolor{keyword}{auto}&& prev\_step\_layer = \hyperlink{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}{m\_previous\_step\_layer}[l];
426     \textcolor{keywordflow}{if} (prev\_step\_layer != \textcolor{keyword}{nullptr}) \{
427       \textcolor{keyword}{auto}&& w = prev\_step\_layer->get\_weights();
428       \textcolor{keywordflow}{if} (!w.empty()) \{
429         l->set\_weights(w);
430       \}
431     \}
432 
433     \textcolor{comment}{// Setup layer}
434     l->set\_model(\textcolor{keyword}{this});
435     l->setup();
436     l->check\_setup();
437     \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1model_a0eabaf2b2f829fd5db3dfd26df420df0}{m\_comm}->\hyperlink{classlbann_1_1lbann__comm_a1ef526486183a29feadca9bef096a534}{am\_world\_master}()) \{
438       std::cout << \hyperlink{classlbann_1_1model_ab173fd93a80a2980059ff292c308cbf5}{print\_layer\_description}(l) << std::endl;
439     \}
440 
441   \}
442 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1recurrent__model_a712dabb1c1e90f6e268b42f6abaedd93_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1recurrent__model_a712dabb1c1e90f6e268b42f6abaedd93_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1recurrent__model_a426829f7fa36b112b4b91393c1657ddd}\label{classlbann_1_1recurrent__model_a426829f7fa36b112b4b91393c1657ddd}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!m\+\_\+next\+\_\+step\+\_\+layer@{m\+\_\+next\+\_\+step\+\_\+layer}}
\index{m\+\_\+next\+\_\+step\+\_\+layer@{m\+\_\+next\+\_\+step\+\_\+layer}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{m\+\_\+next\+\_\+step\+\_\+layer}{m\_next\_step\_layer}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$const \hyperlink{classlbann_1_1Layer}{Layer}$\ast$, \hyperlink{classlbann_1_1Layer}{Layer}$\ast$$>$ lbann\+::recurrent\+\_\+model\+::m\+\_\+next\+\_\+step\+\_\+layer\hspace{0.3cm}{\ttfamily [private]}}

Map to corresponding layer in next step. Layers in the last step map to null pointers. The input and target layers map to themselves. 

Definition at line 85 of file recurrent.\+hpp.

\mbox{\Hypertarget{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}\label{classlbann_1_1recurrent__model_ac728773d3de0cefb9390231dc176dca4}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!m\+\_\+previous\+\_\+step\+\_\+layer@{m\+\_\+previous\+\_\+step\+\_\+layer}}
\index{m\+\_\+previous\+\_\+step\+\_\+layer@{m\+\_\+previous\+\_\+step\+\_\+layer}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{m\+\_\+previous\+\_\+step\+\_\+layer}{m\_previous\_step\_layer}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$const \hyperlink{classlbann_1_1Layer}{Layer}$\ast$, \hyperlink{classlbann_1_1Layer}{Layer}$\ast$$>$ lbann\+::recurrent\+\_\+model\+::m\+\_\+previous\+\_\+step\+\_\+layer\hspace{0.3cm}{\ttfamily [private]}}

Map to corresponding layer in previous step. Layers in the first step map to null pointers. The input and target layers map to themselves. 

Definition at line 80 of file recurrent.\+hpp.

\mbox{\Hypertarget{classlbann_1_1recurrent__model_a71eb93ebf3411a5c170f6570c93e3cca}\label{classlbann_1_1recurrent__model_a71eb93ebf3411a5c170f6570c93e3cca}} 
\index{lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}!m\+\_\+unroll\+\_\+depth@{m\+\_\+unroll\+\_\+depth}}
\index{m\+\_\+unroll\+\_\+depth@{m\+\_\+unroll\+\_\+depth}!lbann\+::recurrent\+\_\+model@{lbann\+::recurrent\+\_\+model}}
\subsubsection{\texorpdfstring{m\+\_\+unroll\+\_\+depth}{m\_unroll\_depth}}
{\footnotesize\ttfamily int lbann\+::recurrent\+\_\+model\+::m\+\_\+unroll\+\_\+depth\hspace{0.3cm}{\ttfamily [private]}}

The number of times to unroll the recurrent network. 

Definition at line 74 of file recurrent.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/models/\hyperlink{recurrent_8hpp}{recurrent.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/models/\hyperlink{recurrent_8cpp}{recurrent.\+cpp}\end{DoxyCompactItemize}
