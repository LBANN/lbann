\hypertarget{classlbann_1_1split__layer}{}\section{lbann\+:\+:split\+\_\+layer$<$ T\+\_\+layout $>$ Class Template Reference}
\label{classlbann_1_1split__layer}\index{lbann\+::split\+\_\+layer$<$ T\+\_\+layout $>$@{lbann\+::split\+\_\+layer$<$ T\+\_\+layout $>$}}


{\ttfamily \#include $<$split.\+hpp$>$}



Inheritance diagram for lbann\+:\+:split\+\_\+layer$<$ T\+\_\+layout $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=195pt]{classlbann_1_1split__layer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:split\+\_\+layer$<$ T\+\_\+layout $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1split__layer__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1split__layer_a875f1e07dd924826e7ec62e44f697c3e}{split\+\_\+layer} (\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm}, \hyperlink{classlbann_1_1cudnn_1_1cudnn__manager}{cudnn\+::cudnn\+\_\+manager} $\ast$cudnn=nullptr)
\item 
\hyperlink{classlbann_1_1split__layer}{split\+\_\+layer} $\ast$ \hyperlink{classlbann_1_1split__layer_ae6b974e17e27163c6856b6114b7d6362}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1split__layer_a3c0863c5c28e69f09fa586f8ff57c757}{get\+\_\+type} () const override
\item 
\hyperlink{base_8hpp_a786677cbfb3f5677b4d84f3056eb08db}{data\+\_\+layout} \hyperlink{classlbann_1_1split__layer_ad206038eac236a971664ccacec8faa82}{get\+\_\+data\+\_\+layout} () const override
\item 
std\+::string \hyperlink{classlbann_1_1split__layer_a3e599c39385b1d707ad9f28454f52cf5}{get\+\_\+description} () const override
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classlbann_1_1split__layer_aeb4caccd2675195ce75ae63485f6d402}{fp\+\_\+compute} () override
\item 
void \hyperlink{classlbann_1_1split__layer_ae7b54dc12b2560d27f506d5f34c4074f}{bp\+\_\+compute} () override
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\subsubsection*{template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$\newline
class lbann\+::split\+\_\+layer$<$ T\+\_\+layout $>$}

Split layer. This layer can accommodate an arbitrary number of outputs. 

Definition at line 41 of file split.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1split__layer_a875f1e07dd924826e7ec62e44f697c3e}\label{classlbann_1_1split__layer_a875f1e07dd924826e7ec62e44f697c3e}} 
\index{lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}!split\+\_\+layer@{split\+\_\+layer}}
\index{split\+\_\+layer@{split\+\_\+layer}!lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}}
\subsubsection{\texorpdfstring{split\+\_\+layer()}{split\_layer()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
\hyperlink{classlbann_1_1split__layer}{lbann\+::split\+\_\+layer}$<$ T\+\_\+layout $>$\+::\hyperlink{classlbann_1_1split__layer}{split\+\_\+layer} (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$}]{comm,  }\item[{\hyperlink{classlbann_1_1cudnn_1_1cudnn__manager}{cudnn\+::cudnn\+\_\+manager} $\ast$}]{cudnn = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 46 of file split.\+hpp.


\begin{DoxyCode}
48     : \hyperlink{classlbann_1_1transform__layer_a4b72501e0f4d0745c8b13c5331055e65}{transform\_layer}(\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm}) \{
49 
50     \textcolor{comment}{// Split layer has no limit on children}
51     \hyperlink{classlbann_1_1Layer_ac08f133dddd150319650e220ab9a523a}{m\_expected\_num\_child\_layers} = -1;
52 
53 \textcolor{preprocessor}{  #ifdef LBANN\_HAS\_CUDNN}
54     \textcolor{comment}{// Initialize GPU if available}
55     \textcolor{keywordflow}{if}(cudnn) \{
56       this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus} = \textcolor{keyword}{true};
57       this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn} = cudnn;
58     \}
59 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
60 
61   \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=298pt]{classlbann_1_1split__layer_a875f1e07dd924826e7ec62e44f697c3e_icgraph}
\end{center}
\end{figure}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1split__layer_ae7b54dc12b2560d27f506d5f34c4074f}\label{classlbann_1_1split__layer_ae7b54dc12b2560d27f506d5f34c4074f}} 
\index{lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}!bp\+\_\+compute@{bp\+\_\+compute}}
\index{bp\+\_\+compute@{bp\+\_\+compute}!lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}}
\subsubsection{\texorpdfstring{bp\+\_\+compute()}{bp\_compute()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
void \hyperlink{classlbann_1_1split__layer}{lbann\+::split\+\_\+layer}$<$ T\+\_\+layout $>$\+::bp\+\_\+compute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Perform the computation for the backward propagation step. 

Implements \hyperlink{classlbann_1_1Layer_a7442e01f9ee1294df2de811efcf5171e}{lbann\+::\+Layer}.



Definition at line 98 of file split.\+hpp.


\begin{DoxyCode}
98                              \{
99     \textcolor{keywordflow}{if}(this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus}) \{
100 \textcolor{preprocessor}{  #ifndef LBANN\_HAS\_CUDNN}
101       \textcolor{keywordflow}{throw} lbann\_exception(\textcolor{stringliteral}{"split\_layer: cuDNN not detected"});
102 \textcolor{preprocessor}{  #else}
103       \textcolor{keyword}{const} \textcolor{keywordtype}{int} num\_gpus = \hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_num\_gpus();
104       \textcolor{keyword}{auto}& gradient\_wrt\_input\_d = m\_error\_signals\_d[0];
105       \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}& gradient\_wrt\_output\_d : this->m\_prev\_error\_signals\_d) \{
106         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<num\_gpus; ++i) \{
107           CHECK\_CUDA(cudaSetDevice(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_gpu(i)));
108           cublas::geam(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_cublas\_handle(i),
109                        CUBLAS\_OP\_N, CUBLAS\_OP\_N,
110                        gradient\_wrt\_input\_d.get\_height(),
111                        this->m\_mini\_batch\_size\_per\_gpu,
112                        DataType(1),
113                        gradient\_wrt\_output\_d.get\_locked\_data(i),
114                        gradient\_wrt\_output\_d.get\_leading\_dim(),
115                        DataType(1),
116                        gradient\_wrt\_input\_d.get\_locked\_data(i),
117                        gradient\_wrt\_input\_d.get\_leading\_dim(),
118                        gradient\_wrt\_input\_d.get\_data(i),
119                        gradient\_wrt\_input\_d.get\_leading\_dim());
120         \}
121       \}
122 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
123     \} \textcolor{keywordflow}{else} \{
124       \textcolor{keyword}{auto}& gradient\_wrt\_input = \hyperlink{classlbann_1_1Layer_adb561e140e0bb601f3c5a8ee053a71d2}{get\_error\_signals}();
125       \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}& gradient\_wrt\_output : this->\hyperlink{classlbann_1_1Layer_a6fdcbf884150d0b20cffe678fefd7caa}{m\_prev\_error\_signals}) \{
126         El::Axpy(DataType(1), *gradient\_wrt\_output, gradient\_wrt\_input);
127       \}
128     \}
129   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=324pt]{classlbann_1_1split__layer_ae7b54dc12b2560d27f506d5f34c4074f_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1split__layer_ae6b974e17e27163c6856b6114b7d6362}\label{classlbann_1_1split__layer_ae6b974e17e27163c6856b6114b7d6362}} 
\index{lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}!copy@{copy}}
\index{copy@{copy}!lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
\hyperlink{classlbann_1_1split__layer}{split\+\_\+layer}$\ast$ \hyperlink{classlbann_1_1split__layer}{lbann\+::split\+\_\+layer}$<$ T\+\_\+layout $>$\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Copy function. This function dynamically allocates memory for a layer instance and instantiates a copy. The caller is responsible for deallocating the instance. 

Implements \hyperlink{classlbann_1_1Layer_af420f22bbac801c85483ade84588a23f}{lbann\+::\+Layer}.



Definition at line 63 of file split.\+hpp.


\begin{DoxyCode}
63 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1split__layer_a875f1e07dd924826e7ec62e44f697c3e}{split\_layer}(*\textcolor{keyword}{this}); \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=298pt]{classlbann_1_1split__layer_ae6b974e17e27163c6856b6114b7d6362_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1split__layer_aeb4caccd2675195ce75ae63485f6d402}\label{classlbann_1_1split__layer_aeb4caccd2675195ce75ae63485f6d402}} 
\index{lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}!fp\+\_\+compute@{fp\+\_\+compute}}
\index{fp\+\_\+compute@{fp\+\_\+compute}!lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}}
\subsubsection{\texorpdfstring{fp\+\_\+compute()}{fp\_compute()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
void \hyperlink{classlbann_1_1split__layer}{lbann\+::split\+\_\+layer}$<$ T\+\_\+layout $>$\+::fp\+\_\+compute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Perform the computation for the forward propagation step. 

Implements \hyperlink{classlbann_1_1Layer_a523319dd1bd87a0612afa1912bb5aad7}{lbann\+::\+Layer}.



Definition at line 80 of file split.\+hpp.


\begin{DoxyCode}
80                              \{
81     \textcolor{keywordflow}{if}(this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus}) \{
82 \textcolor{preprocessor}{  #ifndef LBANN\_HAS\_CUDNN}
83       \textcolor{keywordflow}{throw} lbann\_exception(\textcolor{stringliteral}{"split\_layer: cuDNN not detected"});
84 \textcolor{preprocessor}{  #else}
85       \textcolor{keyword}{const} \textcolor{keyword}{auto}& input\_d = this->m\_prev\_activations\_d[0];
86       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}& output\_d : this->m\_activations\_d ) \{
87         output\_d.locked\_view(input\_d);
88       \}
89 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
90     \} \textcolor{keywordflow}{else} \{
91       \textcolor{keyword}{const} \textcolor{keyword}{auto}& input = \hyperlink{classlbann_1_1Layer_a45853df73a2e72bfaa774665a0f37ed7}{get\_prev\_activations}();
92       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}& output : this->\hyperlink{classlbann_1_1Layer_a7caf08e938141d1584e6939cefa4baed}{m\_activations}) \{
93         El::LockedView(*output, input);
94       \}
95     \}
96   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=323pt]{classlbann_1_1split__layer_aeb4caccd2675195ce75ae63485f6d402_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1split__layer_ad206038eac236a971664ccacec8faa82}\label{classlbann_1_1split__layer_ad206038eac236a971664ccacec8faa82}} 
\index{lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}!get\+\_\+data\+\_\+layout@{get\+\_\+data\+\_\+layout}}
\index{get\+\_\+data\+\_\+layout@{get\+\_\+data\+\_\+layout}!lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}}
\subsubsection{\texorpdfstring{get\+\_\+data\+\_\+layout()}{get\_data\_layout()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
\hyperlink{base_8hpp_a786677cbfb3f5677b4d84f3056eb08db}{data\+\_\+layout} \hyperlink{classlbann_1_1split__layer}{lbann\+::split\+\_\+layer}$<$ T\+\_\+layout $>$\+::get\+\_\+data\+\_\+layout (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get data layout of the data tensors. We assume that the data layouts of the previous activations, activations, previous error signals, and error signals are the same. Each concrete layer that is templated on its data layout should override this function to return its template parameter. 

Implements \hyperlink{classlbann_1_1Layer_a5dfb66e81fc085997402a5e2241316bd}{lbann\+::\+Layer}.



Definition at line 65 of file split.\+hpp.


\begin{DoxyCode}
65 \{ \textcolor{keywordflow}{return} T\_layout; \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=300pt]{classlbann_1_1split__layer_ad206038eac236a971664ccacec8faa82_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1split__layer_a3e599c39385b1d707ad9f28454f52cf5}\label{classlbann_1_1split__layer_a3e599c39385b1d707ad9f28454f52cf5}} 
\index{lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}!get\+\_\+description@{get\+\_\+description}}
\index{get\+\_\+description@{get\+\_\+description}!lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}}
\subsubsection{\texorpdfstring{get\+\_\+description()}{get\_description()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
std\+::string \hyperlink{classlbann_1_1split__layer}{lbann\+::split\+\_\+layer}$<$ T\+\_\+layout $>$\+::get\+\_\+description (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Returns description of ctor params 

Reimplemented from \hyperlink{classlbann_1_1Layer_acc0803d3428914ca1eb5988c4309174a}{lbann\+::\+Layer}.



Definition at line 68 of file split.\+hpp.


\begin{DoxyCode}
68                                              \{
69     std::stringstream s;
70     s << \textcolor{stringliteral}{" split; children: "};
71     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} h=0; h<this->\hyperlink{classlbann_1_1Layer_ae348c0d2b4d05f74d809d09debb633c0}{m\_child\_layers}.size(); h++) \{
72       s << this->\hyperlink{classlbann_1_1Layer_ae348c0d2b4d05f74d809d09debb633c0}{m\_child\_layers}[h]->get\_name() << \textcolor{stringliteral}{" "} << this->
      \hyperlink{classlbann_1_1Layer_ae348c0d2b4d05f74d809d09debb633c0}{m\_child\_layers}[h]->get\_type() << \textcolor{stringliteral}{" "};
73     \}
74     s << \textcolor{stringliteral}{" dataLayout: "} << this->\hyperlink{classlbann_1_1Layer_ae3f4a5602df821f4221614b1e3782dc1}{get\_data\_layout\_string}(
      \hyperlink{classlbann_1_1split__layer_ad206038eac236a971664ccacec8faa82}{get\_data\_layout}());
75     \textcolor{keywordflow}{return} s.str();
76   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=323pt]{classlbann_1_1split__layer_a3e599c39385b1d707ad9f28454f52cf5_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1split__layer_a3c0863c5c28e69f09fa586f8ff57c757}\label{classlbann_1_1split__layer_a3c0863c5c28e69f09fa586f8ff57c757}} 
\index{lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}!get\+\_\+type@{get\+\_\+type}}
\index{get\+\_\+type@{get\+\_\+type}!lbann\+::split\+\_\+layer@{lbann\+::split\+\_\+layer}}
\subsubsection{\texorpdfstring{get\+\_\+type()}{get\_type()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
std\+::string \hyperlink{classlbann_1_1split__layer}{lbann\+::split\+\_\+layer}$<$ T\+\_\+layout $>$\+::get\+\_\+type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get the layer type\textquotesingle{}s name. A layer type name should be brief, human-\/readable description of the layer\textquotesingle{}s mathematical operation. 

Implements \hyperlink{classlbann_1_1Layer_a0fa0ea9160b490c151c0a17fde4f7239}{lbann\+::\+Layer}.



Definition at line 64 of file split.\+hpp.


\begin{DoxyCode}
64 \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"split"}; \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/layers/transform/\hyperlink{split_8hpp}{split.\+hpp}\end{DoxyCompactItemize}
