\hypertarget{classlbann_1_1data__reader__merge__samples}{}\section{lbann\+:\+:data\+\_\+reader\+\_\+merge\+\_\+samples Class Reference}
\label{classlbann_1_1data__reader__merge__samples}\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}


{\ttfamily \#include $<$data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp$>$}



Inheritance diagram for lbann\+:\+:data\+\_\+reader\+\_\+merge\+\_\+samples\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=211pt]{classlbann_1_1data__reader__merge__samples__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:data\+\_\+reader\+\_\+merge\+\_\+samples\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1data__reader__merge__samples_a01ff9ff7827030da41f1f6d257551260}{data\+\_\+reader\+\_\+merge\+\_\+samples} (std\+::vector$<$ \hyperlink{classlbann_1_1generic__data__reader}{generic\+\_\+data\+\_\+reader} $\ast$$>$ data\+\_\+readers, bool shuffle=true)
\item 
\hyperlink{classlbann_1_1data__reader__merge__samples_aaf15afcafbcd02c21763ae6cfc6ffe01}{data\+\_\+reader\+\_\+merge\+\_\+samples} (const \hyperlink{classlbann_1_1data__reader__merge__samples}{data\+\_\+reader\+\_\+merge\+\_\+samples} \&)
\item 
\hyperlink{classlbann_1_1data__reader__merge__samples}{data\+\_\+reader\+\_\+merge\+\_\+samples} \& \hyperlink{classlbann_1_1data__reader__merge__samples_a781fcc341e120886a3359e8ab41121d7}{operator=} (const \hyperlink{classlbann_1_1data__reader__merge__samples}{data\+\_\+reader\+\_\+merge\+\_\+samples} \&)
\item 
\hyperlink{classlbann_1_1data__reader__merge__samples_a42d90dd08c4e7bd6d83fde2d7b4578c3}{$\sim$data\+\_\+reader\+\_\+merge\+\_\+samples} () override
\item 
\hyperlink{classlbann_1_1data__reader__merge__samples}{data\+\_\+reader\+\_\+merge\+\_\+samples} $\ast$ \hyperlink{classlbann_1_1data__reader__merge__samples_ae22e720cfc9c6a196a04b7b65472618e}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1data__reader__merge__samples_a5d24385daebfd31343e6afc11b0439d1}{get\+\_\+type} () const override
\item 
void \hyperlink{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}{load} () override
\begin{DoxyCompactList}\small\item\em Load subsidiary data readers. \end{DoxyCompactList}\item 
int \hyperlink{classlbann_1_1data__reader__merge__samples_a98cb18c29a24358c9a385e29f57c3d57}{get\+\_\+num\+\_\+labels} () const override
\begin{DoxyCompactList}\small\item\em Return the number of labels (classes) in this dataset. \end{DoxyCompactList}\item 
int \hyperlink{classlbann_1_1data__reader__merge__samples_ae27598202866c365744f21f736421eaa}{get\+\_\+linearized\+\_\+data\+\_\+size} () const override
\begin{DoxyCompactList}\small\item\em Get the linearized size (i.\+e. number of elements) in a sample. \end{DoxyCompactList}\item 
int \hyperlink{classlbann_1_1data__reader__merge__samples_a880da359d18f4ae06ec50adf3b71219f}{get\+\_\+linearized\+\_\+label\+\_\+size} () const override
\begin{DoxyCompactList}\small\item\em Get the linearized size (i.\+e. number of elements) in a label. \end{DoxyCompactList}\item 
const std\+::vector$<$ int $>$ \hyperlink{classlbann_1_1data__reader__merge__samples_a09103cb5c42e03819fa44bf4e6d71752}{get\+\_\+data\+\_\+dims} () const override
\begin{DoxyCompactList}\small\item\em Get the dimensions of the data. \end{DoxyCompactList}\item 
const std\+::vector$<$ int $>$ \& \hyperlink{classlbann_1_1data__reader__merge__samples_a43dc3d7861f0231d96a9baa77916dff5}{get\+\_\+num\+\_\+samples\+\_\+psum} ()
\begin{DoxyCompactList}\small\item\em support for data store functionality \end{DoxyCompactList}\item 
void \hyperlink{classlbann_1_1data__reader__merge__samples_a589d6997ad093721e8c2c2cb3197c9e2}{setup\+\_\+data\+\_\+store} (\hyperlink{classlbann_1_1model}{model} $\ast$m) override
\begin{DoxyCompactList}\small\item\em sets up a data\+\_\+store. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classlbann_1_1data__reader__merge__samples_a413a54d7ccac03bfacdf63cf871fd378}{fetch\+\_\+datum} (\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&X, int data\+\_\+id, int mb\+\_\+idx, int tid) override
\item 
bool \hyperlink{classlbann_1_1data__reader__merge__samples_a93ce622e95e7ea0438bc78bdda8df44f}{fetch\+\_\+label} (\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&Y, int data\+\_\+id, int mb\+\_\+idx, int tid) override
\item 
bool \hyperlink{classlbann_1_1data__reader__merge__samples_ab39ad6b6e106eb30f58f9eabaf3352ad}{fetch\+\_\+response} (\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&Y, int data\+\_\+id, int mb\+\_\+idx, int tid) override
\item 
void \hyperlink{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}{load\+\_\+using\+\_\+data\+\_\+store} ()
\item 
void \hyperlink{classlbann_1_1data__reader__merge__samples_ae5fe8d5cf8eb1a6aa715579d329a620e}{setup\+\_\+indices} (int num\+\_\+samples)
\begin{DoxyCompactList}\small\item\em code common to both \hyperlink{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}{load()} and \hyperlink{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}{load\+\_\+using\+\_\+data\+\_\+store()} \end{DoxyCompactList}\item 
size\+\_\+t \hyperlink{classlbann_1_1data__reader__merge__samples_aafa54258bdc9d888da61c817462cdf65}{compute\+\_\+num\+\_\+samples\+\_\+psum} ()
\begin{DoxyCompactList}\small\item\em code common to both \hyperlink{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}{load()} and \hyperlink{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}{load\+\_\+using\+\_\+data\+\_\+store()} \end{DoxyCompactList}\item 
void \hyperlink{classlbann_1_1data__reader__merge__samples_a240368aa9f7f2ab1fa7c8d534b7f54ed}{sanity\+\_\+check\+\_\+for\+\_\+consistency} (int num\+\_\+labels, int data\+\_\+size, int label\+\_\+size, const std\+::vector$<$ int $>$ \&data\+\_\+dims)
\begin{DoxyCompactList}\small\item\em code common to both \hyperlink{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}{load()} and \hyperlink{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}{load\+\_\+using\+\_\+data\+\_\+store()} \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ int $>$ \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\+\_\+num\+\_\+samples\+\_\+psum}
\begin{DoxyCompactList}\small\item\em Partial sums of the number of samples in each reader. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Data reader for merging the samples from multiple data readers into a single dataset. 

Definition at line 40 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a01ff9ff7827030da41f1f6d257551260}\label{classlbann_1_1data__reader__merge__samples_a01ff9ff7827030da41f1f6d257551260}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!data\+\_\+reader\+\_\+merge\+\_\+samples@{data\+\_\+reader\+\_\+merge\+\_\+samples}}
\index{data\+\_\+reader\+\_\+merge\+\_\+samples@{data\+\_\+reader\+\_\+merge\+\_\+samples}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{data\+\_\+reader\+\_\+merge\+\_\+samples()}{data\_reader\_merge\_samples()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::data\+\_\+reader\+\_\+merge\+\_\+samples (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \hyperlink{classlbann_1_1generic__data__reader}{generic\+\_\+data\+\_\+reader} $\ast$$>$}]{data\+\_\+readers,  }\item[{bool}]{shuffle = {\ttfamily true} }\end{DoxyParamCaption})}



Definition at line 35 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
37                 :
38   \hyperlink{classlbann_1_1generic__compound__data__reader_ab2ed3059169e556e4310a55fa99c1f07}{generic\_compound\_data\_reader}(data\_readers, shuffle) \{\}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_a01ff9ff7827030da41f1f6d257551260_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_aaf15afcafbcd02c21763ae6cfc6ffe01}\label{classlbann_1_1data__reader__merge__samples_aaf15afcafbcd02c21763ae6cfc6ffe01}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!data\+\_\+reader\+\_\+merge\+\_\+samples@{data\+\_\+reader\+\_\+merge\+\_\+samples}}
\index{data\+\_\+reader\+\_\+merge\+\_\+samples@{data\+\_\+reader\+\_\+merge\+\_\+samples}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{data\+\_\+reader\+\_\+merge\+\_\+samples()}{data\_reader\_merge\_samples()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::data\+\_\+reader\+\_\+merge\+\_\+samples (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1data__reader__merge__samples}{data\+\_\+reader\+\_\+merge\+\_\+samples} \&}]{other }\end{DoxyParamCaption})}



Definition at line 40 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
41                                           :
42   \hyperlink{classlbann_1_1generic__compound__data__reader_ab2ed3059169e556e4310a55fa99c1f07}{generic\_compound\_data\_reader}(other),
43   \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}(other.m\_num\_samples\_psum) \{\}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a42d90dd08c4e7bd6d83fde2d7b4578c3}\label{classlbann_1_1data__reader__merge__samples_a42d90dd08c4e7bd6d83fde2d7b4578c3}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!````~data\+\_\+reader\+\_\+merge\+\_\+samples@{$\sim$data\+\_\+reader\+\_\+merge\+\_\+samples}}
\index{````~data\+\_\+reader\+\_\+merge\+\_\+samples@{$\sim$data\+\_\+reader\+\_\+merge\+\_\+samples}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{$\sim$data\+\_\+reader\+\_\+merge\+\_\+samples()}{~data\_reader\_merge\_samples()}}
{\footnotesize\ttfamily lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::$\sim$data\+\_\+reader\+\_\+merge\+\_\+samples (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Definition at line 52 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
52 \{\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_aafa54258bdc9d888da61c817462cdf65}\label{classlbann_1_1data__reader__merge__samples_aafa54258bdc9d888da61c817462cdf65}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!compute\+\_\+num\+\_\+samples\+\_\+psum@{compute\+\_\+num\+\_\+samples\+\_\+psum}}
\index{compute\+\_\+num\+\_\+samples\+\_\+psum@{compute\+\_\+num\+\_\+samples\+\_\+psum}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{compute\+\_\+num\+\_\+samples\+\_\+psum()}{compute\_num\_samples\_psum()}}
{\footnotesize\ttfamily size\+\_\+t lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::compute\+\_\+num\+\_\+samples\+\_\+psum (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



code common to both \hyperlink{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}{load()} and \hyperlink{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}{load\+\_\+using\+\_\+data\+\_\+store()} 



Definition at line 87 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
87                                                            \{
88   \textcolor{keywordtype}{size\_t} global\_num\_samples = 0;
89   \textcolor{comment}{// Prepend a 0 to make things easier.}
90   \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}.push\_back(0);
91   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}&& reader : \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}) \{
92     \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}.push\_back(reader->get\_num\_data());
93     global\_num\_samples += reader->get\_num\_data();
94   \}
95   std::partial\_sum(\hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}.begin(), 
      \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}.end(),
96                    \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}.begin());
97   \textcolor{keywordflow}{return} global\_num\_samples;
98 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_aafa54258bdc9d888da61c817462cdf65_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_ae22e720cfc9c6a196a04b7b65472618e}\label{classlbann_1_1data__reader__merge__samples_ae22e720cfc9c6a196a04b7b65472618e}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!copy@{copy}}
\index{copy@{copy}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1data__reader__merge__samples}{data\+\_\+reader\+\_\+merge\+\_\+samples}$\ast$ lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \hyperlink{classlbann_1_1generic__compound__data__reader_a197f5fd06679f777a709453830fcc4f9}{lbann\+::generic\+\_\+compound\+\_\+data\+\_\+reader}.



Definition at line 47 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp.


\begin{DoxyCode}
47                                                    \{
48     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1data__reader__merge__samples_a01ff9ff7827030da41f1f6d257551260}{data\_reader\_merge\_samples}(*\textcolor{keyword}{this});
49   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_ae22e720cfc9c6a196a04b7b65472618e_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a413a54d7ccac03bfacdf63cf871fd378}\label{classlbann_1_1data__reader__merge__samples_a413a54d7ccac03bfacdf63cf871fd378}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!fetch\+\_\+datum@{fetch\+\_\+datum}}
\index{fetch\+\_\+datum@{fetch\+\_\+datum}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{fetch\+\_\+datum()}{fetch\_datum()}}
{\footnotesize\ttfamily bool lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::fetch\+\_\+datum (\begin{DoxyParamCaption}\item[{\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{X,  }\item[{int}]{data\+\_\+id,  }\item[{int}]{mb\+\_\+idx,  }\item[{int}]{tid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Fetch a single sample into a matrix. 
\begin{DoxyParams}{Parameters}
{\em X} & The matrix to load data into. \\
\hline
{\em data\+\_\+id} & The index of the datum to fetch. \\
\hline
{\em mb\+\_\+idx} & The index within the mini-\/batch. \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a0a3cd87ed4a7057df185e0087f2d21c1}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 153 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
154                                                      \{
155   \textcolor{comment}{// Find the right data reader to delegate to.}
156   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}.size(); ++i) \{
157     \textcolor{keywordflow}{if} (data\_id < \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}[i + 1]) \{
158       data\_id -= \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}[i];
159       \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[i]->fetch\_datum(X, data\_id, mb\_idx, tid);
160     \}
161   \}
162   \textcolor{keywordflow}{throw} lbann\_exception(
163     \textcolor{stringliteral}{"data\_reader\_merge\_samples: do not have data ID "} +
164     std::to\_string(data\_id));
165 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_a413a54d7ccac03bfacdf63cf871fd378_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a93ce622e95e7ea0438bc78bdda8df44f}\label{classlbann_1_1data__reader__merge__samples_a93ce622e95e7ea0438bc78bdda8df44f}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!fetch\+\_\+label@{fetch\+\_\+label}}
\index{fetch\+\_\+label@{fetch\+\_\+label}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{fetch\+\_\+label()}{fetch\_label()}}
{\footnotesize\ttfamily bool lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::fetch\+\_\+label (\begin{DoxyParamCaption}\item[{\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{Y,  }\item[{int}]{data\+\_\+id,  }\item[{int}]{mb\+\_\+idx,  }\item[{int}]{tid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Fetch a single label into a matrix. 
\begin{DoxyParams}{Parameters}
{\em Y} & The matrix to load data into. \\
\hline
{\em data\+\_\+id} & The index of the datum to fetch. \\
\hline
{\em mb\+\_\+idx} & The index within the mini-\/batch. \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a03627408c1d1aa28691d31232fe1dce5}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 167 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
168                                                      \{
169   \textcolor{comment}{// Find the right data reader to delegate to.}
170   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}.size(); ++i) \{
171     \textcolor{keywordflow}{if} (data\_id < \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}[i + 1]) \{
172       data\_id -= \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}[i];
173       \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[i]->fetch\_label(Y, data\_id, mb\_idx, tid);
174     \}
175   \}
176   \textcolor{keywordflow}{throw} lbann\_exception(
177     \textcolor{stringliteral}{"data\_reader\_merge\_samples: do not have data ID "} +
178     std::to\_string(data\_id));
179 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_a93ce622e95e7ea0438bc78bdda8df44f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_ab39ad6b6e106eb30f58f9eabaf3352ad}\label{classlbann_1_1data__reader__merge__samples_ab39ad6b6e106eb30f58f9eabaf3352ad}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!fetch\+\_\+response@{fetch\+\_\+response}}
\index{fetch\+\_\+response@{fetch\+\_\+response}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{fetch\+\_\+response()}{fetch\_response()}}
{\footnotesize\ttfamily bool lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::fetch\+\_\+response (\begin{DoxyParamCaption}\item[{\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{Y,  }\item[{int}]{data\+\_\+id,  }\item[{int}]{mb\+\_\+idx,  }\item[{int}]{tid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Fetch a single response into a matrix. 
\begin{DoxyParams}{Parameters}
{\em Y} & The matrix to load data into. \\
\hline
{\em data\+\_\+id} & The index of the datum to fetch. \\
\hline
{\em mb\+\_\+idx} & The index within the mini-\/batch. \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_abe544ea807eed477f3636010d199b574}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 181 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
182                                                         \{
183   \textcolor{comment}{// Find the right data reader to delegate to.}
184   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}.size(); ++i) \{
185     \textcolor{keywordflow}{if} (data\_id < \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}[i + 1]) \{
186       data\_id -= \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum}[i];
187       \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[i]->fetch\_response(Y, data\_id, mb\_idx, tid);
188     \}
189   \}
190   \textcolor{keywordflow}{throw} lbann\_exception(
191     \textcolor{stringliteral}{"data\_reader\_merge\_samples: do not have data ID "} +
192     std::to\_string(data\_id));
193 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_ab39ad6b6e106eb30f58f9eabaf3352ad_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a09103cb5c42e03819fa44bf4e6d71752}\label{classlbann_1_1data__reader__merge__samples_a09103cb5c42e03819fa44bf4e6d71752}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!get\+\_\+data\+\_\+dims@{get\+\_\+data\+\_\+dims}}
\index{get\+\_\+data\+\_\+dims@{get\+\_\+data\+\_\+dims}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{get\+\_\+data\+\_\+dims()}{get\_data\_dims()}}
{\footnotesize\ttfamily const std\+::vector$<$int$>$ lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::get\+\_\+data\+\_\+dims (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Get the dimensions of the data. 



Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_ae06ff27459ac4a5d8ac14655d4b31318}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 65 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp.


\begin{DoxyCode}
65                                                       \{
66     \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[0]->get\_data\_dims();
67   \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_ae27598202866c365744f21f736421eaa}\label{classlbann_1_1data__reader__merge__samples_ae27598202866c365744f21f736421eaa}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!get\+\_\+linearized\+\_\+data\+\_\+size@{get\+\_\+linearized\+\_\+data\+\_\+size}}
\index{get\+\_\+linearized\+\_\+data\+\_\+size@{get\+\_\+linearized\+\_\+data\+\_\+size}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{get\+\_\+linearized\+\_\+data\+\_\+size()}{get\_linearized\_data\_size()}}
{\footnotesize\ttfamily int lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::get\+\_\+linearized\+\_\+data\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Get the linearized size (i.\+e. number of elements) in a sample. 



Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a246a719477c8c7b6122d41b6f5618d41}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 59 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp.


\begin{DoxyCode}
59                                                 \{
60     \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[0]->get\_linearized\_data\_size();
61   \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a880da359d18f4ae06ec50adf3b71219f}\label{classlbann_1_1data__reader__merge__samples_a880da359d18f4ae06ec50adf3b71219f}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!get\+\_\+linearized\+\_\+label\+\_\+size@{get\+\_\+linearized\+\_\+label\+\_\+size}}
\index{get\+\_\+linearized\+\_\+label\+\_\+size@{get\+\_\+linearized\+\_\+label\+\_\+size}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{get\+\_\+linearized\+\_\+label\+\_\+size()}{get\_linearized\_label\_size()}}
{\footnotesize\ttfamily int lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::get\+\_\+linearized\+\_\+label\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Get the linearized size (i.\+e. number of elements) in a label. 



Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a99e8ba4f09fdc86d238ad7c8d2e2bce0}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 62 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp.


\begin{DoxyCode}
62                                                  \{
63     \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[0]->get\_linearized\_label\_size();
64   \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a98cb18c29a24358c9a385e29f57c3d57}\label{classlbann_1_1data__reader__merge__samples_a98cb18c29a24358c9a385e29f57c3d57}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!get\+\_\+num\+\_\+labels@{get\+\_\+num\+\_\+labels}}
\index{get\+\_\+num\+\_\+labels@{get\+\_\+num\+\_\+labels}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{get\+\_\+num\+\_\+labels()}{get\_num\_labels()}}
{\footnotesize\ttfamily int lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::get\+\_\+num\+\_\+labels (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Return the number of labels (classes) in this dataset. 



Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a935ce6262d75f1834e550c3bc16a6547}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 58 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp.


\begin{DoxyCode}
58 \{ \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[0]->get\_num\_labels(); \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a43dc3d7861f0231d96a9baa77916dff5}\label{classlbann_1_1data__reader__merge__samples_a43dc3d7861f0231d96a9baa77916dff5}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!get\+\_\+num\+\_\+samples\+\_\+psum@{get\+\_\+num\+\_\+samples\+\_\+psum}}
\index{get\+\_\+num\+\_\+samples\+\_\+psum@{get\+\_\+num\+\_\+samples\+\_\+psum}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{get\+\_\+num\+\_\+samples\+\_\+psum()}{get\_num\_samples\_psum()}}
{\footnotesize\ttfamily const std\+::vector$<$int$>$\& lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::get\+\_\+num\+\_\+samples\+\_\+psum (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



support for data store functionality 



Definition at line 70 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp.


\begin{DoxyCode}
70                                                 \{
71     \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum};
72   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_a43dc3d7861f0231d96a9baa77916dff5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_a43dc3d7861f0231d96a9baa77916dff5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a5d24385daebfd31343e6afc11b0439d1}\label{classlbann_1_1data__reader__merge__samples_a5d24385daebfd31343e6afc11b0439d1}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!get\+\_\+type@{get\+\_\+type}}
\index{get\+\_\+type@{get\+\_\+type}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{get\+\_\+type()}{get\_type()}}
{\footnotesize\ttfamily std\+::string lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::get\+\_\+type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Return this data\+\_\+reader\textquotesingle{}s type 

Implements \hyperlink{classlbann_1_1generic__data__reader_abeb849fb8e10b4fa317c90bc33f61758}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 51 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp.


\begin{DoxyCode}
51                                       \{
52     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"data\_reader\_merge\_samples"};
53   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_a5d24385daebfd31343e6afc11b0439d1_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}\label{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!load@{load}}
\index{load@{load}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::load (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Load subsidiary data readers. 



Implements \hyperlink{classlbann_1_1generic__data__reader_afeb47703d988a230a59859cbfc178215}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 131 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
131                                      \{
132   \textcolor{keywordflow}{if} (\hyperlink{classoptions_a9ecfe9c365269df68a41b961c31ae3f5}{options::get}()->has\_bool(\textcolor{stringliteral}{"use\_data\_store"}) && \hyperlink{classoptions_a9ecfe9c365269df68a41b961c31ae3f5}{options::get}()->get\_bool(\textcolor{stringliteral}{"
      use\_data\_store"})) \{
133     \hyperlink{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}{data\_reader\_merge\_samples::load\_using\_data\_store}();
134     \textcolor{keywordflow}{return};
135   \}
136 
137   \textcolor{comment}{// Load each subsidiary data reader.}
138   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}&& reader : \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}) \{
139     reader->set\_comm(\hyperlink{classlbann_1_1generic__data__reader_ad3976d4b7db2d404dbb87a56c33fd456}{m\_comm});
140     reader->load();
141   \}
142   \textcolor{comment}{// Compute the total number of samples and do some sanity checks.}
143   \textcolor{keywordtype}{int} num\_labels = m\_data\_readers[0]->get\_num\_labels();
144   \textcolor{keywordtype}{int} data\_size = m\_data\_readers[0]->get\_linearized\_data\_size();
145   \textcolor{keywordtype}{int} label\_size = m\_data\_readers[0]->get\_linearized\_label\_size();
146   \textcolor{keyword}{const} std::vector<int> data\_dims = m\_data\_readers[0]->get\_data\_dims();
147   \hyperlink{classlbann_1_1data__reader__merge__samples_a240368aa9f7f2ab1fa7c8d534b7f54ed}{sanity\_check\_for\_consistency}(num\_labels, data\_size, label\_size, data\_dims);
148 
149   \textcolor{keywordtype}{size\_t} global\_num\_samples = \hyperlink{classlbann_1_1data__reader__merge__samples_aafa54258bdc9d888da61c817462cdf65}{compute\_num\_samples\_psum}();
150   \hyperlink{classlbann_1_1data__reader__merge__samples_ae5fe8d5cf8eb1a6aa715579d329a620e}{setup\_indices}(global\_num\_samples);
151 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}\label{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!load\+\_\+using\+\_\+data\+\_\+store@{load\+\_\+using\+\_\+data\+\_\+store}}
\index{load\+\_\+using\+\_\+data\+\_\+store@{load\+\_\+using\+\_\+data\+\_\+store}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{load\+\_\+using\+\_\+data\+\_\+store()}{load\_using\_data\_store()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::load\+\_\+using\+\_\+data\+\_\+store (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

support for data store functionality; \hyperlink{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}{load()} will call this method when using data store 

Definition at line 55 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
55                                                       \{
56   \textcolor{comment}{// load the subsidiary data readers}
57   \textcolor{keywordtype}{int} global\_num\_readers = \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}.size();
58   \textcolor{keywordtype}{int} np = \hyperlink{classlbann_1_1generic__data__reader_ad3976d4b7db2d404dbb87a56c33fd456}{m\_comm}->\hyperlink{classlbann_1_1lbann__comm_a5755dfdfc6377b4cae5ef8f7819e17de}{get\_procs\_per\_model}();
59   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0; j<global\_num\_readers; j++) \{
60     \textcolor{keywordtype}{int} owner = j % np;
61     \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[j]->set\_compound\_rank(owner);
62     \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[j]->set\_comm(\hyperlink{classlbann_1_1generic__data__reader_ad3976d4b7db2d404dbb87a56c33fd456}{m\_comm});
63     \textcolor{comment}{//only the processor whose rank == owner loads the NpyArray}
64     \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[j]->load(); 
65   \}
66 
67   \textcolor{comment}{// do some sanity checks.}
68   \textcolor{keywordtype}{int} num\_labels, data\_size, label\_size;
69   num\_labels = \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[0]->get\_num\_labels();
70   data\_size = \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[0]->get\_linearized\_data\_size();
71   label\_size = \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[0]->get\_linearized\_label\_size();
72   \textcolor{keyword}{const} std::vector<int> data\_dims = \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}[0]->get\_data\_dims();
73   \textcolor{comment}{/*}
74 \textcolor{comment}{  MPI\_Comm comm = m\_comm->get\_model\_comm().comm;}
75 \textcolor{comment}{  std::vector<int> data\_dims\_2 = data\_dims;}
76 \textcolor{comment}{  MPI\_Bcast(&num\_labels, 1, MPI\_INT, 0, comm);}
77 \textcolor{comment}{  MPI\_Bcast(&data\_size, 1, MPI\_INT, 0, comm);}
78 \textcolor{comment}{  MPI\_Bcast(&label\_size, 1, MPI\_INT, 0, comm);}
79 \textcolor{comment}{  MPI\_Bcast(&data\_dims\_2[0], data\_dims\_2.size(), MPI\_INT, 0, comm);}
80 \textcolor{comment}{  */}
81   \hyperlink{classlbann_1_1data__reader__merge__samples_a240368aa9f7f2ab1fa7c8d534b7f54ed}{sanity\_check\_for\_consistency}(num\_labels, data\_size, label\_size, data\_dims);
82 
83   \textcolor{keywordtype}{size\_t} global\_num\_samples = \hyperlink{classlbann_1_1data__reader__merge__samples_aafa54258bdc9d888da61c817462cdf65}{compute\_num\_samples\_psum}();
84   \hyperlink{classlbann_1_1data__reader__merge__samples_ae5fe8d5cf8eb1a6aa715579d329a620e}{setup\_indices}(global\_num\_samples);
85 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a781fcc341e120886a3359e8ab41121d7}\label{classlbann_1_1data__reader__merge__samples_a781fcc341e120886a3359e8ab41121d7}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1data__reader__merge__samples}{data\+\_\+reader\+\_\+merge\+\_\+samples} \& lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1data__reader__merge__samples}{data\+\_\+reader\+\_\+merge\+\_\+samples} \&}]{other }\end{DoxyParamCaption})}



Definition at line 45 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
46                                           \{
47   \hyperlink{classlbann_1_1generic__compound__data__reader_a7ece97b6fd2bc62da4d98f29cfb50155}{generic\_compound\_data\_reader::operator=}(other);
48   \hyperlink{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}{m\_num\_samples\_psum} = other.m\_num\_samples\_psum;
49   \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
50 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_a781fcc341e120886a3359e8ab41121d7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a240368aa9f7f2ab1fa7c8d534b7f54ed}\label{classlbann_1_1data__reader__merge__samples_a240368aa9f7f2ab1fa7c8d534b7f54ed}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!sanity\+\_\+check\+\_\+for\+\_\+consistency@{sanity\+\_\+check\+\_\+for\+\_\+consistency}}
\index{sanity\+\_\+check\+\_\+for\+\_\+consistency@{sanity\+\_\+check\+\_\+for\+\_\+consistency}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{sanity\+\_\+check\+\_\+for\+\_\+consistency()}{sanity\_check\_for\_consistency()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::sanity\+\_\+check\+\_\+for\+\_\+consistency (\begin{DoxyParamCaption}\item[{int}]{num\+\_\+labels,  }\item[{int}]{data\+\_\+size,  }\item[{int}]{label\+\_\+size,  }\item[{const std\+::vector$<$ int $>$ \&}]{data\+\_\+dims }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



code common to both \hyperlink{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}{load()} and \hyperlink{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}{load\+\_\+using\+\_\+data\+\_\+store()} 



Definition at line 100 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
101                                                                                   \{
102   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}&& reader : \hyperlink{classlbann_1_1generic__compound__data__reader_a9815e94ade5873415fd766e09d956d5b}{m\_data\_readers}) \{
103     \textcolor{keywordflow}{if} (num\_labels != reader->get\_num\_labels()) \{
104       \textcolor{keywordflow}{throw} lbann\_exception(
105         \textcolor{stringliteral}{"data\_reader\_merge\_samples: data readers do not have the same number of labels"});
106     \}
107     \textcolor{keywordflow}{if} (data\_size != reader->get\_linearized\_data\_size()) \{
108       \textcolor{keywordflow}{throw} lbann\_exception(
109         \textcolor{stringliteral}{"data\_reader\_merge\_samples: data readers do not have the same data size"});
110     \}
111     \textcolor{keywordflow}{if} (label\_size != reader->get\_linearized\_label\_size()) \{
112       \textcolor{keywordflow}{throw} lbann\_exception(
113         \textcolor{stringliteral}{"data\_reader\_merge\_samples: data readers do not have the same label size"});
114     \}
115     \textcolor{keywordflow}{if} (data\_dims != reader->get\_data\_dims()) \{
116       \textcolor{keywordflow}{throw} lbann\_exception(
117         \textcolor{stringliteral}{"data\_reader\_merge\_samples: data readers do not have the same data dims"});
118     \}
119   \}
120 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_a240368aa9f7f2ab1fa7c8d534b7f54ed_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_a589d6997ad093721e8c2c2cb3197c9e2}\label{classlbann_1_1data__reader__merge__samples_a589d6997ad093721e8c2c2cb3197c9e2}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!setup\+\_\+data\+\_\+store@{setup\+\_\+data\+\_\+store}}
\index{setup\+\_\+data\+\_\+store@{setup\+\_\+data\+\_\+store}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{setup\+\_\+data\+\_\+store()}{setup\_data\_store()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::setup\+\_\+data\+\_\+store (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



sets up a data\+\_\+store. 



Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a8b2a09d38512fc11f1b9d572c89100a7}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 195 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
195                                                          \{
196   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store} != \textcolor{keyword}{nullptr}) \{
197     \textcolor{keyword}{delete} \hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store};
198   \}
199   \hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store} = \textcolor{keyword}{nullptr};
200 \textcolor{comment}{/*}
201 \textcolor{comment}{  m\_data\_store = new data\_store\_merge\_samples(this, m);}
202 \textcolor{comment}{  if (m\_data\_store != nullptr) \{}
203 \textcolor{comment}{    m\_data\_store->setup();}
204 \textcolor{comment}{  \}}
205 \textcolor{comment}{*/}
206 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_a589d6997ad093721e8c2c2cb3197c9e2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_ae5fe8d5cf8eb1a6aa715579d329a620e}\label{classlbann_1_1data__reader__merge__samples_ae5fe8d5cf8eb1a6aa715579d329a620e}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!setup\+\_\+indices@{setup\+\_\+indices}}
\index{setup\+\_\+indices@{setup\+\_\+indices}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{setup\+\_\+indices()}{setup\_indices()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::setup\+\_\+indices (\begin{DoxyParamCaption}\item[{int}]{num\+\_\+samples }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



code common to both \hyperlink{classlbann_1_1data__reader__merge__samples_ab3554341417f5eba95b9c1098af40410}{load()} and \hyperlink{classlbann_1_1data__reader__merge__samples_ad45275b73fcbca47b74a9c9767f69bc9}{load\+\_\+using\+\_\+data\+\_\+store()} 



Definition at line 122 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp.


\begin{DoxyCode}
122                                                              \{
123   \textcolor{comment}{// Set up our indices.}
124   \textcolor{comment}{// Note each subsidiary data reader presumably shuffled its indices as well.}
125   \textcolor{comment}{// That's not strictly necessary, but does not impact anything.}
126   \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.resize(num\_samples);
127   std::iota(\hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.begin(), \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.end(), 0);
128   \hyperlink{classlbann_1_1generic__data__reader_aa28fdeeb6af492540f507e49adff5d6c}{select\_subset\_of\_data}();
129 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_ae5fe8d5cf8eb1a6aa715579d329a620e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__merge__samples_ae5fe8d5cf8eb1a6aa715579d329a620e_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}\label{classlbann_1_1data__reader__merge__samples_afd297d61c11bb6b0d03ce64836bd1300}} 
\index{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}!m\+\_\+num\+\_\+samples\+\_\+psum@{m\+\_\+num\+\_\+samples\+\_\+psum}}
\index{m\+\_\+num\+\_\+samples\+\_\+psum@{m\+\_\+num\+\_\+samples\+\_\+psum}!lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples@{lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples}}
\subsubsection{\texorpdfstring{m\+\_\+num\+\_\+samples\+\_\+psum}{m\_num\_samples\_psum}}
{\footnotesize\ttfamily std\+::vector$<$int$>$ lbann\+::data\+\_\+reader\+\_\+merge\+\_\+samples\+::m\+\_\+num\+\_\+samples\+\_\+psum\hspace{0.3cm}{\ttfamily [protected]}}



Partial sums of the number of samples in each reader. 



Definition at line 83 of file data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/data\+\_\+readers/\hyperlink{data__reader__merge__samples_8hpp}{data\+\_\+reader\+\_\+merge\+\_\+samples.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/data\+\_\+readers/\hyperlink{data__reader__merge__samples_8cpp}{data\+\_\+reader\+\_\+merge\+\_\+samples.\+cpp}\end{DoxyCompactItemize}
