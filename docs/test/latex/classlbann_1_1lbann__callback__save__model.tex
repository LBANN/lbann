\hypertarget{classlbann_1_1lbann__callback__save__model}{}\section{lbann\+:\+:lbann\+\_\+callback\+\_\+save\+\_\+model Class Reference}
\label{classlbann_1_1lbann__callback__save__model}\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}


{\ttfamily \#include $<$callback\+\_\+save\+\_\+model.\+hpp$>$}



Inheritance diagram for lbann\+:\+:lbann\+\_\+callback\+\_\+save\+\_\+model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=192pt]{classlbann_1_1lbann__callback__save__model__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:lbann\+\_\+callback\+\_\+save\+\_\+model\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=207pt]{classlbann_1_1lbann__callback__save__model__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1lbann__callback__save__model_a603d5e3c418ddc29724664eeff401707}{lbann\+\_\+callback\+\_\+save\+\_\+model} (std\+::string dir, std\+::string extension=\char`\"{}model\char`\"{})
\item 
\hyperlink{classlbann_1_1lbann__callback__save__model_ab5c646c34145f0d5d07608e709495f39}{lbann\+\_\+callback\+\_\+save\+\_\+model} (const \hyperlink{classlbann_1_1lbann__callback__save__model}{lbann\+\_\+callback\+\_\+save\+\_\+model} \&)=default
\item 
\hyperlink{classlbann_1_1lbann__callback__save__model}{lbann\+\_\+callback\+\_\+save\+\_\+model} \& \hyperlink{classlbann_1_1lbann__callback__save__model_a606ca0b8144e6cedc96311d9e74c04b7}{operator=} (const \hyperlink{classlbann_1_1lbann__callback__save__model}{lbann\+\_\+callback\+\_\+save\+\_\+model} \&)=default
\item 
\hyperlink{classlbann_1_1lbann__callback__save__model}{lbann\+\_\+callback\+\_\+save\+\_\+model} $\ast$ \hyperlink{classlbann_1_1lbann__callback__save__model_adaebfea30dcc1c32a8ae25a3307abb7f}{copy} () const override
\item 
void \hyperlink{classlbann_1_1lbann__callback__save__model_ae047ee35b65e9bda4080a83833612699}{on\+\_\+epoch\+\_\+end} (\hyperlink{classlbann_1_1model}{model} $\ast$m) override
\item 
std\+::string \hyperlink{classlbann_1_1lbann__callback__save__model_a85b88992e7cd7073279b8a9b6d8b142f}{name} () const override
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classlbann_1_1lbann__callback__save__model_a3c06fcc91890d4fe51a07672152b91a5}{write\+\_\+proto\+\_\+binary} (const lbann\+\_\+data\+::\+Model \&proto, const std\+::string filename)
\item 
void \hyperlink{classlbann_1_1lbann__callback__save__model_a9dd2617a12810287c4f5cb87746e71ea}{write\+\_\+proto\+\_\+text} (const lbann\+\_\+data\+::\+Model \&proto, const std\+::string filename)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::string \hyperlink{classlbann_1_1lbann__callback__save__model_aca89bd794b4a15b3beb89f3da464fbcd}{m\+\_\+dir}
\item 
std\+::string \hyperlink{classlbann_1_1lbann__callback__save__model_a76f51ce7ea7bbb1aff331102c87662bd}{m\+\_\+extension}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Save model to as protobuf file 

Definition at line 43 of file callback\+\_\+save\+\_\+model.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_a603d5e3c418ddc29724664eeff401707}\label{classlbann_1_1lbann__callback__save__model_a603d5e3c418ddc29724664eeff401707}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+\_\+callback\+\_\+save\+\_\+model}}
\index{lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+\_\+callback\+\_\+save\+\_\+model}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{lbann\+\_\+callback\+\_\+save\+\_\+model()}{lbann\_callback\_save\_model()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::lbann\+\_\+callback\+\_\+save\+\_\+model (\begin{DoxyParamCaption}\item[{std\+::string}]{dir,  }\item[{std\+::string}]{extension = {\ttfamily \char`\"{}model\char`\"{}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyParams}{Parameters}
{\em dir} & directory to save model \\
\hline
{\em file} & extension e.\+g., model, state ...... \\
\hline
\end{DoxyParams}


Definition at line 49 of file callback\+\_\+save\+\_\+model.\+hpp.


\begin{DoxyCode}
50                                                           :
51     \hyperlink{classlbann_1_1lbann__callback_a679057298a41ddd47f08c157f756c584}{lbann\_callback}(), \hyperlink{classlbann_1_1lbann__callback__save__model_aca89bd794b4a15b3beb89f3da464fbcd}{m\_dir}(std::move(dir)), \hyperlink{classlbann_1_1lbann__callback__save__model_a76f51ce7ea7bbb1aff331102c87662bd}{m\_extension}(std::move(extension)
      )
52     \{\}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__save__model_a603d5e3c418ddc29724664eeff401707_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__save__model_a603d5e3c418ddc29724664eeff401707_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_ab5c646c34145f0d5d07608e709495f39}\label{classlbann_1_1lbann__callback__save__model_ab5c646c34145f0d5d07608e709495f39}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+\_\+callback\+\_\+save\+\_\+model}}
\index{lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+\_\+callback\+\_\+save\+\_\+model}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{lbann\+\_\+callback\+\_\+save\+\_\+model()}{lbann\_callback\_save\_model()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::lbann\+\_\+callback\+\_\+save\+\_\+model (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1lbann__callback__save__model}{lbann\+\_\+callback\+\_\+save\+\_\+model} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_adaebfea30dcc1c32a8ae25a3307abb7f}\label{classlbann_1_1lbann__callback__save__model_adaebfea30dcc1c32a8ae25a3307abb7f}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!copy@{copy}}
\index{copy@{copy}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1lbann__callback__save__model}{lbann\+\_\+callback\+\_\+save\+\_\+model}$\ast$ lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \hyperlink{classlbann_1_1lbann__callback_a9f545d1269a8c7af335625d049691f26}{lbann\+::lbann\+\_\+callback}.



Definition at line 56 of file callback\+\_\+save\+\_\+model.\+hpp.


\begin{DoxyCode}
56                                                    \{
57     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1lbann__callback__save__model_a603d5e3c418ddc29724664eeff401707}{lbann\_callback\_save\_model}(*\textcolor{keyword}{this});
58   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__save__model_adaebfea30dcc1c32a8ae25a3307abb7f_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_a85b88992e7cd7073279b8a9b6d8b142f}\label{classlbann_1_1lbann__callback__save__model_a85b88992e7cd7073279b8a9b6d8b142f}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!name@{name}}
\index{name@{name}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{name()}{name()}}
{\footnotesize\ttfamily std\+::string lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Return this callback\textquotesingle{}s name. 

Implements \hyperlink{classlbann_1_1lbann__callback_a7522c7a14f1d6a1ea762cc2d7248eb3a}{lbann\+::lbann\+\_\+callback}.



Definition at line 60 of file callback\+\_\+save\+\_\+model.\+hpp.


\begin{DoxyCode}
60 \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"save model"}; \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_ae047ee35b65e9bda4080a83833612699}\label{classlbann_1_1lbann__callback__save__model_ae047ee35b65e9bda4080a83833612699}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!on\+\_\+epoch\+\_\+end@{on\+\_\+epoch\+\_\+end}}
\index{on\+\_\+epoch\+\_\+end@{on\+\_\+epoch\+\_\+end}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{on\+\_\+epoch\+\_\+end()}{on\_epoch\_end()}}
{\footnotesize\ttfamily void lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::on\+\_\+epoch\+\_\+end (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Called immediate after the end of each epoch. 

Reimplemented from \hyperlink{classlbann_1_1lbann__callback_a1fc71110e7f754bf73c9e0f344a448a5}{lbann\+::lbann\+\_\+callback}.



Definition at line 41 of file callback\+\_\+save\+\_\+model.\+cpp.


\begin{DoxyCode}
41                                                      \{
42   lbann\_data::Model model\_param;
43   \textcolor{keywordflow}{if}(m->get\_comm()->am\_world\_master()) std::cout << \textcolor{stringliteral}{"Save Model callback: write proto "} << std::endl; 
44   m->write\_proto(&model\_param);
45   std::string filename = \hyperlink{classlbann_1_1lbann__callback__save__model_aca89bd794b4a15b3beb89f3da464fbcd}{m\_dir} + \textcolor{stringliteral}{"."} + \hyperlink{classlbann_1_1lbann__callback__save__model_a76f51ce7ea7bbb1aff331102c87662bd}{m\_extension};
46   \textcolor{comment}{//@todo flag to save as either binary or text}
47   \textcolor{keywordflow}{if}(m\_extension == \textcolor{stringliteral}{"txt"}) \hyperlink{classlbann_1_1lbann__callback__save__model_a9dd2617a12810287c4f5cb87746e71ea}{write\_proto\_text}(model\_param,filename);
48   \textcolor{keywordflow}{else} \hyperlink{classlbann_1_1lbann__callback__save__model_a3c06fcc91890d4fe51a07672152b91a5}{write\_proto\_binary}(model\_param,filename);
49 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__save__model_ae047ee35b65e9bda4080a83833612699_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__save__model_ae047ee35b65e9bda4080a83833612699_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_a606ca0b8144e6cedc96311d9e74c04b7}\label{classlbann_1_1lbann__callback__save__model_a606ca0b8144e6cedc96311d9e74c04b7}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1lbann__callback__save__model}{lbann\+\_\+callback\+\_\+save\+\_\+model}\& lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1lbann__callback__save__model}{lbann\+\_\+callback\+\_\+save\+\_\+model} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__save__model_a606ca0b8144e6cedc96311d9e74c04b7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_a3c06fcc91890d4fe51a07672152b91a5}\label{classlbann_1_1lbann__callback__save__model_a3c06fcc91890d4fe51a07672152b91a5}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!write\+\_\+proto\+\_\+binary@{write\+\_\+proto\+\_\+binary}}
\index{write\+\_\+proto\+\_\+binary@{write\+\_\+proto\+\_\+binary}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{write\+\_\+proto\+\_\+binary()}{write\_proto\_binary()}}
{\footnotesize\ttfamily void lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::write\+\_\+proto\+\_\+binary (\begin{DoxyParamCaption}\item[{const lbann\+\_\+data\+::\+Model \&}]{proto,  }\item[{const std\+::string}]{filename }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 51 of file callback\+\_\+save\+\_\+model.\+cpp.


\begin{DoxyCode}
52                                                                              \{
53   std::fstream output(filename.c\_str(), std::ios::out | std::ios::trunc | std::ios::binary);
54   proto.SerializeToOstream(&output);
55 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__save__model_a3c06fcc91890d4fe51a07672152b91a5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_a9dd2617a12810287c4f5cb87746e71ea}\label{classlbann_1_1lbann__callback__save__model_a9dd2617a12810287c4f5cb87746e71ea}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!write\+\_\+proto\+\_\+text@{write\+\_\+proto\+\_\+text}}
\index{write\+\_\+proto\+\_\+text@{write\+\_\+proto\+\_\+text}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{write\+\_\+proto\+\_\+text()}{write\_proto\_text()}}
{\footnotesize\ttfamily void lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::write\+\_\+proto\+\_\+text (\begin{DoxyParamCaption}\item[{const lbann\+\_\+data\+::\+Model \&}]{proto,  }\item[{const std\+::string}]{filename }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 57 of file callback\+\_\+save\+\_\+model.\+cpp.


\begin{DoxyCode}
58                                                                            \{
59   \textcolor{keywordtype}{int} fd = open(filename.c\_str(), O\_WRONLY | O\_CREAT | O\_TRUNC, 0644);
60   \textcolor{keyword}{auto} output = \textcolor{keyword}{new} google::protobuf::io::FileOutputStream(fd);
61   google::protobuf::TextFormat::Print(proto, output);
62   \textcolor{keyword}{delete} output;
63   close(fd);
64 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__save__model_a9dd2617a12810287c4f5cb87746e71ea_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_aca89bd794b4a15b3beb89f3da464fbcd}\label{classlbann_1_1lbann__callback__save__model_aca89bd794b4a15b3beb89f3da464fbcd}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!m\+\_\+dir@{m\+\_\+dir}}
\index{m\+\_\+dir@{m\+\_\+dir}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{m\+\_\+dir}{m\_dir}}
{\footnotesize\ttfamily std\+::string lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::m\+\_\+dir\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 62 of file callback\+\_\+save\+\_\+model.\+hpp.

\mbox{\Hypertarget{classlbann_1_1lbann__callback__save__model_a76f51ce7ea7bbb1aff331102c87662bd}\label{classlbann_1_1lbann__callback__save__model_a76f51ce7ea7bbb1aff331102c87662bd}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}!m\+\_\+extension@{m\+\_\+extension}}
\index{m\+\_\+extension@{m\+\_\+extension}!lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model@{lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model}}
\subsubsection{\texorpdfstring{m\+\_\+extension}{m\_extension}}
{\footnotesize\ttfamily std\+::string lbann\+::lbann\+\_\+callback\+\_\+save\+\_\+model\+::m\+\_\+extension\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 63 of file callback\+\_\+save\+\_\+model.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/callbacks/\hyperlink{callback__save__model_8hpp}{callback\+\_\+save\+\_\+model.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/callbacks/\hyperlink{callback__save__model_8cpp}{callback\+\_\+save\+\_\+model.\+cpp}\end{DoxyCompactItemize}
