\hypertarget{classlbann_1_1lbann__callback__minibatch__schedule}{}\section{lbann\+:\+:lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule Class Reference}
\label{classlbann_1_1lbann__callback__minibatch__schedule}\index{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}


{\ttfamily \#include $<$callback\+\_\+variable\+\_\+minibatch.\+hpp$>$}



Inheritance diagram for lbann\+:\+:lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=192pt]{classlbann_1_1lbann__callback__minibatch__schedule__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=207pt]{classlbann_1_1lbann__callback__minibatch__schedule__coll__graph}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structlbann_1_1lbann__callback__minibatch__schedule_1_1minibatch__step}{minibatch\+\_\+step}
\begin{DoxyCompactList}\small\item\em Represents a step in a schedule of mini-\/batch sizes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_adceb97a2732247213fd25b3f1e824105}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule} (int starting\+\_\+mbsize, std\+::vector$<$ \hyperlink{structlbann_1_1lbann__callback__minibatch__schedule_1_1minibatch__step}{minibatch\+\_\+step} $>$ steps)
\item 
\hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a2b9849aed5002479815dc6372a544e80}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule} (const \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule} \&)=default
\item 
\hyperlink{classlbann_1_1lbann__callback__minibatch__schedule}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule} \& \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_aed9c1240268ca4f2cd0d77f2f5a4ec3f}{operator=} (const \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule} \&)=default
\item 
\hyperlink{classlbann_1_1lbann__callback__minibatch__schedule}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule} $\ast$ \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_ad815c5e84280c71cc57c7cb6c9a8c73b}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a2bb62cf45d2f7417cddcf79843ce3e2b}{name} () const override
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_af95cbe83a587590219174cb17828ea4b}{schedule} (\hyperlink{classlbann_1_1model}{model} $\ast$m, int \&new\+\_\+mbsize, float \&new\+\_\+lr, int \&ramp\+\_\+time) override
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \hyperlink{structlbann_1_1lbann__callback__minibatch__schedule_1_1minibatch__step}{minibatch\+\_\+step} $>$ \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\+\_\+steps}
\begin{DoxyCompactList}\small\item\em Steps in the mini-\/batch schedule, stored in reverse sorted order. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 110 of file callback\+\_\+variable\+\_\+minibatch.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__minibatch__schedule_adceb97a2732247213fd25b3f1e824105}\label{classlbann_1_1lbann__callback__minibatch__schedule_adceb97a2732247213fd25b3f1e824105}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}!lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}
\index{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}!lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}
\subsubsection{\texorpdfstring{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule()}{lbann\_callback\_minibatch\_schedule()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule (\begin{DoxyParamCaption}\item[{int}]{starting\+\_\+mbsize,  }\item[{std\+::vector$<$ \hyperlink{structlbann_1_1lbann__callback__minibatch__schedule_1_1minibatch__step}{minibatch\+\_\+step} $>$}]{steps }\end{DoxyParamCaption})}



Definition at line 165 of file callback\+\_\+variable\+\_\+minibatch.\+cpp.


\begin{DoxyCode}
166                                                         :
167   \hyperlink{classlbann_1_1lbann__callback__variable__minibatch_a970a03f0d297f8447020e85d23f5ee73}{lbann\_callback\_variable\_minibatch}(starting\_mbsize), 
      \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\_steps}(std::move(steps)) \{
168   std::sort(\hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\_steps}.rbegin(), \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\_steps}.rend(),
169             [] (\textcolor{keyword}{const} minibatch\_step& a, \textcolor{keyword}{const} minibatch\_step& b) \{
170               \textcolor{keywordflow}{return} a.epoch < b.epoch;
171             \});
172 \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__minibatch__schedule_a2b9849aed5002479815dc6372a544e80}\label{classlbann_1_1lbann__callback__minibatch__schedule_a2b9849aed5002479815dc6372a544e80}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}!lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}
\index{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}!lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}
\subsubsection{\texorpdfstring{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule()}{lbann\_callback\_minibatch\_schedule()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__minibatch__schedule_ad815c5e84280c71cc57c7cb6c9a8c73b}\label{classlbann_1_1lbann__callback__minibatch__schedule_ad815c5e84280c71cc57c7cb6c9a8c73b}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}!copy@{copy}}
\index{copy@{copy}!lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}$\ast$ lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \hyperlink{classlbann_1_1lbann__callback_a9f545d1269a8c7af335625d049691f26}{lbann\+::lbann\+\_\+callback}.



Definition at line 132 of file callback\+\_\+variable\+\_\+minibatch.\+hpp.


\begin{DoxyCode}
132                                                            \{
133     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_adceb97a2732247213fd25b3f1e824105}{lbann\_callback\_minibatch\_schedule}(*\textcolor{keyword}{this});
134   \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__minibatch__schedule_a2bb62cf45d2f7417cddcf79843ce3e2b}\label{classlbann_1_1lbann__callback__minibatch__schedule_a2bb62cf45d2f7417cddcf79843ce3e2b}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}!name@{name}}
\index{name@{name}!lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}
\subsubsection{\texorpdfstring{name()}{name()}}
{\footnotesize\ttfamily std\+::string lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule\+::name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Return this callback\textquotesingle{}s name. 

Implements \hyperlink{classlbann_1_1lbann__callback_a7522c7a14f1d6a1ea762cc2d7248eb3a}{lbann\+::lbann\+\_\+callback}.



Definition at line 135 of file callback\+\_\+variable\+\_\+minibatch.\+hpp.


\begin{DoxyCode}
135 \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"minibatch schedule"}; \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__minibatch__schedule_a2bb62cf45d2f7417cddcf79843ce3e2b_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__minibatch__schedule_aed9c1240268ca4f2cd0d77f2f5a4ec3f}\label{classlbann_1_1lbann__callback__minibatch__schedule_aed9c1240268ca4f2cd0d77f2f5a4ec3f}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}\& lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule}{lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

\mbox{\Hypertarget{classlbann_1_1lbann__callback__minibatch__schedule_af95cbe83a587590219174cb17828ea4b}\label{classlbann_1_1lbann__callback__minibatch__schedule_af95cbe83a587590219174cb17828ea4b}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}!schedule@{schedule}}
\index{schedule@{schedule}!lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}
\subsubsection{\texorpdfstring{schedule()}{schedule()}}
{\footnotesize\ttfamily bool lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule\+::schedule (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m,  }\item[{int \&}]{new\+\_\+mbsize,  }\item[{float \&}]{new\+\_\+lr,  }\item[{int \&}]{ramp\+\_\+time }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Implemented by child classes to provide the mini-\/batch/learning schedule. This is called at the end of every training epoch. If it returns false, no changes are made from the currently established schedule. If this returns true, the mini-\/batch size will be changed accordingly. If the mini-\/batch size is larger than the model\textquotesingle{}s maximum mini-\/batch size, a warning is printed and the maximum mini-\/batch size is used. If new\+\_\+lr also non-\/zero, the learning rate will be changed to new\+\_\+lr, with a linear ramp time. (If ramp\+\_\+time is 0, it is changed immediately.) Note changing the learning rate while in a ramp may lead to unexpected behavior; also be aware of interactions with other learning rate schedules. 

Implements \hyperlink{classlbann_1_1lbann__callback__variable__minibatch_ace13e8941491ddd28ef35c277cecb1ad}{lbann\+::lbann\+\_\+callback\+\_\+variable\+\_\+minibatch}.



Definition at line 174 of file callback\+\_\+variable\+\_\+minibatch.\+cpp.


\begin{DoxyCode}
175                                                             \{
176   \textcolor{keywordflow}{if} (!\hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\_steps}.empty() && m->get\_cur\_epoch() == \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\_steps}.back().epoch) \{
177     new\_mbsize = \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\_steps}.back().mbsize;
178     new\_lr = \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\_steps}.back().lr;
179     ramp\_time = \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\_steps}.back().ramp\_time;
180     \hyperlink{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}{m\_steps}.pop\_back();
181     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
182   \}
183   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
184 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=344pt]{classlbann_1_1lbann__callback__minibatch__schedule_af95cbe83a587590219174cb17828ea4b_cgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}\label{classlbann_1_1lbann__callback__minibatch__schedule_a05084eeba07e54fa11eed1a414b7aeeb}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}!m\+\_\+steps@{m\+\_\+steps}}
\index{m\+\_\+steps@{m\+\_\+steps}!lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule@{lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule}}
\subsubsection{\texorpdfstring{m\+\_\+steps}{m\_steps}}
{\footnotesize\ttfamily std\+::vector$<$\hyperlink{structlbann_1_1lbann__callback__minibatch__schedule_1_1minibatch__step}{minibatch\+\_\+step}$>$ lbann\+::lbann\+\_\+callback\+\_\+minibatch\+\_\+schedule\+::m\+\_\+steps\hspace{0.3cm}{\ttfamily [protected]}}



Steps in the mini-\/batch schedule, stored in reverse sorted order. 



Definition at line 140 of file callback\+\_\+variable\+\_\+minibatch.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/callbacks/\hyperlink{callback__variable__minibatch_8hpp}{callback\+\_\+variable\+\_\+minibatch.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/callbacks/\hyperlink{callback__variable__minibatch_8cpp}{callback\+\_\+variable\+\_\+minibatch.\+cpp}\end{DoxyCompactItemize}
