\hypertarget{classlbann_1_1lbann__callback__learning__rate}{}\section{lbann\+:\+:lbann\+\_\+callback\+\_\+learning\+\_\+rate Class Reference}
\label{classlbann_1_1lbann__callback__learning__rate}\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}


{\ttfamily \#include $<$callback\+\_\+learning\+\_\+rate.\+hpp$>$}



Inheritance diagram for lbann\+:\+:lbann\+\_\+callback\+\_\+learning\+\_\+rate\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__learning__rate__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:lbann\+\_\+callback\+\_\+learning\+\_\+rate\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=207pt]{classlbann_1_1lbann__callback__learning__rate__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1lbann__callback__learning__rate_a69687cd55f4d09c480e08e18488519fe}{lbann\+\_\+callback\+\_\+learning\+\_\+rate} ()
\item 
\hyperlink{classlbann_1_1lbann__callback__learning__rate_af933186f239fdea911e8934fe58e97fa}{lbann\+\_\+callback\+\_\+learning\+\_\+rate} (const \hyperlink{classlbann_1_1lbann__callback__learning__rate}{lbann\+\_\+callback\+\_\+learning\+\_\+rate} \&)=default
\item 
\hyperlink{classlbann_1_1lbann__callback__learning__rate}{lbann\+\_\+callback\+\_\+learning\+\_\+rate} \& \hyperlink{classlbann_1_1lbann__callback__learning__rate_a80b82eebf8e38cbe0a484aea43644705}{operator=} (const \hyperlink{classlbann_1_1lbann__callback__learning__rate}{lbann\+\_\+callback\+\_\+learning\+\_\+rate} \&)=default
\item 
\hyperlink{classlbann_1_1lbann__callback__learning__rate_a0c544d120f949cfc5c2dcb07d69b3cde}{lbann\+\_\+callback\+\_\+learning\+\_\+rate} (std\+::unordered\+\_\+set$<$ \hyperlink{classlbann_1_1weights}{weights} $\ast$$>$ weights\+\_\+list)
\item 
void \hyperlink{classlbann_1_1lbann__callback__learning__rate_a501f31a6b8fde1282a60e4b347e8d9d3}{setup} (\hyperlink{classlbann_1_1model}{model} $\ast$m) override
\item 
void \hyperlink{classlbann_1_1lbann__callback__learning__rate_ab8eb509bdbea501882d6b248a814bb28}{on\+\_\+epoch\+\_\+end} (\hyperlink{classlbann_1_1model}{model} $\ast$m) override
\item 
void \hyperlink{classlbann_1_1lbann__callback__learning__rate_ab6aa0530604e32a1be2b37f3933f6bf6}{on\+\_\+backward\+\_\+prop\+\_\+end} (\hyperlink{classlbann_1_1model}{model} $\ast$m) override
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual float \hyperlink{classlbann_1_1lbann__callback__learning__rate_a7869b93e5963d6f76da68d8c8137b979}{global\+\_\+schedule} (\hyperlink{classlbann_1_1model}{model} $\ast$m)
\item 
virtual float \hyperlink{classlbann_1_1lbann__callback__learning__rate_acf7f3921a68e7f1f772106e18c545345}{optimizer\+\_\+schedule} (\hyperlink{classlbann_1_1model}{model} $\ast$m, \hyperlink{classlbann_1_1optimizer}{optimizer} \&opt)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::unordered\+\_\+set$<$ \hyperlink{classlbann_1_1weights}{weights} $\ast$ $>$ \hyperlink{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}{m\+\_\+weights}
\end{DoxyCompactItemize}
\subsection*{Static Protected Attributes}
\begin{DoxyCompactItemize}
\item 
static float \hyperlink{classlbann_1_1lbann__callback__learning__rate_a97194f282c29a748c915d9811a8a99fb}{m\+\_\+cur\+\_\+global\+\_\+lr} = 0.\+0f
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Base class for learning rate schedules. Child classes should implement the schedule method to make changes. 

Definition at line 44 of file callback\+\_\+learning\+\_\+rate.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_a69687cd55f4d09c480e08e18488519fe}\label{classlbann_1_1lbann__callback__learning__rate_a69687cd55f4d09c480e08e18488519fe}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\index{lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+\_\+callback\+\_\+learning\+\_\+rate}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{lbann\+\_\+callback\+\_\+learning\+\_\+rate()}{lbann\_callback\_learning\_rate()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 38 of file callback\+\_\+learning\+\_\+rate.\+cpp.


\begin{DoxyCode}
38 \{\}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_af933186f239fdea911e8934fe58e97fa}\label{classlbann_1_1lbann__callback__learning__rate_af933186f239fdea911e8934fe58e97fa}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\index{lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+\_\+callback\+\_\+learning\+\_\+rate}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{lbann\+\_\+callback\+\_\+learning\+\_\+rate()}{lbann\_callback\_learning\_rate()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1lbann__callback__learning__rate}{lbann\+\_\+callback\+\_\+learning\+\_\+rate} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_a0c544d120f949cfc5c2dcb07d69b3cde}\label{classlbann_1_1lbann__callback__learning__rate_a0c544d120f949cfc5c2dcb07d69b3cde}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\index{lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+\_\+callback\+\_\+learning\+\_\+rate}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{lbann\+\_\+callback\+\_\+learning\+\_\+rate()}{lbann\_callback\_learning\_rate()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate (\begin{DoxyParamCaption}\item[{std\+::unordered\+\_\+set$<$ \hyperlink{classlbann_1_1weights}{weights} $\ast$$>$}]{weights\+\_\+list }\end{DoxyParamCaption})}

Only apply to specific weights. 

Definition at line 40 of file callback\+\_\+learning\+\_\+rate.\+cpp.


\begin{DoxyCode}
41                                             : \hyperlink{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}{m\_weights}(std::move(weights\_list)) \{\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_a7869b93e5963d6f76da68d8c8137b979}\label{classlbann_1_1lbann__callback__learning__rate_a7869b93e5963d6f76da68d8c8137b979}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!global\+\_\+schedule@{global\+\_\+schedule}}
\index{global\+\_\+schedule@{global\+\_\+schedule}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{global\+\_\+schedule()}{global\_schedule()}}
{\footnotesize\ttfamily virtual float lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::global\+\_\+schedule (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

This is called at the end of every epoch to update the learning rate for every optimizer. Adjustments should be made based on the current global learning rate. The returned learning rate will be used to automatically update the current global learning rate. 

Reimplemented in \hyperlink{classlbann_1_1lbann__callback__poly__learning__rate_a6302be36ef16079105b812c7599dac76}{lbann\+::lbann\+\_\+callback\+\_\+poly\+\_\+learning\+\_\+rate}, \hyperlink{classlbann_1_1lbann__callback__linear__growth__learning__rate_ad292e2e7f4078162ed93b6e05d94e0e4}{lbann\+::lbann\+\_\+callback\+\_\+linear\+\_\+growth\+\_\+learning\+\_\+rate}, \hyperlink{classlbann_1_1lbann__callback__drop__fixed__learning__rate_a2ee62bfde00d7f1a4e55e4a334160fbe}{lbann\+::lbann\+\_\+callback\+\_\+drop\+\_\+fixed\+\_\+learning\+\_\+rate}, \hyperlink{classlbann_1_1lbann__callback__adaptive__learning__rate_a6c64fae03736b8acba5c839f59d2ac6f}{lbann\+::lbann\+\_\+callback\+\_\+adaptive\+\_\+learning\+\_\+rate}, and \hyperlink{classlbann_1_1lbann__callback__step__learning__rate_a440671682e8c041a7208af77231059ec}{lbann\+::lbann\+\_\+callback\+\_\+step\+\_\+learning\+\_\+rate}.



Definition at line 68 of file callback\+\_\+learning\+\_\+rate.\+hpp.


\begin{DoxyCode}
68 \{ \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1lbann__callback__learning__rate_a97194f282c29a748c915d9811a8a99fb}{m\_cur\_global\_lr}; \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__learning__rate_a7869b93e5963d6f76da68d8c8137b979_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_ab6aa0530604e32a1be2b37f3933f6bf6}\label{classlbann_1_1lbann__callback__learning__rate_ab6aa0530604e32a1be2b37f3933f6bf6}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!on\+\_\+backward\+\_\+prop\+\_\+end@{on\+\_\+backward\+\_\+prop\+\_\+end}}
\index{on\+\_\+backward\+\_\+prop\+\_\+end@{on\+\_\+backward\+\_\+prop\+\_\+end}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{on\+\_\+backward\+\_\+prop\+\_\+end()}{on\_backward\_prop\_end()}}
{\footnotesize\ttfamily void lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::on\+\_\+backward\+\_\+prop\+\_\+end (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Apply local/per-\/optimizer learning rate schedules. 

Reimplemented from \hyperlink{classlbann_1_1lbann__callback_af183624e63ba65e0003fa988f53dee0c}{lbann\+::lbann\+\_\+callback}.



Definition at line 85 of file callback\+\_\+learning\+\_\+rate.\+cpp.


\begin{DoxyCode}
85                                                                 \{
86   \textcolor{keywordflow}{for} (weights *w : \hyperlink{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}{m\_weights}) \{
87     optimizer& opt = *w->get\_optimizer();
88     \textcolor{keyword}{const} \textcolor{keywordtype}{float} old\_lr = opt.get\_learning\_rate();
89     \textcolor{keyword}{const} \textcolor{keywordtype}{float} new\_lr = \hyperlink{classlbann_1_1lbann__callback__learning__rate_acf7f3921a68e7f1f772106e18c545345}{optimizer\_schedule}(m, opt);
90     \textcolor{keywordflow}{if} (old\_lr != new\_lr) \{
91       opt.set\_learning\_rate(new\_lr);
92     \}
93   \}
94 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__learning__rate_ab6aa0530604e32a1be2b37f3933f6bf6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_ab8eb509bdbea501882d6b248a814bb28}\label{classlbann_1_1lbann__callback__learning__rate_ab8eb509bdbea501882d6b248a814bb28}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!on\+\_\+epoch\+\_\+end@{on\+\_\+epoch\+\_\+end}}
\index{on\+\_\+epoch\+\_\+end@{on\+\_\+epoch\+\_\+end}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{on\+\_\+epoch\+\_\+end()}{on\_epoch\_end()}}
{\footnotesize\ttfamily void lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::on\+\_\+epoch\+\_\+end (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Apply global learning rate schedules. 

Reimplemented from \hyperlink{classlbann_1_1lbann__callback_a1fc71110e7f754bf73c9e0f344a448a5}{lbann\+::lbann\+\_\+callback}.



Definition at line 66 of file callback\+\_\+learning\+\_\+rate.\+cpp.


\begin{DoxyCode}
66                                                         \{
67   \textcolor{keyword}{const} \textcolor{keywordtype}{float} new\_lr = \hyperlink{classlbann_1_1lbann__callback__learning__rate_a7869b93e5963d6f76da68d8c8137b979}{global\_schedule}(m);
68   \textcolor{keyword}{const} \textcolor{keywordtype}{float} old\_global\_lr = \hyperlink{classlbann_1_1lbann__callback__learning__rate_a97194f282c29a748c915d9811a8a99fb}{m\_cur\_global\_lr};
69   \hyperlink{classlbann_1_1lbann__callback__learning__rate_a97194f282c29a748c915d9811a8a99fb}{m\_cur\_global\_lr} = new\_lr;
70   lbann\_comm *\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm} = m->get\_comm();
71   \textcolor{keywordflow}{if} (comm->am\_model\_master() && new\_lr != old\_global\_lr) \{
72     std::cout << \textcolor{stringliteral}{"Model "} << comm->get\_model\_rank() << \textcolor{stringliteral}{": "}
73               << \textcolor{stringliteral}{"changing global learning rate to "} << new\_lr
74               << \textcolor{stringliteral}{" at epoch "} << m->get\_cur\_epoch() << std::endl;
75   \}
76   \textcolor{keywordflow}{for} (weights *w : \hyperlink{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}{m\_weights}) \{
77     optimizer *opt = w->get\_optimizer();
78     \textcolor{keyword}{const} \textcolor{keywordtype}{float} old\_lr = opt->get\_learning\_rate();
79     \textcolor{keywordflow}{if} (old\_lr != new\_lr) \{
80       opt->set\_learning\_rate(new\_lr);
81     \}
82   \}
83 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__learning__rate_ab8eb509bdbea501882d6b248a814bb28_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_a80b82eebf8e38cbe0a484aea43644705}\label{classlbann_1_1lbann__callback__learning__rate_a80b82eebf8e38cbe0a484aea43644705}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1lbann__callback__learning__rate}{lbann\+\_\+callback\+\_\+learning\+\_\+rate}\& lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1lbann__callback__learning__rate}{lbann\+\_\+callback\+\_\+learning\+\_\+rate} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_acf7f3921a68e7f1f772106e18c545345}\label{classlbann_1_1lbann__callback__learning__rate_acf7f3921a68e7f1f772106e18c545345}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!optimizer\+\_\+schedule@{optimizer\+\_\+schedule}}
\index{optimizer\+\_\+schedule@{optimizer\+\_\+schedule}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{optimizer\+\_\+schedule()}{optimizer\_schedule()}}
{\footnotesize\ttfamily virtual float lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::optimizer\+\_\+schedule (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m,  }\item[{\hyperlink{classlbann_1_1optimizer}{optimizer} \&}]{opt }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

This is called at the end of every training mini-\/batch to update the learning rate for optimizer opt. The current global learning rate is {\itshape not} updated automatically based on this method. 

Reimplemented in \hyperlink{classlbann_1_1lbann__callback__optimizerwise__adaptive__learning__rate_aa9ce00b0ad1fefb20a1108d1120e82d5}{lbann\+::lbann\+\_\+callback\+\_\+optimizerwise\+\_\+adaptive\+\_\+learning\+\_\+rate}, and \hyperlink{classlbann_1_1lbann__callback__poly__learning__rate_a55414af733e519be126572ec92492bf7}{lbann\+::lbann\+\_\+callback\+\_\+poly\+\_\+learning\+\_\+rate}.



Definition at line 74 of file callback\+\_\+learning\+\_\+rate.\+hpp.


\begin{DoxyCode}
74                                                              \{
75     \textcolor{keywordflow}{return} opt.get\_learning\_rate();
76   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{classlbann_1_1lbann__callback__learning__rate_acf7f3921a68e7f1f772106e18c545345_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__learning__rate_acf7f3921a68e7f1f772106e18c545345_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_a501f31a6b8fde1282a60e4b347e8d9d3}\label{classlbann_1_1lbann__callback__learning__rate_a501f31a6b8fde1282a60e4b347e8d9d3}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!setup@{setup}}
\index{setup@{setup}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily void lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::setup (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Do some initialization. 

Reimplemented from \hyperlink{classlbann_1_1lbann__callback_aab5086e27d9bb0a7c7ee8ffc1bc58671}{lbann\+::lbann\+\_\+callback}.



Reimplemented in \hyperlink{classlbann_1_1lbann__callback__poly__learning__rate_a47d3d2a94157f1992bf4a964620208f3}{lbann\+::lbann\+\_\+callback\+\_\+poly\+\_\+learning\+\_\+rate}, and \hyperlink{classlbann_1_1lbann__callback__linear__growth__learning__rate_afaa81836e0dc1b6220212dad52df25fc}{lbann\+::lbann\+\_\+callback\+\_\+linear\+\_\+growth\+\_\+learning\+\_\+rate}.



Definition at line 43 of file callback\+\_\+learning\+\_\+rate.\+cpp.


\begin{DoxyCode}
43                                                  \{
44 
45   \textcolor{comment}{// Add all weights if list of weights is not initialized}
46   std::vector<weights *> weights\_list(\hyperlink{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}{m\_weights}.begin(), \hyperlink{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}{m\_weights}.end());
47   \textcolor{keywordflow}{if} (weights\_list.empty()) \{
48     weights\_list = m->get\_weights();
49   \}
50 
51   \textcolor{comment}{// Remove weights that are not being optimized}
52   \hyperlink{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}{m\_weights}.clear();
53   \textcolor{keywordflow}{for} (weights *w : weights\_list) \{
54     optimizer *opt = w->get\_optimizer();
55     \textcolor{keywordflow}{if} (opt != \textcolor{keyword}{nullptr}) \{
56       \hyperlink{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}{m\_weights}.insert(w);
57       \textcolor{comment}{// Initialize the global learning rate, exactly once.}
58       \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1lbann__callback__learning__rate_a97194f282c29a748c915d9811a8a99fb}{m\_cur\_global\_lr} == 0.0f) \{
59         \hyperlink{classlbann_1_1lbann__callback__learning__rate_a97194f282c29a748c915d9811a8a99fb}{m\_cur\_global\_lr} = opt->get\_learning\_rate();
60       \}
61     \}
62   \}
63 
64 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__learning__rate_a501f31a6b8fde1282a60e4b347e8d9d3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1lbann__callback__learning__rate_a501f31a6b8fde1282a60e4b347e8d9d3_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_a97194f282c29a748c915d9811a8a99fb}\label{classlbann_1_1lbann__callback__learning__rate_a97194f282c29a748c915d9811a8a99fb}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!m\+\_\+cur\+\_\+global\+\_\+lr@{m\+\_\+cur\+\_\+global\+\_\+lr}}
\index{m\+\_\+cur\+\_\+global\+\_\+lr@{m\+\_\+cur\+\_\+global\+\_\+lr}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{m\+\_\+cur\+\_\+global\+\_\+lr}{m\_cur\_global\_lr}}
{\footnotesize\ttfamily float lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::m\+\_\+cur\+\_\+global\+\_\+lr = 0.\+0f\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [protected]}}

This should be maintained by all learning rate schedule implementations as the current global learning rate. This enables coordination among different schedules, particularly ones that work on a per-\/optimizer basis. 

Definition at line 87 of file callback\+\_\+learning\+\_\+rate.\+hpp.

\mbox{\Hypertarget{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}\label{classlbann_1_1lbann__callback__learning__rate_a0b02e82190e04a22ab26d858041915d7}} 
\index{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}!m\+\_\+weights@{m\+\_\+weights}}
\index{m\+\_\+weights@{m\+\_\+weights}!lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate@{lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate}}
\subsubsection{\texorpdfstring{m\+\_\+weights}{m\_weights}}
{\footnotesize\ttfamily std\+::unordered\+\_\+set$<$\hyperlink{classlbann_1_1weights}{weights} $\ast$$>$ lbann\+::lbann\+\_\+callback\+\_\+learning\+\_\+rate\+::m\+\_\+weights\hspace{0.3cm}{\ttfamily [protected]}}

Weights to update. 

Definition at line 79 of file callback\+\_\+learning\+\_\+rate.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/callbacks/\hyperlink{callback__learning__rate_8hpp}{callback\+\_\+learning\+\_\+rate.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/callbacks/\hyperlink{callback__learning__rate_8cpp}{callback\+\_\+learning\+\_\+rate.\+cpp}\end{DoxyCompactItemize}
