\hypertarget{stack__profiler_8cpp}{}\section{/\+Users/mckinney27/doxy-\/testbed/lbann/src/utils/stack\+\_\+profiler.cpp File Reference}
\label{stack__profiler_8cpp}\index{/\+Users/mckinney27/doxy-\/testbed/lbann/src/utils/stack\+\_\+profiler.\+cpp@{/\+Users/mckinney27/doxy-\/testbed/lbann/src/utils/stack\+\_\+profiler.\+cpp}}
{\ttfamily \#include \char`\"{}lbann/utils/options.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lbann/utils/stack\+\_\+profiler.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lbann/utils/cyg\+\_\+profile.\+hpp\char`\"{}}\newline
{\ttfamily \#include $<$cxxabi.\+h$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$cstdio$>$}\newline
{\ttfamily \#include $<$cstdlib$>$}\newline
{\ttfamily \#include $<$dlfcn.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
Include dependency graph for stack\+\_\+profiler.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{stack__profiler_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \hyperlink{namespacelbann}{lbann}
\begin{DoxyCompactList}\small\item\em Open\+MP Diagnostic code from Edgar Leon at L\+L\+NL. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{stack__profiler_8cpp_ab5ce10a091e20ffd33bfd0bc9982f6c4}{c\+\_\+hash\+\_\+set\+\_\+thread\+\_\+id} (int id)
\item 
void \hyperlink{stack__profiler_8cpp_ad1c2d92ab2c29021521d36cf4c97e488}{c\+\_\+hash\+\_\+create} (long size)
\item 
bool \hyperlink{namespacelbann_aedcfce41af2eae595ce58b1180f66bd1}{lbann\+::count\+\_\+sorter} (const std\+::pair$<$ std\+::string, long $>$ \&a, const std\+::pair$<$ std\+::string, long $>$ \&b)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structc__hash__table}{c\+\_\+hash\+\_\+table} $\ast$ \hyperlink{stack__profiler_8cpp_acaf4dd8f3a0755b44949a87760cd1102}{c\+\_\+hash\+\_\+the\+\_\+hash\+\_\+table} = N\+U\+LL
\item 
F\+I\+LE $\ast$ \hyperlink{stack__profiler_8cpp_a6cc00bff1b0fcee1e92c726aea92c818}{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace} = N\+U\+LL
\item 
F\+I\+LE $\ast$ \hyperlink{stack__profiler_8cpp_a434aed2bad9781985a12de882aa0ec84}{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace\+\_\+metadata} = N\+U\+LL
\item 
int \hyperlink{stack__profiler_8cpp_a193e8df9f6b1bc5794e9aa25f82e6a5f}{c\+\_\+hash\+\_\+profiling\+\_\+is\+\_\+turned\+\_\+on} = 0
\item 
int \hyperlink{stack__profiler_8cpp_a92d77137d4b87923f488746604d72f94}{c\+\_\+hash\+\_\+thread\+\_\+id}
\item 
short \hyperlink{stack__profiler_8cpp_ae5255f380b4dacdd914710cbe8181ee2}{c\+\_\+hash\+\_\+func\+\_\+id} = 0
\item 
Dl\+\_\+info \hyperlink{stack__profiler_8cpp_a5c0c7f1634059c3321a07d97508e59e3}{c\+\_\+hash\+\_\+info}
\item 
short \hyperlink{stack__profiler_8cpp_a6e154cbf670e1744cf46337adddfb782}{c\+\_\+hash\+\_\+depth} = 0
\item 
long \hyperlink{stack__profiler_8cpp_a60ca1ac997785ebd8547c022d07fe4b5}{c\+\_\+hash\+\_\+lookups} = 0
\item 
long \hyperlink{stack__profiler_8cpp_a9e4c390c04f233e99f7577a1c63be028}{c\+\_\+hash\+\_\+collisions} = 0
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{stack__profiler_8cpp_ad1c2d92ab2c29021521d36cf4c97e488}\label{stack__profiler_8cpp_ad1c2d92ab2c29021521d36cf4c97e488}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+create@{c\+\_\+hash\+\_\+create}}
\index{c\+\_\+hash\+\_\+create@{c\+\_\+hash\+\_\+create}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+create()}{c\_hash\_create()}}
{\footnotesize\ttfamily void c\+\_\+hash\+\_\+create (\begin{DoxyParamCaption}\item[{long}]{size }\end{DoxyParamCaption})}

the hash table! This is a singleton creates the singleton hash table; the table will contain at least \char`\"{}size\char`\"{} slots (F\+YI, the table size is a power of two) 

Definition at line 37 of file stack\+\_\+profiler.\+cpp.


\begin{DoxyCode}
37                               \{
38   \hyperlink{structc__hash__table}{c\_hash\_table} *h = (\textcolor{keyword}{struct }\hyperlink{structc__hash__table}{c\_hash\_table}*) malloc(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} 
      \hyperlink{structc__hash__table}{c\_hash\_table}));
39   h->\hyperlink{structc__hash__table_afd5bfd9640fc5b72f75457fb7dd89663}{size} = 0;
40   h->\hyperlink{structc__hash__table_ae4c33f323d44301e5990ba3355a2d708}{count} = 0;
41   h->\hyperlink{structc__hash__table_a87debaad1679b5fd28537908174a7487}{cur\_mark} = 1;
42   h->\hyperlink{structc__hash__table_abfdd282e54441552086f78d30b959d60}{data} = NULL;
43 
44   \textcolor{comment}{//initial size for hash table; want this to be a power of 2}
45   \textcolor{keywordtype}{long} sz = 16;
46   \textcolor{keywordflow}{while} (sz < \hyperlink{structc__hash__table_afd5bfd9640fc5b72f75457fb7dd89663}{size}) \{ sz *= 2; \}
47   \textcolor{comment}{// rule-of-thumb: ensure there's some padding}
48   \textcolor{keywordflow}{if} ( (sz-\hyperlink{structc__hash__table_afd5bfd9640fc5b72f75457fb7dd89663}{size}) < (.1 * sz) ) \{ sz *= 2.0; \}
49   h->\hyperlink{structc__hash__table_afd5bfd9640fc5b72f75457fb7dd89663}{size} = sz;
50 
51   \textcolor{comment}{//allocate and zero the hash table}
52   \hyperlink{structc__hash__node}{c\_hash\_node} *d = h->\hyperlink{structc__hash__table_abfdd282e54441552086f78d30b959d60}{data} = (\hyperlink{structc__hash__node}{c\_hash\_node}*)malloc(sz*\textcolor{keyword}{sizeof}(
      \hyperlink{structc__hash__node}{c\_hash\_node}));
53   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<sz; i++) \{
54     d[i].\hyperlink{structc__hash__node_a83dedd9d9f8b425832404116b456b46d}{key} = 0;
55     d[i].\hyperlink{structc__hash__node_af5199f281a298c18ee13e8fc8a86359e}{mark} = 0;
56     d[i].\hyperlink{structc__hash__node_a3b00ec567a576f3677911f8b8e421de0}{func} = 0;
57   \}
58 
59   \hyperlink{stack__profiler_8cpp_acaf4dd8f3a0755b44949a87760cd1102}{c\_hash\_the\_hash\_table} = h;
60 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{stack__profiler_8cpp_ad1c2d92ab2c29021521d36cf4c97e488_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{stack__profiler_8cpp_ab5ce10a091e20ffd33bfd0bc9982f6c4}\label{stack__profiler_8cpp_ab5ce10a091e20ffd33bfd0bc9982f6c4}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+set\+\_\+thread\+\_\+id@{c\+\_\+hash\+\_\+set\+\_\+thread\+\_\+id}}
\index{c\+\_\+hash\+\_\+set\+\_\+thread\+\_\+id@{c\+\_\+hash\+\_\+set\+\_\+thread\+\_\+id}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+set\+\_\+thread\+\_\+id()}{c\_hash\_set\_thread\_id()}}
{\footnotesize\ttfamily void c\+\_\+hash\+\_\+set\+\_\+thread\+\_\+id (\begin{DoxyParamCaption}\item[{int}]{id }\end{DoxyParamCaption})}



Definition at line 33 of file stack\+\_\+profiler.\+cpp.


\begin{DoxyCode}
33                                   \{
34   \hyperlink{stack__profiler_8cpp_a92d77137d4b87923f488746604d72f94}{c\_hash\_thread\_id} = id;
35 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{stack__profiler_8cpp_a9e4c390c04f233e99f7577a1c63be028}\label{stack__profiler_8cpp_a9e4c390c04f233e99f7577a1c63be028}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+collisions@{c\+\_\+hash\+\_\+collisions}}
\index{c\+\_\+hash\+\_\+collisions@{c\+\_\+hash\+\_\+collisions}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+collisions}{c\_hash\_collisions}}
{\footnotesize\ttfamily long c\+\_\+hash\+\_\+collisions = 0}



Definition at line 31 of file stack\+\_\+profiler.\+cpp.

\mbox{\Hypertarget{stack__profiler_8cpp_a6e154cbf670e1744cf46337adddfb782}\label{stack__profiler_8cpp_a6e154cbf670e1744cf46337adddfb782}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+depth@{c\+\_\+hash\+\_\+depth}}
\index{c\+\_\+hash\+\_\+depth@{c\+\_\+hash\+\_\+depth}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+depth}{c\_hash\_depth}}
{\footnotesize\ttfamily short c\+\_\+hash\+\_\+depth = 0}



Definition at line 28 of file stack\+\_\+profiler.\+cpp.

\mbox{\Hypertarget{stack__profiler_8cpp_a6cc00bff1b0fcee1e92c726aea92c818}\label{stack__profiler_8cpp_a6cc00bff1b0fcee1e92c726aea92c818}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace@{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace}}
\index{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace@{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace}{c\_hash\_fp\_full\_stack\_trace}}
{\footnotesize\ttfamily F\+I\+LE$\ast$ c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace = N\+U\+LL}

This module contains pure C variables and functions that are used in conjunction with \hyperlink{cyg__profile_8hpp_a6a92627690a70d1ac4cbe5f5fae5c196}{\+\_\+\+\_\+cyg\+\_\+profile\+\_\+func\+\_\+enter()} and \hyperlink{cyg__profile_8hpp_a42601a54843c953a90ace14cd551cde8}{\+\_\+\+\_\+cyg\+\_\+profile\+\_\+func\+\_\+exit()} to profile the stack at runtime. Some functions are inlined below; others are defined in \hyperlink{stack__profiler_8cpp}{src/utils/stack\+\_\+profiler.\+cpp} 

Definition at line 21 of file stack\+\_\+profiler.\+cpp.

\mbox{\Hypertarget{stack__profiler_8cpp_a434aed2bad9781985a12de882aa0ec84}\label{stack__profiler_8cpp_a434aed2bad9781985a12de882aa0ec84}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace\+\_\+metadata@{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace\+\_\+metadata}}
\index{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace\+\_\+metadata@{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace\+\_\+metadata}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace\+\_\+metadata}{c\_hash\_fp\_full\_stack\_trace\_metadata}}
{\footnotesize\ttfamily F\+I\+LE$\ast$ c\+\_\+hash\+\_\+fp\+\_\+full\+\_\+stack\+\_\+trace\+\_\+metadata = N\+U\+LL}



Definition at line 22 of file stack\+\_\+profiler.\+cpp.

\mbox{\Hypertarget{stack__profiler_8cpp_ae5255f380b4dacdd914710cbe8181ee2}\label{stack__profiler_8cpp_ae5255f380b4dacdd914710cbe8181ee2}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+func\+\_\+id@{c\+\_\+hash\+\_\+func\+\_\+id}}
\index{c\+\_\+hash\+\_\+func\+\_\+id@{c\+\_\+hash\+\_\+func\+\_\+id}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+func\+\_\+id}{c\_hash\_func\_id}}
{\footnotesize\ttfamily short c\+\_\+hash\+\_\+func\+\_\+id = 0}



Definition at line 25 of file stack\+\_\+profiler.\+cpp.

\mbox{\Hypertarget{stack__profiler_8cpp_a5c0c7f1634059c3321a07d97508e59e3}\label{stack__profiler_8cpp_a5c0c7f1634059c3321a07d97508e59e3}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+info@{c\+\_\+hash\+\_\+info}}
\index{c\+\_\+hash\+\_\+info@{c\+\_\+hash\+\_\+info}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+info}{c\_hash\_info}}
{\footnotesize\ttfamily Dl\+\_\+info c\+\_\+hash\+\_\+info}



Definition at line 27 of file stack\+\_\+profiler.\+cpp.

\mbox{\Hypertarget{stack__profiler_8cpp_a60ca1ac997785ebd8547c022d07fe4b5}\label{stack__profiler_8cpp_a60ca1ac997785ebd8547c022d07fe4b5}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+lookups@{c\+\_\+hash\+\_\+lookups}}
\index{c\+\_\+hash\+\_\+lookups@{c\+\_\+hash\+\_\+lookups}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+lookups}{c\_hash\_lookups}}
{\footnotesize\ttfamily long c\+\_\+hash\+\_\+lookups = 0}



Definition at line 30 of file stack\+\_\+profiler.\+cpp.

\mbox{\Hypertarget{stack__profiler_8cpp_a193e8df9f6b1bc5794e9aa25f82e6a5f}\label{stack__profiler_8cpp_a193e8df9f6b1bc5794e9aa25f82e6a5f}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+profiling\+\_\+is\+\_\+turned\+\_\+on@{c\+\_\+hash\+\_\+profiling\+\_\+is\+\_\+turned\+\_\+on}}
\index{c\+\_\+hash\+\_\+profiling\+\_\+is\+\_\+turned\+\_\+on@{c\+\_\+hash\+\_\+profiling\+\_\+is\+\_\+turned\+\_\+on}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+profiling\+\_\+is\+\_\+turned\+\_\+on}{c\_hash\_profiling\_is\_turned\_on}}
{\footnotesize\ttfamily int c\+\_\+hash\+\_\+profiling\+\_\+is\+\_\+turned\+\_\+on = 0}



Definition at line 23 of file stack\+\_\+profiler.\+cpp.

\mbox{\Hypertarget{stack__profiler_8cpp_acaf4dd8f3a0755b44949a87760cd1102}\label{stack__profiler_8cpp_acaf4dd8f3a0755b44949a87760cd1102}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+the\+\_\+hash\+\_\+table@{c\+\_\+hash\+\_\+the\+\_\+hash\+\_\+table}}
\index{c\+\_\+hash\+\_\+the\+\_\+hash\+\_\+table@{c\+\_\+hash\+\_\+the\+\_\+hash\+\_\+table}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+the\+\_\+hash\+\_\+table}{c\_hash\_the\_hash\_table}}
{\footnotesize\ttfamily \hyperlink{structc__hash__table}{c\+\_\+hash\+\_\+table}$\ast$ c\+\_\+hash\+\_\+the\+\_\+hash\+\_\+table = N\+U\+LL}

following are pure C functions for creating a hash table, and definitions for variables used in the \textquotesingle{}extern \char`\"{}\+C\char`\"{}\textquotesingle{} inline functions in \hyperlink{base_8hpp}{lbann/base.\+hpp}

following that are the stack\+\_\+profiler class definitions; the stack\+\_\+profiler is a c++ class in the lbann namespace 

Definition at line 20 of file stack\+\_\+profiler.\+cpp.

\mbox{\Hypertarget{stack__profiler_8cpp_a92d77137d4b87923f488746604d72f94}\label{stack__profiler_8cpp_a92d77137d4b87923f488746604d72f94}} 
\index{stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}!c\+\_\+hash\+\_\+thread\+\_\+id@{c\+\_\+hash\+\_\+thread\+\_\+id}}
\index{c\+\_\+hash\+\_\+thread\+\_\+id@{c\+\_\+hash\+\_\+thread\+\_\+id}!stack\+\_\+profiler.\+cpp@{stack\+\_\+profiler.\+cpp}}
\subsubsection{\texorpdfstring{c\+\_\+hash\+\_\+thread\+\_\+id}{c\_hash\_thread\_id}}
{\footnotesize\ttfamily int c\+\_\+hash\+\_\+thread\+\_\+id}



Definition at line 24 of file stack\+\_\+profiler.\+cpp.

