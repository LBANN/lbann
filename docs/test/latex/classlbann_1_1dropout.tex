\hypertarget{classlbann_1_1dropout}{}\section{lbann\+:\+:dropout$<$ T\+\_\+layout $>$ Class Template Reference}
\label{classlbann_1_1dropout}\index{lbann\+::dropout$<$ T\+\_\+layout $>$@{lbann\+::dropout$<$ T\+\_\+layout $>$}}


{\ttfamily \#include $<$dropout.\+hpp$>$}



Inheritance diagram for lbann\+:\+:dropout$<$ T\+\_\+layout $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=215pt]{classlbann_1_1dropout__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:dropout$<$ T\+\_\+layout $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1dropout_a301be902f285c5cf1d0cd743119a09d8}{dropout} (\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm}, \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type} keep\+\_\+prob=\hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type}(0.\+5), \hyperlink{classlbann_1_1cudnn_1_1cudnn__manager}{cudnn\+::cudnn\+\_\+manager} $\ast$cudnn=nullptr)
\item 
\hyperlink{classlbann_1_1dropout_ab2057d4abf48b96f8f6e9f64bdb0fc7e}{dropout} (const \hyperlink{classlbann_1_1dropout}{dropout} \&other)
\item 
\hyperlink{classlbann_1_1dropout}{dropout} \& \hyperlink{classlbann_1_1dropout_a0243b0bc3c2a4239a5ba6d64e6566a15}{operator=} (const \hyperlink{classlbann_1_1dropout}{dropout} \&other)
\item 
\hyperlink{classlbann_1_1dropout_a4b18d1195a176f4dd653767bfc0a9f6b}{$\sim$dropout} () override
\item 
\hyperlink{classlbann_1_1dropout}{dropout} $\ast$ \hyperlink{classlbann_1_1dropout_a0e6e50b50f8c2620315f3257bbab41b3}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1dropout_a4d07cd79c7a4ab29db233a361aede358}{get\+\_\+type} () const override
\item 
std\+::string \hyperlink{classlbann_1_1dropout_a7b53ee7d758337fe40788a567b5d092c}{get\+\_\+description} () const override
\item 
void \hyperlink{classlbann_1_1dropout_abf399d8463721d322aedbb76d60534c6}{setup\+\_\+matrices} (const \hyperlink{base_8hpp_a9951bb1719d534e0401b1f06cad19eab}{El\+::\+Grid} \&grid) override
\item 
\hyperlink{base_8hpp_a786677cbfb3f5677b4d84f3056eb08db}{data\+\_\+layout} \hyperlink{classlbann_1_1dropout_aefeb16614f9bf4b9e643e1d5b48ec62d}{get\+\_\+data\+\_\+layout} () const override
\item 
void \hyperlink{classlbann_1_1dropout_abaa3d0c6d99200b186d0a55201f77b6a}{setup\+\_\+gpu} () override
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classlbann_1_1dropout_a9ed94f278835b6c9e8185de01705e53a}{fp\+\_\+compute} () override
\item 
void \hyperlink{classlbann_1_1dropout_a053e3f392a6a90b3bcc07f62f3818bce}{bp\+\_\+compute} () override
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classlbann_1_1dropout_a478368964f515f5456324b6504a5358f}{fp\+\_\+setup\+\_\+data} (int mini\+\_\+batch\+\_\+size) override
\item 
void \hyperlink{classlbann_1_1dropout_a358c502d8e7eeb1fed8b5df468793b09}{fp\+\_\+compute\+\_\+cpu} ()
\item 
void \hyperlink{classlbann_1_1dropout_aca0160de0c3db5c29a0c4c6bddd0cf4f}{bp\+\_\+compute\+\_\+cpu} ()
\item 
void \hyperlink{classlbann_1_1dropout_ad71de4282d2164171bbcad158a7bf1e7}{fp\+\_\+compute\+\_\+gpu} ()
\item 
void \hyperlink{classlbann_1_1dropout_aeafadecbcfc81734d0c1850b4004dcc3}{bp\+\_\+compute\+\_\+gpu} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type} \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\+\_\+keep\+\_\+prob}
\item 
std\+::unique\+\_\+ptr$<$ \hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat} $>$ \hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\+\_\+mask}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\subsubsection*{template$<$data\+\_\+layout T\+\_\+layout$>$\newline
class lbann\+::dropout$<$ T\+\_\+layout $>$}

Dropout layer\+: Probabilistically drop layer outputs. See\+: Srivastava, Nitish, et al. \char`\"{}\+Dropout\+: a simple way to prevent
  neural networks from overfitting.\char`\"{} Journal of Machine Learning Research 15.\+1 (2014). The weights are multiplied by 1/(keep probability) at training time, as discussed in section 10 of the paper. Keep probabilities of 0.\+5 for fully-\/connected layers and 0.\+8 for input layers are good starting points. 

Definition at line 45 of file dropout.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1dropout_a301be902f285c5cf1d0cd743119a09d8}\label{classlbann_1_1dropout_a301be902f285c5cf1d0cd743119a09d8}} 
\index{lbann\+::dropout@{lbann\+::dropout}!dropout@{dropout}}
\index{dropout@{dropout}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{dropout()}{dropout()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
\hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::\hyperlink{classlbann_1_1dropout}{dropout} (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$}]{comm,  }\item[{\hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type}}]{keep\+\_\+prob = {\ttfamily \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type}(0.5)},  }\item[{\hyperlink{classlbann_1_1cudnn_1_1cudnn__manager}{cudnn\+::cudnn\+\_\+manager} $\ast$}]{cudnn = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyParams}{Parameters}
{\em keep\+\_\+prob} & dropout probability. Keep units with probabiliy keep\+\_\+prob. \\
\hline
\end{DoxyParams}


Definition at line 50 of file dropout.\+hpp.


\begin{DoxyCode}
53     : \hyperlink{classlbann_1_1regularizer__layer_a2ebf3877b905b479a0250b74cf8f68b3}{regularizer\_layer}(\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm}),
54       \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob}(keep\_prob) \{
55 
56 \textcolor{preprocessor}{  #if defined(LBANN\_HAS\_CUDNN) && !defined(LBANN\_SEQUENTIAL\_CONSISTENCY)}
57     \textcolor{comment}{// Initialize GPU memory if using GPU}
59 \textcolor{comment}{}    \textcolor{keywordflow}{if} (cudnn != \textcolor{keyword}{nullptr} && T\_layout == \hyperlink{base_8hpp_a786677cbfb3f5677b4d84f3056eb08dba37d2a3465f7cbf4ab60f4e79944d0638}{data\_layout::DATA\_PARALLEL}) \{
60       this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus} = \textcolor{keyword}{true};
61       this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn} = cudnn;
62     \}
63 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
64     
65   \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{classlbann_1_1dropout_a301be902f285c5cf1d0cd743119a09d8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_ab2057d4abf48b96f8f6e9f64bdb0fc7e}\label{classlbann_1_1dropout_ab2057d4abf48b96f8f6e9f64bdb0fc7e}} 
\index{lbann\+::dropout@{lbann\+::dropout}!dropout@{dropout}}
\index{dropout@{dropout}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{dropout()}{dropout()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
\hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::\hyperlink{classlbann_1_1dropout}{dropout} (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1dropout}{dropout}$<$ T\+\_\+layout $>$ \&}]{other }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 67 of file dropout.\+hpp.


\begin{DoxyCode}
67                                 :
68     \hyperlink{classlbann_1_1regularizer__layer_a2ebf3877b905b479a0250b74cf8f68b3}{regularizer\_layer}(other),
69     \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob}(other.m\_keep\_prob),
70     \hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask}(!other.m\_mask? \textcolor{keyword}{nullptr} : other.m\_mask->Copy()) \{
71 \textcolor{preprocessor}{  #ifdef LBANN\_HAS\_CUDNN}
72     m\_states\_d = other.m\_states\_d;
73     m\_reserve\_space\_d = other.m\_reserve\_space\_d;
74     \textcolor{keywordflow}{if} (!other.m\_dropout\_cudnn\_desc.empty()) \{
75       setup\_dropout\_cudnn\_desc();
76     \}
77 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
78   \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1dropout_a4b18d1195a176f4dd653767bfc0a9f6b}\label{classlbann_1_1dropout_a4b18d1195a176f4dd653767bfc0a9f6b}} 
\index{lbann\+::dropout@{lbann\+::dropout}!````~dropout@{$\sim$dropout}}
\index{````~dropout@{$\sim$dropout}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{$\sim$dropout()}{~dropout()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
\hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::$\sim$\hyperlink{classlbann_1_1dropout}{dropout} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}



Definition at line 100 of file dropout.\+hpp.


\begin{DoxyCode}
100                       \{
101 \textcolor{preprocessor}{  #ifdef LBANN\_HAS\_CUDNN}
102     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}&& desc : m\_dropout\_cudnn\_desc) \{
103       CHECK\_CUDNN(cudnnDestroyDropoutDescriptor(desc));
104     \}
105 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
106   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1dropout_a053e3f392a6a90b3bcc07f62f3818bce}\label{classlbann_1_1dropout_a053e3f392a6a90b3bcc07f62f3818bce}} 
\index{lbann\+::dropout@{lbann\+::dropout}!bp\+\_\+compute@{bp\+\_\+compute}}
\index{bp\+\_\+compute@{bp\+\_\+compute}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{bp\+\_\+compute()}{bp\_compute()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
void \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::bp\+\_\+compute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Perform the computation for the backward propagation step. 

Implements \hyperlink{classlbann_1_1Layer_a7442e01f9ee1294df2de811efcf5171e}{lbann\+::\+Layer}.



Definition at line 156 of file dropout.\+hpp.


\begin{DoxyCode}
156                               \{
157     \textcolor{keywordflow}{if} (this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus}) \{
158       \hyperlink{classlbann_1_1dropout_aeafadecbcfc81734d0c1850b4004dcc3}{bp\_compute\_gpu}();
159     \} \textcolor{keywordflow}{else} \{
160       \hyperlink{classlbann_1_1dropout_aca0160de0c3db5c29a0c4c6bddd0cf4f}{bp\_compute\_cpu}();
161     \}
162   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_a053e3f392a6a90b3bcc07f62f3818bce_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_aca0160de0c3db5c29a0c4c6bddd0cf4f}\label{classlbann_1_1dropout_aca0160de0c3db5c29a0c4c6bddd0cf4f}} 
\index{lbann\+::dropout@{lbann\+::dropout}!bp\+\_\+compute\+\_\+cpu@{bp\+\_\+compute\+\_\+cpu}}
\index{bp\+\_\+compute\+\_\+cpu@{bp\+\_\+compute\+\_\+cpu}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{bp\+\_\+compute\+\_\+cpu()}{bp\_compute\_cpu()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
void \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::bp\+\_\+compute\+\_\+cpu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Adjust gradients for dropout in backprop. 

Definition at line 219 of file dropout.\+hpp.


\begin{DoxyCode}
219                         \{
220     \textcolor{keyword}{const} \textcolor{keyword}{auto}& gradient\_wrt\_output = \hyperlink{classlbann_1_1Layer_a7ac4579d3c1671dfaf86e3b618d6938a}{get\_prev\_error\_signals}();
221     \textcolor{keyword}{auto}& gradient\_wrt\_input = \hyperlink{classlbann_1_1Layer_adb561e140e0bb601f3c5a8ee053a71d2}{get\_error\_signals}();
222     \textcolor{keyword}{const} \textcolor{keyword}{auto}& mode = this->\hyperlink{classlbann_1_1Layer_a3d9315e99574166f2f33e37b572021d2}{m\_model}->\hyperlink{classlbann_1_1model_addb40597cf29aa6d31b6a7d09ef48608}{get\_execution\_mode}();
223     \textcolor{keywordflow}{if} (mode != \hyperlink{base_8hpp_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214}{execution\_mode::training} || \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob} < 
      \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{EvalType}(0)) \{
224       El::Axpy(DataType(1), gradient\_wrt\_output, gradient\_wrt\_input);
225     \} \textcolor{keywordflow}{else} \{
226       El::Hadamard(gradient\_wrt\_output, *\hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask}, *\hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask});
227       El::Axpy(DataType(1), *\hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask}, gradient\_wrt\_input);
228     \}
229   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_aca0160de0c3db5c29a0c4c6bddd0cf4f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{classlbann_1_1dropout_aca0160de0c3db5c29a0c4c6bddd0cf4f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_aeafadecbcfc81734d0c1850b4004dcc3}\label{classlbann_1_1dropout_aeafadecbcfc81734d0c1850b4004dcc3}} 
\index{lbann\+::dropout@{lbann\+::dropout}!bp\+\_\+compute\+\_\+gpu@{bp\+\_\+compute\+\_\+gpu}}
\index{bp\+\_\+compute\+\_\+gpu@{bp\+\_\+compute\+\_\+gpu}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{bp\+\_\+compute\+\_\+gpu()}{bp\_compute\_gpu()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
void \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::bp\+\_\+compute\+\_\+gpu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 264 of file dropout.\+hpp.


\begin{DoxyCode}
264                         \{
265 \textcolor{preprocessor}{  #ifndef LBANN\_HAS\_CUDNN}
266     \hyperlink{base_8hpp_a80b1d707117e968a6951b7222e4b2b87}{LBANN\_ERROR}(\textcolor{stringliteral}{"cuDNN not detected"});
267 \textcolor{preprocessor}{  #else }
268     \textcolor{keyword}{const} \textcolor{keyword}{auto}& gradient\_wrt\_output\_d = this->m\_prev\_error\_signals\_d[0];
269     \textcolor{keyword}{auto}& gradient\_wrt\_input\_d = this->m\_error\_signals\_d[0];
270     \textcolor{keyword}{const} \textcolor{keyword}{auto}& num\_gpus = this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_num\_gpus();
271 
272     \textcolor{comment}{// Add to error signal if dropout is disabled}
273     \textcolor{keyword}{const} \textcolor{keyword}{auto}& mode = this->\hyperlink{classlbann_1_1Layer_a3d9315e99574166f2f33e37b572021d2}{m\_model}->\hyperlink{classlbann_1_1model_addb40597cf29aa6d31b6a7d09ef48608}{get\_execution\_mode}();
274     \textcolor{keywordflow}{if} (mode != \hyperlink{base_8hpp_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214}{execution\_mode::training} || \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob} < 
      \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{EvalType}(0)) \{
275       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<num\_gpus; ++i) \{
276         CHECK\_CUDA(cudaSetDevice(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_gpu(i)));
277         cublas::geam(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_cublas\_handle(i),
278                      CUBLAS\_OP\_N, CUBLAS\_OP\_N,
279                      gradient\_wrt\_input\_d.get\_height(),
280                      this->m\_mini\_batch\_size\_per\_gpu,
281                      DataType(1),
282                      gradient\_wrt\_output\_d.get\_locked\_data(i),
283                      gradient\_wrt\_output\_d.get\_leading\_dim(),
284                      DataType(1),
285                      gradient\_wrt\_input\_d.get\_locked\_data(i),
286                      gradient\_wrt\_input\_d.get\_leading\_dim(),
287                      gradient\_wrt\_input\_d.get\_data(i),
288                      gradient\_wrt\_input\_d.get\_leading\_dim());
289       \}
290       \textcolor{keywordflow}{return};
291     \}
292 
293     \textcolor{comment}{// Apply dropout backprop on each GPU}
295 \textcolor{comment}{}    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < num\_gpus; ++i) \{
296       CHECK\_CUDA(cudaSetDevice(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_gpu(i)));
297       CHECK\_CUDNN(cudnnSetStream(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_handle(i),
298                                  this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_stream(i)));
299       CHECK\_CUDNN(cudnnDropoutBackward(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_handle(i),
300                                        m\_dropout\_cudnn\_desc[i],
301                                        this->m\_prev\_error\_signals\_cudnn\_desc,
302                                        gradient\_wrt\_output\_d.get\_locked\_data(i),
303                                        this->m\_error\_signals\_cudnn\_desc,
304                                        gradient\_wrt\_input\_d.get\_data(i),
305                                        m\_reserve\_space\_d.get\_data(i),
306                                        m\_reserve\_space\_d.get\_height() * \textcolor{keyword}{sizeof}(DataType)));
307     \}
308 
309 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
310   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_aeafadecbcfc81734d0c1850b4004dcc3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{classlbann_1_1dropout_aeafadecbcfc81734d0c1850b4004dcc3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_a0e6e50b50f8c2620315f3257bbab41b3}\label{classlbann_1_1dropout_a0e6e50b50f8c2620315f3257bbab41b3}} 
\index{lbann\+::dropout@{lbann\+::dropout}!copy@{copy}}
\index{copy@{copy}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
\hyperlink{classlbann_1_1dropout}{dropout}$\ast$ \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Copy function. This function dynamically allocates memory for a layer instance and instantiates a copy. The caller is responsible for deallocating the instance. 

Implements \hyperlink{classlbann_1_1Layer_af420f22bbac801c85483ade84588a23f}{lbann\+::\+Layer}.



Definition at line 108 of file dropout.\+hpp.


\begin{DoxyCode}
108 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1dropout_a301be902f285c5cf1d0cd743119a09d8}{dropout}(*\textcolor{keyword}{this}); \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{classlbann_1_1dropout_a0e6e50b50f8c2620315f3257bbab41b3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_a9ed94f278835b6c9e8185de01705e53a}\label{classlbann_1_1dropout_a9ed94f278835b6c9e8185de01705e53a}} 
\index{lbann\+::dropout@{lbann\+::dropout}!fp\+\_\+compute@{fp\+\_\+compute}}
\index{fp\+\_\+compute@{fp\+\_\+compute}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{fp\+\_\+compute()}{fp\_compute()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
void \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::fp\+\_\+compute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Perform the computation for the forward propagation step. 

Implements \hyperlink{classlbann_1_1Layer_a523319dd1bd87a0612afa1912bb5aad7}{lbann\+::\+Layer}.



Definition at line 148 of file dropout.\+hpp.


\begin{DoxyCode}
148                               \{
149     \textcolor{keywordflow}{if} (this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus}) \{
150       \hyperlink{classlbann_1_1dropout_ad71de4282d2164171bbcad158a7bf1e7}{fp\_compute\_gpu}();
151     \} \textcolor{keywordflow}{else} \{
152       \hyperlink{classlbann_1_1dropout_a358c502d8e7eeb1fed8b5df468793b09}{fp\_compute\_cpu}();
153     \}
154   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_a9ed94f278835b6c9e8185de01705e53a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_a358c502d8e7eeb1fed8b5df468793b09}\label{classlbann_1_1dropout_a358c502d8e7eeb1fed8b5df468793b09}} 
\index{lbann\+::dropout@{lbann\+::dropout}!fp\+\_\+compute\+\_\+cpu@{fp\+\_\+compute\+\_\+cpu}}
\index{fp\+\_\+compute\+\_\+cpu@{fp\+\_\+compute\+\_\+cpu}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{fp\+\_\+compute\+\_\+cpu()}{fp\_compute\_cpu()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
void \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::fp\+\_\+compute\+\_\+cpu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 182 of file dropout.\+hpp.


\begin{DoxyCode}
182                         \{
183 
184     \textcolor{comment}{// Matrices}
185     \textcolor{keyword}{const} \textcolor{keyword}{auto}& input = \hyperlink{classlbann_1_1Layer_a45853df73a2e72bfaa774665a0f37ed7}{get\_prev\_activations}();
186     \textcolor{keyword}{auto}& output = \hyperlink{classlbann_1_1Layer_a1134b1a4385af199d7272c5aa827fa99}{get\_activations}();
187 
188     \textcolor{comment}{// Do nothing if dropout is disabled}
189     \textcolor{keyword}{const} \textcolor{keyword}{auto}& mode = this->\hyperlink{classlbann_1_1Layer_a3d9315e99574166f2f33e37b572021d2}{m\_model}->\hyperlink{classlbann_1_1model_addb40597cf29aa6d31b6a7d09ef48608}{get\_execution\_mode}();
190     \textcolor{keywordflow}{if} (mode != \hyperlink{base_8hpp_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214}{execution\_mode::training} || \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob} < 
      \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{EvalType}(0)) \{
191       El::LockedView(output, input);
192       \textcolor{keywordflow}{return};
193     \}
194 
195     \textcolor{comment}{// Construct mask matrix}
196     \textcolor{keyword}{const} DataType scale = 1 / \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob};
197     \textcolor{keyword}{const} \textcolor{keyword}{auto}& height = input.Height();
198     \textcolor{keyword}{const} \textcolor{keyword}{auto}& width = input.Width();
199     \hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask}->Resize(height, width);
200 \textcolor{preprocessor}{#ifdef LBANN\_SEQUENTIAL\_CONSISTENCY}
201     \hyperlink{namespacelbann_ad1e3fe84cfa5257be476de3be805064d}{bernoulli\_fill\_procdet}(*\hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask}, height, width, DataType(
      \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob}));
202     *\hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask} *= scale;
203 \textcolor{preprocessor}{#else}
204     El::EntrywiseMap(*\hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask},
205                      (std::function<DataType(\textcolor{keyword}{const} DataType&)>)
206                      ([\textcolor{keyword}{this},scale](\textcolor{keyword}{const} DataType& z)->DataType \{
207                        \textcolor{keyword}{auto}& gen = \hyperlink{namespacelbann_ae6ce9c2fdec6f81803f6b1a6555c31c5}{get\_fast\_generator}();
208                        std::bernoulli\_distribution dist(\hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob});
209                        \textcolor{keywordflow}{return} dist(gen) ? scale : DataType(0);
210                      \}));
211 \textcolor{preprocessor}{#endif // LBANN\_SEQUENTIAL\_CONSISTENCY}
212 
213     \textcolor{comment}{// Apply mask matrix to get activations}
214     El::Hadamard(input, *\hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask}, output);
215 
216   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_a358c502d8e7eeb1fed8b5df468793b09_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{classlbann_1_1dropout_a358c502d8e7eeb1fed8b5df468793b09_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_ad71de4282d2164171bbcad158a7bf1e7}\label{classlbann_1_1dropout_ad71de4282d2164171bbcad158a7bf1e7}} 
\index{lbann\+::dropout@{lbann\+::dropout}!fp\+\_\+compute\+\_\+gpu@{fp\+\_\+compute\+\_\+gpu}}
\index{fp\+\_\+compute\+\_\+gpu@{fp\+\_\+compute\+\_\+gpu}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{fp\+\_\+compute\+\_\+gpu()}{fp\_compute\_gpu()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
void \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::fp\+\_\+compute\+\_\+gpu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 231 of file dropout.\+hpp.


\begin{DoxyCode}
231                         \{
232 \textcolor{preprocessor}{  #ifndef LBANN\_HAS\_CUDNN}
233     \hyperlink{base_8hpp_a80b1d707117e968a6951b7222e4b2b87}{LBANN\_ERROR}(\textcolor{stringliteral}{"cuDNN not detected"});
234 \textcolor{preprocessor}{  #else }
235     \textcolor{keyword}{const} \textcolor{keyword}{auto}& input\_d = this->m\_prev\_activations\_d[0];
236     \textcolor{keyword}{auto}& output\_d = this->m\_activations\_d[0];
237     \textcolor{keyword}{const} \textcolor{keyword}{auto}& num\_gpus = this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_num\_gpus();
238 
239     \textcolor{comment}{// Do nothing if dropout is disabled}
240     \textcolor{keyword}{const} \textcolor{keyword}{auto}& mode = this->\hyperlink{classlbann_1_1Layer_a3d9315e99574166f2f33e37b572021d2}{m\_model}->\hyperlink{classlbann_1_1model_addb40597cf29aa6d31b6a7d09ef48608}{get\_execution\_mode}();
241     \textcolor{keywordflow}{if} (mode != \hyperlink{base_8hpp_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214}{execution\_mode::training} || \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob} < 
      \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{EvalType}(0)) \{
242       output\_d.locked\_view(input\_d);
243       \textcolor{keywordflow}{return};
244     \}
245 
246     \textcolor{comment}{// Apply dropout on each GPU}
247     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < num\_gpus; ++i) \{
248       CHECK\_CUDA(cudaSetDevice(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_gpu(i)));
249       CHECK\_CUDNN(cudnnSetStream(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_handle(i),
250                                  this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_stream(i)));
251       CHECK\_CUDNN(cudnnDropoutForward(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_handle(i),
252                                       m\_dropout\_cudnn\_desc[i],
253                                       this->m\_prev\_activations\_cudnn\_desc,
254                                       input\_d.get\_locked\_data(i),
255                                       this->m\_activations\_cudnn\_desc,
256                                       output\_d.get\_data(i),
257                                       m\_reserve\_space\_d.get\_data(i),
258                                       m\_reserve\_space\_d.get\_height() * \textcolor{keyword}{sizeof}(DataType)));
259     \}
260 
261 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
262   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_ad71de4282d2164171bbcad158a7bf1e7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{classlbann_1_1dropout_ad71de4282d2164171bbcad158a7bf1e7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_a478368964f515f5456324b6504a5358f}\label{classlbann_1_1dropout_a478368964f515f5456324b6504a5358f}} 
\index{lbann\+::dropout@{lbann\+::dropout}!fp\+\_\+setup\+\_\+data@{fp\+\_\+setup\+\_\+data}}
\index{fp\+\_\+setup\+\_\+data@{fp\+\_\+setup\+\_\+data}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{fp\+\_\+setup\+\_\+data()}{fp\_setup\_data()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
void \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::fp\+\_\+setup\+\_\+data (\begin{DoxyParamCaption}\item[{int}]{mini\+\_\+batch\+\_\+size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}}

Setup data for forward propagation. Base method gets previous activations from parent layers and resizes activations for the current mini-\/batch size. 

Reimplemented from \hyperlink{classlbann_1_1Layer_af311d901a5f71e4c749454647e9fd9c7}{lbann\+::\+Layer}.



Definition at line 166 of file dropout.\+hpp.


\begin{DoxyCode}
166                                                    \{
167 \textcolor{preprocessor}{  #ifdef LBANN\_HAS\_CUDNN}
168     \textcolor{keywordflow}{if} (this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus}) \{
169       \textcolor{comment}{// Make sure GPU output is not a view during training}
170       \textcolor{keyword}{const} \textcolor{keyword}{auto}& mode = this->\hyperlink{classlbann_1_1Layer_a3d9315e99574166f2f33e37b572021d2}{m\_model}->\hyperlink{classlbann_1_1model_addb40597cf29aa6d31b6a7d09ef48608}{get\_execution\_mode}();
171       \textcolor{keyword}{auto}& output\_d = m\_activations\_d[0];
172       \textcolor{keywordflow}{if} (mode == \hyperlink{base_8hpp_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214}{execution\_mode::training} && output\_d.is\_view()) \{
173         \textcolor{keyword}{const} \textcolor{keyword}{auto}& input\_d = m\_prev\_activations\_d[0];
174         output\_d.clear();
175         output\_d.resize(input\_d.get\_height(), input\_d.get\_width\_per\_gpu());
176       \}
177     \}
178 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
179     \hyperlink{classlbann_1_1Layer_af311d901a5f71e4c749454647e9fd9c7}{regularizer\_layer::fp\_setup\_data}(mini\_batch\_size);
180   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_a478368964f515f5456324b6504a5358f_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_aefeb16614f9bf4b9e643e1d5b48ec62d}\label{classlbann_1_1dropout_aefeb16614f9bf4b9e643e1d5b48ec62d}} 
\index{lbann\+::dropout@{lbann\+::dropout}!get\+\_\+data\+\_\+layout@{get\+\_\+data\+\_\+layout}}
\index{get\+\_\+data\+\_\+layout@{get\+\_\+data\+\_\+layout}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{get\+\_\+data\+\_\+layout()}{get\_data\_layout()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
\hyperlink{base_8hpp_a786677cbfb3f5677b4d84f3056eb08db}{data\+\_\+layout} \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::get\+\_\+data\+\_\+layout (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get data layout of the data tensors. We assume that the data layouts of the previous activations, activations, previous error signals, and error signals are the same. Each concrete layer that is templated on its data layout should override this function to return its template parameter. 

Implements \hyperlink{classlbann_1_1Layer_a5dfb66e81fc085997402a5e2241316bd}{lbann\+::\+Layer}.



Definition at line 123 of file dropout.\+hpp.


\begin{DoxyCode}
123 \{ \textcolor{keywordflow}{return} T\_layout; \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=315pt]{classlbann_1_1dropout_aefeb16614f9bf4b9e643e1d5b48ec62d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_a7b53ee7d758337fe40788a567b5d092c}\label{classlbann_1_1dropout_a7b53ee7d758337fe40788a567b5d092c}} 
\index{lbann\+::dropout@{lbann\+::dropout}!get\+\_\+description@{get\+\_\+description}}
\index{get\+\_\+description@{get\+\_\+description}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{get\+\_\+description()}{get\_description()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
std\+::string \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::get\+\_\+description (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get a human-\/readable description of the layer parameters. 

Reimplemented from \hyperlink{classlbann_1_1Layer_acc0803d3428914ca1eb5988c4309174a}{lbann\+::\+Layer}.



Definition at line 112 of file dropout.\+hpp.


\begin{DoxyCode}
112                                              \{
113     \textcolor{keywordflow}{return} \textcolor{stringliteral}{" dropout keep\_prob: "} + std::to\_string(\hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob}) 
114            + \textcolor{stringliteral}{" dataLayout: "} + \hyperlink{classlbann_1_1Layer_ae3f4a5602df821f4221614b1e3782dc1}{get\_data\_layout\_string}(
      \hyperlink{classlbann_1_1dropout_aefeb16614f9bf4b9e643e1d5b48ec62d}{get\_data\_layout}());
115   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=331pt]{classlbann_1_1dropout_a7b53ee7d758337fe40788a567b5d092c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_a4d07cd79c7a4ab29db233a361aede358}\label{classlbann_1_1dropout_a4d07cd79c7a4ab29db233a361aede358}} 
\index{lbann\+::dropout@{lbann\+::dropout}!get\+\_\+type@{get\+\_\+type}}
\index{get\+\_\+type@{get\+\_\+type}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{get\+\_\+type()}{get\_type()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
std\+::string \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::get\+\_\+type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get the layer type\textquotesingle{}s name. A layer type name should be brief, human-\/readable description of the layer\textquotesingle{}s mathematical operation. 

Implements \hyperlink{classlbann_1_1Layer_a0fa0ea9160b490c151c0a17fde4f7239}{lbann\+::\+Layer}.



Definition at line 110 of file dropout.\+hpp.


\begin{DoxyCode}
110 \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"dropout"}; \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1dropout_a0243b0bc3c2a4239a5ba6d64e6566a15}\label{classlbann_1_1dropout_a0243b0bc3c2a4239a5ba6d64e6566a15}} 
\index{lbann\+::dropout@{lbann\+::dropout}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
\hyperlink{classlbann_1_1dropout}{dropout}\& \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1dropout}{dropout}$<$ T\+\_\+layout $>$ \&}]{other }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 80 of file dropout.\+hpp.


\begin{DoxyCode}
80                                            \{
81     \hyperlink{classlbann_1_1Layer_a00d8acde68fda2f38c4a39ef8c89234a}{regularizer\_layer::operator=}(other);
82     \hyperlink{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}{m\_keep\_prob} = other.m\_keep\_prob;
83     \textcolor{keywordflow}{if} (!!other.m\_mask) \{
84       \hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask} = std::unique\_ptr<AbsDistMat>(other.m\_mask->Copy());
85     \}
86 \textcolor{preprocessor}{  #ifdef LBANN\_HAS\_CUDNN}
87     m\_states\_d = other.m\_states\_d;
88     m\_reserve\_space\_d = other.m\_reserve\_space\_d;
89     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}&& desc : m\_dropout\_cudnn\_desc) \{
90       CHECK\_CUDNN(cudnnDestroyDropoutDescriptor(desc));
91     \}
92     m\_dropout\_cudnn\_desc.clear();
93     \textcolor{keywordflow}{if} (!other.m\_dropout\_cudnn\_desc.empty()) \{
94       setup\_dropout\_cudnn\_desc();
95     \}
96 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
97     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
98   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_a0243b0bc3c2a4239a5ba6d64e6566a15_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_abaa3d0c6d99200b186d0a55201f77b6a}\label{classlbann_1_1dropout_abaa3d0c6d99200b186d0a55201f77b6a}} 
\index{lbann\+::dropout@{lbann\+::dropout}!setup\+\_\+gpu@{setup\+\_\+gpu}}
\index{setup\+\_\+gpu@{setup\+\_\+gpu}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{setup\+\_\+gpu()}{setup\_gpu()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
void \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::setup\+\_\+gpu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Setup G\+PU objects. Called by the setup function if G\+P\+Us are enabled. The base method initializes G\+PU matrices for the previous activations, activations, previous error signals, and error signals. It also initializes cu\+D\+NN tensor descriptors. 

Reimplemented from \hyperlink{classlbann_1_1Layer_a36aa22ef90ce4de65abe729d38490863}{lbann\+::\+Layer}.



Definition at line 125 of file dropout.\+hpp.


\begin{DoxyCode}
125                             \{
126     \hyperlink{classlbann_1_1Layer_a36aa22ef90ce4de65abe729d38490863}{regularizer\_layer::setup\_gpu}();
127 \textcolor{preprocessor}{  #ifndef LBANN\_HAS\_CUDNN}
128     \hyperlink{base_8hpp_a80b1d707117e968a6951b7222e4b2b87}{LBANN\_ERROR}(\textcolor{stringliteral}{"cuDNN not detected"});
129 \textcolor{preprocessor}{  #else}
130 
131     \textcolor{comment}{// Allocate work spaces}
132     \textcolor{keywordtype}{size\_t} size;
133     CHECK\_CUDNN(cudnnDropoutGetStatesSize(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}->get\_handle(0), &size));
134     size = (size + \textcolor{keyword}{sizeof}(DataType) - 1) / \textcolor{keyword}{sizeof}(DataType);
135     m\_states\_d = cudnn::matrix(\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}, size, 1);
136     CHECK\_CUDNN(cudnnDropoutGetReserveSpaceSize(this->m\_prev\_activations\_cudnn\_desc, &size));
137     size = (size + \textcolor{keyword}{sizeof}(DataType) - 1) / \textcolor{keyword}{sizeof}(DataType);
138     m\_reserve\_space\_d = cudnn::matrix(\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}, size, 1);
139 
140     \textcolor{comment}{// Initialize cuDNN descriptors}
141     setup\_dropout\_cudnn\_desc();
142     
143 \textcolor{preprocessor}{  #endif}
144   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_abaa3d0c6d99200b186d0a55201f77b6a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1dropout_abf399d8463721d322aedbb76d60534c6}\label{classlbann_1_1dropout_abf399d8463721d322aedbb76d60534c6}} 
\index{lbann\+::dropout@{lbann\+::dropout}!setup\+\_\+matrices@{setup\+\_\+matrices}}
\index{setup\+\_\+matrices@{setup\+\_\+matrices}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{setup\+\_\+matrices()}{setup\_matrices()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
void \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::setup\+\_\+matrices (\begin{DoxyParamCaption}\item[{const \hyperlink{base_8hpp_a9951bb1719d534e0401b1f06cad19eab}{El\+::\+Grid} \&}]{grid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Instantiate distributed matrices. If the layer has already been setup, this function should destroy all matrices and reinstantiate them. However, it is not guaranteed that derived classes will obey this behavior. 

Reimplemented from \hyperlink{classlbann_1_1Layer_a57bbe21131dc00ab5cf9ea5e3656808e}{lbann\+::\+Layer}.



Definition at line 117 of file dropout.\+hpp.


\begin{DoxyCode}
117                                                    \{
118     \hyperlink{classlbann_1_1Layer_a57bbe21131dc00ab5cf9ea5e3656808e}{regularizer\_layer::setup\_matrices}(grid);
119     \textcolor{keywordflow}{if} (!this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus}) \{
120       \hyperlink{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}{m\_mask} = std::unique\_ptr<AbsDistMat>(\hyperlink{classlbann_1_1Layer_a1134b1a4385af199d7272c5aa827fa99}{get\_activations}().Copy());
121     \}
122   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1dropout_abf399d8463721d322aedbb76d60534c6_cgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}\label{classlbann_1_1dropout_aa06cbee70f3426b589990889b8ac8872}} 
\index{lbann\+::dropout@{lbann\+::dropout}!m\+\_\+keep\+\_\+prob@{m\+\_\+keep\+\_\+prob}}
\index{m\+\_\+keep\+\_\+prob@{m\+\_\+keep\+\_\+prob}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{m\+\_\+keep\+\_\+prob}{m\_keep\_prob}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
\hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type} \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::m\+\_\+keep\+\_\+prob\hspace{0.3cm}{\ttfamily [private]}}

Probability of keeping each unit. 

Definition at line 335 of file dropout.\+hpp.

\mbox{\Hypertarget{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}\label{classlbann_1_1dropout_ad7d359957d41adcb64e6e3a2d4ad278d}} 
\index{lbann\+::dropout@{lbann\+::dropout}!m\+\_\+mask@{m\+\_\+mask}}
\index{m\+\_\+mask@{m\+\_\+mask}!lbann\+::dropout@{lbann\+::dropout}}
\subsubsection{\texorpdfstring{m\+\_\+mask}{m\_mask}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout$>$ \\
std\+::unique\+\_\+ptr$<$\hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat}$>$ \hyperlink{classlbann_1_1dropout}{lbann\+::dropout}$<$ T\+\_\+layout $>$\+::m\+\_\+mask\hspace{0.3cm}{\ttfamily [private]}}

Current dropout mask (a scaled Bernoulli random matrix). 

Definition at line 337 of file dropout.\+hpp.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/layers/regularizers/\hyperlink{dropout_8hpp}{dropout.\+hpp}\end{DoxyCompactItemize}
