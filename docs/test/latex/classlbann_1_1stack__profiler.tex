\hypertarget{classlbann_1_1stack__profiler}{}\section{lbann\+:\+:stack\+\_\+profiler Class Reference}
\label{classlbann_1_1stack__profiler}\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}


{\ttfamily \#include $<$stack\+\_\+profiler.\+hpp$>$}



Collaboration diagram for lbann\+:\+:stack\+\_\+profiler\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{classlbann_1_1stack__profiler__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classlbann_1_1stack__profiler_a5c8e2ec1f36d36ff8211ec8910063777}{activate} (int thread\+\_\+id)
\item 
void \hyperlink{classlbann_1_1stack__profiler_a27d55f6551cf445d3d0e9836858f6872}{print} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler} $\ast$ \hyperlink{classlbann_1_1stack__profiler_ab1a7c0531a78ad7e2181a10daee44def}{get} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1stack__profiler_aee22d226f565eb88cc877570ca818033}{stack\+\_\+profiler} ()
\item 
\hyperlink{classlbann_1_1stack__profiler_a57329b6f2822f91e6dad13b19bcc81d9}{$\sim$stack\+\_\+profiler} ()
\item 
\hyperlink{classlbann_1_1stack__profiler_af52b4bc426a0728860b00a4fb7fd500f}{stack\+\_\+profiler} (const \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler} \&)
\item 
\hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler} \& \hyperlink{classlbann_1_1stack__profiler_adac8efbe72cf9186a726798dc4efe91a}{operator=} (const \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler} \&)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classlbann_1_1stack__profiler_a7dd8bf137ea417ecf54537d64c6d296a}{m\+\_\+full\+\_\+stack\+\_\+trace}
\item 
int \hyperlink{classlbann_1_1stack__profiler_a1bd742927294507fe67184cb4f47b86c}{m\+\_\+thread\+\_\+id}
\end{DoxyCompactItemize}
\subsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler} $\ast$ \hyperlink{classlbann_1_1stack__profiler_a7a1803ee126dfb5a215c5966458451fd}{s\+\_\+instance} = new \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This is a singleton, globally accessible class, for recording stack traces and timing 

Definition at line 44 of file stack\+\_\+profiler.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1stack__profiler_aee22d226f565eb88cc877570ca818033}\label{classlbann_1_1stack__profiler_aee22d226f565eb88cc877570ca818033}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!stack\+\_\+profiler@{stack\+\_\+profiler}}
\index{stack\+\_\+profiler@{stack\+\_\+profiler}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{stack\+\_\+profiler()}{stack\_profiler()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily lbann\+::stack\+\_\+profiler\+::stack\+\_\+profiler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 78 of file stack\+\_\+profiler.\+cpp.


\begin{DoxyCode}
79   : \hyperlink{classlbann_1_1stack__profiler_a7dd8bf137ea417ecf54537d64c6d296a}{m\_full\_stack\_trace}(\textcolor{keyword}{false})
80   \{\}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classlbann_1_1stack__profiler_aee22d226f565eb88cc877570ca818033_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1stack__profiler_a57329b6f2822f91e6dad13b19bcc81d9}\label{classlbann_1_1stack__profiler_a57329b6f2822f91e6dad13b19bcc81d9}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!````~stack\+\_\+profiler@{$\sim$stack\+\_\+profiler}}
\index{````~stack\+\_\+profiler@{$\sim$stack\+\_\+profiler}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{$\sim$stack\+\_\+profiler()}{~stack\_profiler()}}
{\footnotesize\ttfamily lbann\+::stack\+\_\+profiler\+::$\sim$stack\+\_\+profiler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 68 of file stack\+\_\+profiler.\+cpp.


\begin{DoxyCode}
68                                 \{
69   \textcolor{comment}{//todo: free hash table memory}
70   \textcolor{keywordflow}{if} (\hyperlink{stack__profiler_8cpp_a6cc00bff1b0fcee1e92c726aea92c818}{c\_hash\_fp\_full\_stack\_trace} != NULL) \{
71     fclose(\hyperlink{stack__profiler_8cpp_a6cc00bff1b0fcee1e92c726aea92c818}{c\_hash\_fp\_full\_stack\_trace});
72   \}
73   \textcolor{keywordflow}{if} (\hyperlink{stack__profiler_8cpp_a434aed2bad9781985a12de882aa0ec84}{c\_hash\_fp\_full\_stack\_trace\_metadata} != NULL) \{
74     fclose(\hyperlink{stack__profiler_8cpp_a434aed2bad9781985a12de882aa0ec84}{c\_hash\_fp\_full\_stack\_trace\_metadata});
75   \}
76 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classlbann_1_1stack__profiler_a57329b6f2822f91e6dad13b19bcc81d9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1stack__profiler_af52b4bc426a0728860b00a4fb7fd500f}\label{classlbann_1_1stack__profiler_af52b4bc426a0728860b00a4fb7fd500f}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!stack\+\_\+profiler@{stack\+\_\+profiler}}
\index{stack\+\_\+profiler@{stack\+\_\+profiler}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{stack\+\_\+profiler()}{stack\_profiler()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily lbann\+::stack\+\_\+profiler\+::stack\+\_\+profiler (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 60 of file stack\+\_\+profiler.\+hpp.


\begin{DoxyCode}
60 \{\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1stack__profiler_a5c8e2ec1f36d36ff8211ec8910063777}\label{classlbann_1_1stack__profiler_a5c8e2ec1f36d36ff8211ec8910063777}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!activate@{activate}}
\index{activate@{activate}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{activate()}{activate()}}
{\footnotesize\ttfamily void lbann\+::stack\+\_\+profiler\+::activate (\begin{DoxyParamCaption}\item[{int}]{thread\+\_\+id }\end{DoxyParamCaption})}

Turns on stack profiling {\itshape if} you have passed the cmd line option\+: --st\+\_\+on or --st\+\_\+on=1 

Definition at line 82 of file stack\+\_\+profiler.\+cpp.


\begin{DoxyCode}
82                                         \{
83   \hyperlink{classlbann_1_1stack__profiler_a1bd742927294507fe67184cb4f47b86c}{m\_thread\_id} = thread;
84   \hyperlink{stack__profiler_8cpp_a92d77137d4b87923f488746604d72f94}{c\_hash\_thread\_id} = thread;
85   \hyperlink{classoptions}{options} *opts = \hyperlink{classoptions_a9ecfe9c365269df68a41b961c31ae3f5}{options::get}();
86 
87   \textcolor{keywordflow}{if} (opts->\hyperlink{classoptions_aafb1d2a7ccde0b1bf786230ba4080ecd}{has\_bool}(\textcolor{stringliteral}{"st\_on"}) and opts->\hyperlink{classoptions_a99aa190102de33e2aed39723929f9fad}{get\_bool}(\textcolor{stringliteral}{"st\_on"})) \{
88     std::cerr << \textcolor{stringliteral}{"creating hash table!\(\backslash\)n"};
89     \hyperlink{stack__profiler_8cpp_ad1c2d92ab2c29021521d36cf4c97e488}{c\_hash\_create}(10000);
90     \hyperlink{stack__profiler_8cpp_a193e8df9f6b1bc5794e9aa25f82e6a5f}{c\_hash\_profiling\_is\_turned\_on} = 1;
91     \textcolor{keywordflow}{if} (opts->\hyperlink{classoptions_aafb1d2a7ccde0b1bf786230ba4080ecd}{has\_bool}(\textcolor{stringliteral}{"st\_full\_trace"}) and opts->\hyperlink{classoptions_a99aa190102de33e2aed39723929f9fad}{get\_bool}(\textcolor{stringliteral}{"st\_full\_trace"})) \{
92       \hyperlink{classlbann_1_1stack__profiler_a7dd8bf137ea417ecf54537d64c6d296a}{m\_full\_stack\_trace} = \textcolor{keyword}{true};
93       \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1stack__profiler_a1bd742927294507fe67184cb4f47b86c}{m\_thread\_id} == 0) \{
94         \hyperlink{stack__profiler_8cpp_a6cc00bff1b0fcee1e92c726aea92c818}{c\_hash\_fp\_full\_stack\_trace} = fopen(\textcolor{stringliteral}{"full\_stack\_trace.bin"}, \textcolor{stringliteral}{"wb"});
95         \hyperlink{stack__profiler_8cpp_a434aed2bad9781985a12de882aa0ec84}{c\_hash\_fp\_full\_stack\_trace\_metadata} = fopen(\textcolor{stringliteral}{"
      full\_stack\_trace.txt"}, \textcolor{stringliteral}{"w"});
96       \}
97     \}
98   \} \textcolor{keywordflow}{else} \{
99     \hyperlink{stack__profiler_8cpp_a193e8df9f6b1bc5794e9aa25f82e6a5f}{c\_hash\_profiling\_is\_turned\_on} = 0;
100   \}
101 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1stack__profiler_a5c8e2ec1f36d36ff8211ec8910063777_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classlbann_1_1stack__profiler_a5c8e2ec1f36d36ff8211ec8910063777_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1stack__profiler_ab1a7c0531a78ad7e2181a10daee44def}\label{classlbann_1_1stack__profiler_ab1a7c0531a78ad7e2181a10daee44def}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!get@{get}}
\index{get@{get}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily static \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler}$\ast$ lbann\+::stack\+\_\+profiler\+::get (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 46 of file stack\+\_\+profiler.\+hpp.


\begin{DoxyCode}
46                                                                         \{
47     \textcolor{keywordflow}{return} \hyperlink{classlbann_1_1stack__profiler_a7a1803ee126dfb5a215c5966458451fd}{s\_instance};
48   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1stack__profiler_ab1a7c0531a78ad7e2181a10daee44def_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1stack__profiler_adac8efbe72cf9186a726798dc4efe91a}\label{classlbann_1_1stack__profiler_adac8efbe72cf9186a726798dc4efe91a}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler}\& lbann\+::stack\+\_\+profiler\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 61 of file stack\+\_\+profiler.\+hpp.


\begin{DoxyCode}
61 \{ \textcolor{keywordflow}{return} *\textcolor{keyword}{this}; \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1stack__profiler_a27d55f6551cf445d3d0e9836858f6872}\label{classlbann_1_1stack__profiler_a27d55f6551cf445d3d0e9836858f6872}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!print@{print}}
\index{print@{print}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{print()}{print()}}
{\footnotesize\ttfamily void lbann\+::stack\+\_\+profiler\+::print (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 107 of file stack\+\_\+profiler.\+cpp.


\begin{DoxyCode}
107                            \{
108   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1stack__profiler_a1bd742927294507fe67184cb4f47b86c}{m\_thread\_id} != 0) \{ \textcolor{keywordflow}{return}; \}
109   \hyperlink{structc__hash__table}{c\_hash\_table} *h = \hyperlink{stack__profiler_8cpp_acaf4dd8f3a0755b44949a87760cd1102}{c\_hash\_the\_hash\_table};
110   \textcolor{keywordflow}{if} (h == NULL) \{
111     \textcolor{keywordflow}{return};
112   \}
113   std::cout << std::endl << \textcolor{stringliteral}{"demangling ... num hash table entries: "} << h->
      \hyperlink{structc__hash__table_ae4c33f323d44301e5990ba3355a2d708}{count} << \textcolor{stringliteral}{"\(\backslash\)n"};
114 
115   std::vector<std::pair<std::string, long>> v;
116   v.reserve( h->\hyperlink{structc__hash__table_ae4c33f323d44301e5990ba3355a2d708}{count} );
117   \hyperlink{structc__hash__node}{c\_hash\_node} *\hyperlink{namespacelbann_1_1cnpy__utils_a9ac86d96ccb1f8b4b2ea16441738781f}{data} = h->\hyperlink{structc__hash__table_abfdd282e54441552086f78d30b959d60}{data};
118   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{long} k=0; k < h->\hyperlink{structc__hash__table_afd5bfd9640fc5b72f75457fb7dd89663}{size}; k++) \{
119     \textcolor{keywordflow}{if} (data[k].mark == h->\hyperlink{structc__hash__table_a87debaad1679b5fd28537908174a7487}{cur\_mark}) \{
120       v.push\_back(std::make\_pair(data[k].name, data[k].count));
121     \}
122   \}
123 
124   std::sort(v.begin(), v.end(), \hyperlink{namespacelbann_aedcfce41af2eae595ce58b1180f66bd1}{count\_sorter});
125   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} t : v) \{
126     std::cout << t.second << \textcolor{stringliteral}{"  "} << t.first << std::endl;
127   \}
128 
129   std::cout << \textcolor{stringliteral}{"===================================================================\(\backslash\)n"};
130   std::cout << \textcolor{stringliteral}{"hash table lookups:    "} << \hyperlink{stack__profiler_8cpp_a60ca1ac997785ebd8547c022d07fe4b5}{c\_hash\_lookups} << std::endl;
131   std::cout << \textcolor{stringliteral}{"hash table collisions: "} << \hyperlink{stack__profiler_8cpp_a9e4c390c04f233e99f7577a1c63be028}{c\_hash\_collisions} << std::endl;
132 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1stack__profiler_a27d55f6551cf445d3d0e9836858f6872_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classlbann_1_1stack__profiler_a27d55f6551cf445d3d0e9836858f6872_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1stack__profiler_a7dd8bf137ea417ecf54537d64c6d296a}\label{classlbann_1_1stack__profiler_a7dd8bf137ea417ecf54537d64c6d296a}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!m\+\_\+full\+\_\+stack\+\_\+trace@{m\+\_\+full\+\_\+stack\+\_\+trace}}
\index{m\+\_\+full\+\_\+stack\+\_\+trace@{m\+\_\+full\+\_\+stack\+\_\+trace}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{m\+\_\+full\+\_\+stack\+\_\+trace}{m\_full\_stack\_trace}}
{\footnotesize\ttfamily bool lbann\+::stack\+\_\+profiler\+::m\+\_\+full\+\_\+stack\+\_\+trace\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 65 of file stack\+\_\+profiler.\+hpp.

\mbox{\Hypertarget{classlbann_1_1stack__profiler_a1bd742927294507fe67184cb4f47b86c}\label{classlbann_1_1stack__profiler_a1bd742927294507fe67184cb4f47b86c}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!m\+\_\+thread\+\_\+id@{m\+\_\+thread\+\_\+id}}
\index{m\+\_\+thread\+\_\+id@{m\+\_\+thread\+\_\+id}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{m\+\_\+thread\+\_\+id}{m\_thread\_id}}
{\footnotesize\ttfamily int lbann\+::stack\+\_\+profiler\+::m\+\_\+thread\+\_\+id\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 67 of file stack\+\_\+profiler.\+hpp.

\mbox{\Hypertarget{classlbann_1_1stack__profiler_a7a1803ee126dfb5a215c5966458451fd}\label{classlbann_1_1stack__profiler_a7a1803ee126dfb5a215c5966458451fd}} 
\index{lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}!s\+\_\+instance@{s\+\_\+instance}}
\index{s\+\_\+instance@{s\+\_\+instance}!lbann\+::stack\+\_\+profiler@{lbann\+::stack\+\_\+profiler}}
\subsubsection{\texorpdfstring{s\+\_\+instance}{s\_instance}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler} $\ast$ lbann\+::stack\+\_\+profiler\+::s\+\_\+instance = new \hyperlink{classlbann_1_1stack__profiler}{stack\+\_\+profiler}\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 63 of file stack\+\_\+profiler.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/utils/\hyperlink{stack__profiler_8hpp}{stack\+\_\+profiler.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/utils/\hyperlink{stack__profiler_8cpp}{stack\+\_\+profiler.\+cpp}\end{DoxyCompactItemize}
