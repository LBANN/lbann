\hypertarget{classlbann_1_1convolution__layer}{}\section{lbann\+:\+:convolution\+\_\+layer$<$ T\+\_\+layout $>$ Class Template Reference}
\label{classlbann_1_1convolution__layer}\index{lbann\+::convolution\+\_\+layer$<$ T\+\_\+layout $>$@{lbann\+::convolution\+\_\+layer$<$ T\+\_\+layout $>$}}


Convolution layer.  




{\ttfamily \#include $<$convolution.\+hpp$>$}



Inheritance diagram for lbann\+:\+:convolution\+\_\+layer$<$ T\+\_\+layout $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{classlbann_1_1convolution__layer__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:convolution\+\_\+layer$<$ T\+\_\+layout $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1convolution__layer__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::string \hyperlink{classlbann_1_1convolution__layer_abce67d7e977d148093798936aff8ee5e}{get\+\_\+description} () const override
\begin{DoxyCompactList}\small\item\em kernel tensor is output channels, input channels, conv dimension (w x h) \end{DoxyCompactList}\item 
std\+::string \hyperlink{classlbann_1_1convolution__layer_a5af5bb8b7fb68ed4e5085be676788eed}{get\+\_\+topo\+\_\+description} () const override
\item 
\hyperlink{classlbann_1_1convolution__layer_aad28b1304d9440fc50b3b54438587aa3}{convolution\+\_\+layer} (\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm}, int num\+\_\+data\+\_\+dims, int num\+\_\+output\+\_\+channels, int conv\+\_\+dim, int pad, int stride, bool has\+\_\+bias=true, \hyperlink{classlbann_1_1cudnn_1_1cudnn__manager}{cudnn\+::cudnn\+\_\+manager} $\ast$cudnn=nullptr)
\item 
\hyperlink{classlbann_1_1convolution__layer_acec65090b712cb902dbf58a6c037cf0c}{convolution\+\_\+layer} (\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm}, int num\+\_\+data\+\_\+dims, int num\+\_\+output\+\_\+channels, std\+::vector$<$ int $>$ conv\+\_\+dims, std\+::vector$<$ int $>$ pads, std\+::vector$<$ int $>$ strides, bool has\+\_\+bias=true, \hyperlink{classlbann_1_1cudnn_1_1cudnn__manager}{cudnn\+::cudnn\+\_\+manager} $\ast$cudnn=nullptr)
\item 
\hyperlink{classlbann_1_1convolution__layer}{convolution\+\_\+layer} $\ast$ \hyperlink{classlbann_1_1convolution__layer_ac2d126a93bc690a959daed54658aabd5}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1convolution__layer_ac0f341b98118f5494c95f9048bdb7a43}{get\+\_\+type} () const override
\item 
\hyperlink{base_8hpp_a786677cbfb3f5677b4d84f3056eb08db}{data\+\_\+layout} \hyperlink{classlbann_1_1convolution__layer_a496e4bc7465269961603aba305700b84}{get\+\_\+data\+\_\+layout} () const override
\item 
void \hyperlink{classlbann_1_1convolution__layer_adbb45d032ad79c793a159b7ee79eef14}{setup\+\_\+dims} () override
\item 
void \hyperlink{classlbann_1_1convolution__layer_ab20636b44d2b17abdb5424df54cb9c6d}{setup\+\_\+data} () override
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classlbann_1_1convolution__layer_aaca2c840fe41d8025efce91d6e9211b9}{fp\+\_\+compute} () override
\item 
void \hyperlink{classlbann_1_1convolution__layer_a610f24f98b548434cd4d22419f47c7f0}{bp\+\_\+compute} () override
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classlbann_1_1convolution__layer_a6d54673503b45aeb6526f041224900c6}{lbann\+\_\+callback\+\_\+imcomm}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\subsubsection*{template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$\newline
class lbann\+::convolution\+\_\+layer$<$ T\+\_\+layout $>$}

Convolution layer. 

Definition at line 42 of file convolution.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_aad28b1304d9440fc50b3b54438587aa3}\label{classlbann_1_1convolution__layer_aad28b1304d9440fc50b3b54438587aa3}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!convolution\+\_\+layer@{convolution\+\_\+layer}}
\index{convolution\+\_\+layer@{convolution\+\_\+layer}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{convolution\+\_\+layer()}{convolution\_layer()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
\hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::\hyperlink{classlbann_1_1convolution__layer}{convolution\+\_\+layer} (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$}]{comm,  }\item[{int}]{num\+\_\+data\+\_\+dims,  }\item[{int}]{num\+\_\+output\+\_\+channels,  }\item[{int}]{conv\+\_\+dim,  }\item[{int}]{pad,  }\item[{int}]{stride,  }\item[{bool}]{has\+\_\+bias = {\ttfamily true},  }\item[{\hyperlink{classlbann_1_1cudnn_1_1cudnn__manager}{cudnn\+::cudnn\+\_\+manager} $\ast$}]{cudnn = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 100 of file convolution.\+hpp.


\begin{DoxyCode}
108     : \hyperlink{classlbann_1_1convolution__layer_aad28b1304d9440fc50b3b54438587aa3}{convolution\_layer}(\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm},
109                         num\_data\_dims,
110                         num\_output\_channels,
111                         std::vector<int>(num\_data\_dims, conv\_dim),
112                         std::vector<int>(num\_data\_dims, pad),
113                         std::vector<int>(num\_data\_dims, stride),
114                         has\_bias,
115                         cudnn) \{\}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=339pt]{classlbann_1_1convolution__layer_aad28b1304d9440fc50b3b54438587aa3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_acec65090b712cb902dbf58a6c037cf0c}\label{classlbann_1_1convolution__layer_acec65090b712cb902dbf58a6c037cf0c}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!convolution\+\_\+layer@{convolution\+\_\+layer}}
\index{convolution\+\_\+layer@{convolution\+\_\+layer}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{convolution\+\_\+layer()}{convolution\_layer()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
\hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::\hyperlink{classlbann_1_1convolution__layer}{convolution\+\_\+layer} (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$}]{comm,  }\item[{int}]{num\+\_\+data\+\_\+dims,  }\item[{int}]{num\+\_\+output\+\_\+channels,  }\item[{std\+::vector$<$ int $>$}]{conv\+\_\+dims,  }\item[{std\+::vector$<$ int $>$}]{pads,  }\item[{std\+::vector$<$ int $>$}]{strides,  }\item[{bool}]{has\+\_\+bias = {\ttfamily true},  }\item[{\hyperlink{classlbann_1_1cudnn_1_1cudnn__manager}{cudnn\+::cudnn\+\_\+manager} $\ast$}]{cudnn = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 117 of file convolution.\+hpp.


\begin{DoxyCode}
125     : \hyperlink{classlbann_1_1base__convolution__layer_a1489c6034dc88a8749ccd0ae4a3b02a8}{base\_convolution\_layer}(\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm},
126                              num\_data\_dims,
127                              num\_output\_channels,
128                              conv\_dims,
129                              pads,
130                              strides,
131                              has\_bias,
132                              cudnn) \{
133     static\_assert(T\_layout == \hyperlink{base_8hpp_a786677cbfb3f5677b4d84f3056eb08dba37d2a3465f7cbf4ab60f4e79944d0638}{data\_layout::DATA\_PARALLEL},
134                   \textcolor{stringliteral}{"convolution only supports DATA\_PARALLEL"});
135 
136     \textcolor{comment}{// Use GPUs if cuDNN manager is available}
137     \textcolor{keywordflow}{if}(this->\hyperlink{classlbann_1_1Layer_a08dbb94239e3b8c96329786c57c72e21}{m\_cudnn}) \{
138       this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus} = \textcolor{keyword}{true};
139     \}
140 
141   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_a610f24f98b548434cd4d22419f47c7f0}\label{classlbann_1_1convolution__layer_a610f24f98b548434cd4d22419f47c7f0}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!bp\+\_\+compute@{bp\+\_\+compute}}
\index{bp\+\_\+compute@{bp\+\_\+compute}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{bp\+\_\+compute()}{bp\_compute()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
void \hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::bp\+\_\+compute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Perform the computation for the backward propagation step. 

Implements \hyperlink{classlbann_1_1Layer_a7442e01f9ee1294df2de811efcf5171e}{lbann\+::\+Layer}.



Definition at line 207 of file convolution.\+hpp.


\begin{DoxyCode}
207                              \{
208     \textcolor{keywordflow}{if}(this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus}) \{
209       \hyperlink{classlbann_1_1base__convolution__layer_ae46e6a975c443792c606817878dc4446}{compute\_gradients\_cudnn}(\textcolor{keyword}{false});
210       \hyperlink{classlbann_1_1base__convolution__layer_a130907ca7a8e3b6676bdd4186c788ef4}{apply\_transposed\_convolution\_cudnn}(\textcolor{keyword}{false});
211     \} \textcolor{keywordflow}{else} \{
212       \hyperlink{classlbann_1_1base__convolution__layer_a8cb0b4fb33f058ce6c211ebaf6a17f63}{compute\_gradients\_im2col}(\textcolor{keyword}{false});
213       \hyperlink{classlbann_1_1base__convolution__layer_a87fb2bf066a98052938e48a82dcd4fd2}{apply\_transposed\_convolution\_im2col}(\textcolor{keyword}{false});
214     \}
215   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1convolution__layer_a610f24f98b548434cd4d22419f47c7f0_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_ac2d126a93bc690a959daed54658aabd5}\label{classlbann_1_1convolution__layer_ac2d126a93bc690a959daed54658aabd5}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!copy@{copy}}
\index{copy@{copy}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
\hyperlink{classlbann_1_1convolution__layer}{convolution\+\_\+layer}$\ast$ \hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Copy function. This function dynamically allocates memory for a layer instance and instantiates a copy. The caller is responsible for deallocating the instance. 

Implements \hyperlink{classlbann_1_1Layer_af420f22bbac801c85483ade84588a23f}{lbann\+::\+Layer}.



Definition at line 143 of file convolution.\+hpp.


\begin{DoxyCode}
143 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1convolution__layer_aad28b1304d9440fc50b3b54438587aa3}{convolution\_layer}(*\textcolor{keyword}{this}); \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=339pt]{classlbann_1_1convolution__layer_ac2d126a93bc690a959daed54658aabd5_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_aaca2c840fe41d8025efce91d6e9211b9}\label{classlbann_1_1convolution__layer_aaca2c840fe41d8025efce91d6e9211b9}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!fp\+\_\+compute@{fp\+\_\+compute}}
\index{fp\+\_\+compute@{fp\+\_\+compute}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{fp\+\_\+compute()}{fp\_compute()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
void \hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::fp\+\_\+compute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Perform the computation for the forward propagation step. 

Implements \hyperlink{classlbann_1_1Layer_a523319dd1bd87a0612afa1912bb5aad7}{lbann\+::\+Layer}.



Definition at line 197 of file convolution.\+hpp.


\begin{DoxyCode}
197                              \{
198     \textcolor{keywordflow}{if}(this->\hyperlink{classlbann_1_1Layer_af7881cb5eff5207c15fa835d65462e8f}{m\_using\_gpus}) \{
199       \hyperlink{classlbann_1_1base__convolution__layer_a1c6e967ab0c66cfa0d27f7abfbbf2be8}{apply\_convolution\_cudnn}(\textcolor{keyword}{true});
200       \hyperlink{classlbann_1_1base__convolution__layer_aa33e490222597c4c5203d94061ae9d88}{apply\_bias\_cudnn}();
201     \} \textcolor{keywordflow}{else} \{
202       \hyperlink{classlbann_1_1base__convolution__layer_a0710d46aa54d92f94de920ed37f6ef11}{apply\_convolution\_im2col}(\textcolor{keyword}{true});
203       \hyperlink{classlbann_1_1base__convolution__layer_a4f792e1c19d4591f305880b57f63cec3}{apply\_bias\_cpu}();
204     \}
205   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1convolution__layer_aaca2c840fe41d8025efce91d6e9211b9_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_a496e4bc7465269961603aba305700b84}\label{classlbann_1_1convolution__layer_a496e4bc7465269961603aba305700b84}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!get\+\_\+data\+\_\+layout@{get\+\_\+data\+\_\+layout}}
\index{get\+\_\+data\+\_\+layout@{get\+\_\+data\+\_\+layout}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{get\+\_\+data\+\_\+layout()}{get\_data\_layout()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
\hyperlink{base_8hpp_a786677cbfb3f5677b4d84f3056eb08db}{data\+\_\+layout} \hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::get\+\_\+data\+\_\+layout (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get data layout of the data tensors. We assume that the data layouts of the previous activations, activations, previous error signals, and error signals are the same. Each concrete layer that is templated on its data layout should override this function to return its template parameter. 

Implements \hyperlink{classlbann_1_1Layer_a5dfb66e81fc085997402a5e2241316bd}{lbann\+::\+Layer}.



Definition at line 147 of file convolution.\+hpp.


\begin{DoxyCode}
147 \{ \textcolor{keywordflow}{return} T\_layout; \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1convolution__layer_a496e4bc7465269961603aba305700b84_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_abce67d7e977d148093798936aff8ee5e}\label{classlbann_1_1convolution__layer_abce67d7e977d148093798936aff8ee5e}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!get\+\_\+description@{get\+\_\+description}}
\index{get\+\_\+description@{get\+\_\+description}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{get\+\_\+description()}{get\_description()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
std\+::string \hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::get\+\_\+description (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



kernel tensor is output channels, input channels, conv dimension (w x h) 

Returns description of ctor params 

Reimplemented from \hyperlink{classlbann_1_1Layer_acc0803d3428914ca1eb5988c4309174a}{lbann\+::\+Layer}.



Definition at line 51 of file convolution.\+hpp.


\begin{DoxyCode}
51                                              \{
52     std::stringstream s;
53     s << \textcolor{stringliteral}{" convolution; conv\_dims: "};
54     \textcolor{comment}{// for (size\_t h=0; h<this->m\_kernel\_dims.size(); h++) \{}
55     \textcolor{comment}{//   if (h == 0) \{ s << " channels (out x in) "; \}}
56     \textcolor{comment}{//   if (h == 2) \{ s << " filters (w x h) "; \}}
57     \textcolor{comment}{//   s << this->m\_kernel\_dims[h] << " ";}
58     \textcolor{comment}{// \}}
59     s << \hyperlink{classlbann_1_1convolution__layer_a5af5bb8b7fb68ed4e5085be676788eed}{get\_topo\_description}();
60     s << \textcolor{stringliteral}{" pads: "};
61     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} h=0; h<this->\hyperlink{classlbann_1_1base__convolution__layer_a9732a8a0170a413bf0cde0128ad2a571}{m\_pads}.size(); h++) \{
62       s << this->\hyperlink{classlbann_1_1base__convolution__layer_a9732a8a0170a413bf0cde0128ad2a571}{m\_pads}[h] << \textcolor{stringliteral}{" "};
63     \}
64     s << \textcolor{stringliteral}{" strides: "};
65     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} h=0; h<this->\hyperlink{classlbann_1_1base__convolution__layer_a2429495822363e41f1f6b96a6b430445}{m\_strides}.size(); h++) \{
66       s << this->\hyperlink{classlbann_1_1base__convolution__layer_a2429495822363e41f1f6b96a6b430445}{m\_strides}[h] << \textcolor{stringliteral}{" "};
67     \}
68     s << \textcolor{stringliteral}{" num\_output\_channels: "} << this->\hyperlink{classlbann_1_1Layer_abb34bb8031f57a483e2e327a5f229f48}{m\_neuron\_dims}[0]
69       << \textcolor{stringliteral}{" has\_bias: "} << this->\hyperlink{classlbann_1_1base__convolution__layer_a5abe0bcd128b66a41fa481b28a9c2104}{m\_bias\_scaling\_factor}
70       << \textcolor{stringliteral}{" dataLayout: "} << this->\hyperlink{classlbann_1_1Layer_ae3f4a5602df821f4221614b1e3782dc1}{get\_data\_layout\_string}(
      \hyperlink{classlbann_1_1convolution__layer_a496e4bc7465269961603aba305700b84}{get\_data\_layout}());
71     \textcolor{keywordflow}{return} s.str();
72   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1convolution__layer_abce67d7e977d148093798936aff8ee5e_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_a5af5bb8b7fb68ed4e5085be676788eed}\label{classlbann_1_1convolution__layer_a5af5bb8b7fb68ed4e5085be676788eed}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!get\+\_\+topo\+\_\+description@{get\+\_\+topo\+\_\+description}}
\index{get\+\_\+topo\+\_\+description@{get\+\_\+topo\+\_\+description}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{get\+\_\+topo\+\_\+description()}{get\_topo\_description()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
std\+::string \hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::get\+\_\+topo\+\_\+description (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get a human-\/readable description of the activation tensors. Activation tensors are stored in distributed matrices where each column corresponds to a mini-\/batch sample. Within each column, the data is packed w.\+r.\+t. the last tensor dimension, then w.\+r.\+t. the penultimate dimension, and so on. 3D tensors are assumed to be 2D images in N\+C\+HW format. 

Reimplemented from \hyperlink{classlbann_1_1Layer_a147a7f7dcf0027a60f10109439e5dcea}{lbann\+::\+Layer}.



Definition at line 74 of file convolution.\+hpp.


\begin{DoxyCode}
74                                                   \{
75     std::stringstream s;
76     \textcolor{comment}{// Get the topo description from any parent class}
77     std::string str = \hyperlink{classlbann_1_1Layer_a147a7f7dcf0027a60f10109439e5dcea}{base\_convolution\_layer::get\_topo\_description}
      ();
78     s << str << \textcolor{stringliteral}{" - "};
79 
80     \textcolor{comment}{// Display the topology of the kernel}
81     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} h=0; h<this->\hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims}.size(); h++) \{
82       \textcolor{keywordflow}{if} (h == 0) \{ s << \textcolor{stringliteral}{"C="}; \}
83       s << this->\hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims}[h] ;
84       \textcolor{keywordflow}{if} (h == 0) \{ s << \textcolor{stringliteral}{"o,"}; \}
85       \textcolor{keywordflow}{if} (h == 1) \{ s << \textcolor{stringliteral}{"i F="}; \}
86       \textcolor{keywordflow}{if} (this->m\_kernel\_dims.size() == 3) \{
87         \textcolor{keywordflow}{if} (h == 2) \{ s << \textcolor{stringliteral}{"w "}; \}
88       \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (this->m\_kernel\_dims.size() == 4) \{
89         \textcolor{keywordflow}{if} (h == 2) \{ s << \textcolor{stringliteral}{"w x "}; \}
90         \textcolor{keywordflow}{if} (h == 3) \{ s << \textcolor{stringliteral}{"h"}; \}
91       \}\textcolor{keywordflow}{else} \{
92         \textcolor{keywordflow}{if} (h > 1) \{
93           s << \textcolor{stringliteral}{" "};
94         \}
95       \}
96     \}
97     \textcolor{keywordflow}{return} s.str();;
98   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1convolution__layer_a5af5bb8b7fb68ed4e5085be676788eed_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1convolution__layer_a5af5bb8b7fb68ed4e5085be676788eed_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_ac0f341b98118f5494c95f9048bdb7a43}\label{classlbann_1_1convolution__layer_ac0f341b98118f5494c95f9048bdb7a43}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!get\+\_\+type@{get\+\_\+type}}
\index{get\+\_\+type@{get\+\_\+type}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{get\+\_\+type()}{get\_type()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
std\+::string \hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::get\+\_\+type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get the layer type\textquotesingle{}s name. A layer type name should be brief, human-\/readable description of the layer\textquotesingle{}s mathematical operation. 

Implements \hyperlink{classlbann_1_1Layer_a0fa0ea9160b490c151c0a17fde4f7239}{lbann\+::\+Layer}.



Definition at line 145 of file convolution.\+hpp.


\begin{DoxyCode}
145 \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"convolution"}; \}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_ab20636b44d2b17abdb5424df54cb9c6d}\label{classlbann_1_1convolution__layer_ab20636b44d2b17abdb5424df54cb9c6d}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!setup\+\_\+data@{setup\+\_\+data}}
\index{setup\+\_\+data@{setup\+\_\+data}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{setup\+\_\+data()}{setup\_data()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
void \hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::setup\+\_\+data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Setup layer data. The kernel weights are setup in the convolution and deconvolution classes. 

Reimplemented from \hyperlink{classlbann_1_1base__convolution__layer_a9f850c1bdf4ae3cd986411d3cb3a524c}{lbann\+::base\+\_\+convolution\+\_\+layer}.



Definition at line 187 of file convolution.\+hpp.


\begin{DoxyCode}
187                              \{
188     \hyperlink{classlbann_1_1base__convolution__layer_a9f850c1bdf4ae3cd986411d3cb3a524c}{base\_convolution\_layer::setup\_data}();
189     this->\hyperlink{classlbann_1_1Layer_a7954e30fbf9100a6ba4b56d02767a469}{m\_weights}[0]->setup(\hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims});
190     El::Zeros(this->\hyperlink{classlbann_1_1base__convolution__layer_a4129f11df61ed92bcad24ae855d7bd11}{m\_kernel\_gradient},
191               this->\hyperlink{classlbann_1_1Layer_a7954e30fbf9100a6ba4b56d02767a469}{m\_weights}[0]->get\_matrix\_height(),
192               this->\hyperlink{classlbann_1_1Layer_a7954e30fbf9100a6ba4b56d02767a469}{m\_weights}[0]->get\_matrix\_width());
193   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1convolution__layer_ab20636b44d2b17abdb5424df54cb9c6d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_adbb45d032ad79c793a159b7ee79eef14}\label{classlbann_1_1convolution__layer_adbb45d032ad79c793a159b7ee79eef14}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!setup\+\_\+dims@{setup\+\_\+dims}}
\index{setup\+\_\+dims@{setup\+\_\+dims}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{setup\+\_\+dims()}{setup\_dims()}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
void \hyperlink{classlbann_1_1convolution__layer}{lbann\+::convolution\+\_\+layer}$<$ T\+\_\+layout $>$\+::setup\+\_\+dims (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Setup tensor dimensions Called by the setup function. The base method sets the dimensions of the activation tensors equal to the dimensions of the first previous activation tensor. 

Reimplemented from \hyperlink{classlbann_1_1Layer_a90fce1b06c1f2abb480e18cfe08a9746}{lbann\+::\+Layer}.



Definition at line 149 of file convolution.\+hpp.


\begin{DoxyCode}
149                              \{
150 
151     \textcolor{comment}{// Initialize previous neuron tensor dimensions}
152     \hyperlink{classlbann_1_1Layer_a90fce1b06c1f2abb480e18cfe08a9746}{base\_convolution\_layer::setup\_dims}();
153 
154     \textcolor{comment}{// Initialize convolution kernel dimensions}
155     this->\hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims}.insert(this->\hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims}.begin() + 1,
156                                this->\hyperlink{classlbann_1_1Layer_ae204d1a2a79606eaa117273857ff62a3}{m\_prev\_neuron\_dims}[0]);
157 
158     \textcolor{comment}{// Check if previous neuron tensor dimensions are valid}
159 \textcolor{preprocessor}{  #ifdef LBANN\_DEBUG}
160     \textcolor{keywordflow}{if}(this->\hyperlink{classlbann_1_1Layer_adfd6178d21498c9095cd947ae1eb2d6a}{m\_num\_neuron\_dims} != (\textcolor{keywordtype}{int}) this->\hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims}.size() - 1) \{
161       \textcolor{keywordflow}{throw} lbann\_exception(\textcolor{stringliteral}{"convolution\_layer: neuron tensor dimensions are unexpected"});
162     \}
163 \textcolor{preprocessor}{  #endif}
164 
165     \textcolor{comment}{// Initialize neuron tensor dimensions}
166     this->\hyperlink{classlbann_1_1Layer_abb34bb8031f57a483e2e327a5f229f48}{m\_neuron\_dims}[0] = this->\hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims}[0];
167     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<this->\hyperlink{classlbann_1_1Layer_adfd6178d21498c9095cd947ae1eb2d6a}{m\_num\_neuron\_dims}-1; ++i) \{
168       \textcolor{keyword}{const} \textcolor{keywordtype}{int} effective\_dim = (this->\hyperlink{classlbann_1_1Layer_ae204d1a2a79606eaa117273857ff62a3}{m\_prev\_neuron\_dims}[i+1]
169                                  + 2 * this->\hyperlink{classlbann_1_1base__convolution__layer_a9732a8a0170a413bf0cde0128ad2a571}{m\_pads}[i]
170                                  - this->\hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims}[i+2] + 1);
171       this->\hyperlink{classlbann_1_1Layer_abb34bb8031f57a483e2e327a5f229f48}{m\_neuron\_dims}[i+1]= ((effective\_dim + this->\hyperlink{classlbann_1_1base__convolution__layer_a2429495822363e41f1f6b96a6b430445}{m\_strides}[i] - 1)
172                                  / this->\hyperlink{classlbann_1_1base__convolution__layer_a2429495822363e41f1f6b96a6b430445}{m\_strides}[i]);
173     \}
174     this->\hyperlink{classlbann_1_1Layer_a6b5ebc8a7d9329d8a773ed787e7b41d8}{m\_num\_neurons} = std::accumulate(this->\hyperlink{classlbann_1_1Layer_abb34bb8031f57a483e2e327a5f229f48}{m\_neuron\_dims}.begin(),
175                                           this->\hyperlink{classlbann_1_1Layer_abb34bb8031f57a483e2e327a5f229f48}{m\_neuron\_dims}.end(),
176                                           1,
177                                           std::multiplies<int>());
178 
179     \textcolor{comment}{// Get size of convolutional kernel}
180     this->\hyperlink{classlbann_1_1base__convolution__layer_aa9da3e44499643a86bd611b5eb500dd4}{m\_kernel\_size} = std::accumulate(\hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims}.begin(),
181                                           \hyperlink{classlbann_1_1base__convolution__layer_a283edb6a476f975e713d0b4235ac658f}{m\_kernel\_dims}.end(),
182                                           1,
183                                           std::multiplies<int>());
184 
185   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=344pt]{classlbann_1_1convolution__layer_adbb45d032ad79c793a159b7ee79eef14_cgraph}
\end{center}
\end{figure}


\subsection{Friends And Related Function Documentation}
\mbox{\Hypertarget{classlbann_1_1convolution__layer_a6d54673503b45aeb6526f041224900c6}\label{classlbann_1_1convolution__layer_a6d54673503b45aeb6526f041224900c6}} 
\index{lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}!lbann\+\_\+callback\+\_\+imcomm@{lbann\+\_\+callback\+\_\+imcomm}}
\index{lbann\+\_\+callback\+\_\+imcomm@{lbann\+\_\+callback\+\_\+imcomm}!lbann\+::convolution\+\_\+layer@{lbann\+::convolution\+\_\+layer}}
\subsubsection{\texorpdfstring{lbann\+\_\+callback\+\_\+imcomm}{lbann\_callback\_imcomm}}
{\footnotesize\ttfamily template$<$data\+\_\+layout T\+\_\+layout = data\+\_\+layout\+::\+D\+A\+T\+A\+\_\+\+P\+A\+R\+A\+L\+L\+EL$>$ \\
friend class \hyperlink{classlbann_1_1lbann__callback__imcomm}{lbann\+\_\+callback\+\_\+imcomm}\hspace{0.3cm}{\ttfamily [friend]}}



Definition at line 45 of file convolution.\+hpp.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/layers/learning/\hyperlink{convolution_8hpp}{convolution.\+hpp}\end{DoxyCompactItemize}
