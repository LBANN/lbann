\hypertarget{classlbann_1_1imagenet__reader}{}\section{lbann\+:\+:imagenet\+\_\+reader Class Reference}
\label{classlbann_1_1imagenet__reader}\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}


{\ttfamily \#include $<$data\+\_\+reader\+\_\+imagenet.\+hpp$>$}



Inheritance diagram for lbann\+:\+:imagenet\+\_\+reader\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:imagenet\+\_\+reader\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1imagenet__reader_a642331b94cdc3caad8335d65d096141c}{imagenet\+\_\+reader} (bool shuffle)=delete
\item 
\hyperlink{classlbann_1_1imagenet__reader_abf46c9cf51a7e046173a0046fb0ad08a}{imagenet\+\_\+reader} (const std\+::shared\+\_\+ptr$<$ cv\+\_\+process $>$ \&pp, bool shuffle=true)
\item 
\hyperlink{classlbann_1_1imagenet__reader_a18939cd7962491c30dc857622bad9666}{imagenet\+\_\+reader} (const \hyperlink{classlbann_1_1imagenet__reader}{imagenet\+\_\+reader} \&)
\item 
\hyperlink{classlbann_1_1imagenet__reader}{imagenet\+\_\+reader} \& \hyperlink{classlbann_1_1imagenet__reader_a5ea15cc16aa679a2cb549b44eb77f323}{operator=} (const \hyperlink{classlbann_1_1imagenet__reader}{imagenet\+\_\+reader} \&)
\item 
\hyperlink{classlbann_1_1imagenet__reader_a5a4ef2ba813d1a68890532e1a42bdcba}{$\sim$imagenet\+\_\+reader} () override
\item 
\hyperlink{classlbann_1_1imagenet__reader}{imagenet\+\_\+reader} $\ast$ \hyperlink{classlbann_1_1imagenet__reader_a71be5220be24de5caf00d2e422b750f2}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}{get\+\_\+type} () const override
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classlbann_1_1imagenet__reader_ad1e108315d659509a3e166c2f8a4941f}{set\+\_\+defaults} () override
\begin{DoxyCompactList}\small\item\em Set the default values for the width, the height, the number of channels, and the number of labels of an image. \end{DoxyCompactList}\item 
virtual bool \hyperlink{classlbann_1_1imagenet__reader_a1b642b5eb01b209e72bdd8dfa139cafd}{replicate\+\_\+processor} (const cv\+\_\+process \&pp)
\begin{DoxyCompactList}\small\item\em Replicate image processor for each Open\+MP thread. \end{DoxyCompactList}\item 
virtual \+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \hyperlink{classlbann_1_1imagenet__reader_a5c0662ebaa378f7f5b4448f4d207e872}{create\+\_\+datum\+\_\+view} (\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&X, const int mb\+\_\+idx) const
\item 
bool \hyperlink{classlbann_1_1imagenet__reader_a6659e90c0243da40f214a877f65eb8ac}{fetch\+\_\+datum} (\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&X, int data\+\_\+id, int mb\+\_\+idx, int tid) override
\item 
void \hyperlink{classlbann_1_1imagenet__reader_a17af38eff1c3aee001d263248b8406a1}{setup\+\_\+data\+\_\+store} (\hyperlink{classlbann_1_1model}{model} $\ast$m) override
\begin{DoxyCompactList}\small\item\em sets up a data\+\_\+store. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ std\+::unique\+\_\+ptr$<$ cv\+\_\+process $>$ $>$ \hyperlink{classlbann_1_1imagenet__reader_a1e0d0ed4ac529de3e9f735512f5e3dd8}{m\+\_\+pps}
\begin{DoxyCompactList}\small\item\em preprocessor duplicated for each omp thread \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 36 of file data\+\_\+reader\+\_\+imagenet.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a642331b94cdc3caad8335d65d096141c}\label{classlbann_1_1imagenet__reader_a642331b94cdc3caad8335d65d096141c}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!imagenet\+\_\+reader@{imagenet\+\_\+reader}}
\index{imagenet\+\_\+reader@{imagenet\+\_\+reader}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{imagenet\+\_\+reader()}{imagenet\_reader()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily lbann\+::imagenet\+\_\+reader\+::imagenet\+\_\+reader (\begin{DoxyParamCaption}\item[{bool}]{shuffle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a642331b94cdc3caad8335d65d096141c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_abf46c9cf51a7e046173a0046fb0ad08a}\label{classlbann_1_1imagenet__reader_abf46c9cf51a7e046173a0046fb0ad08a}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!imagenet\+\_\+reader@{imagenet\+\_\+reader}}
\index{imagenet\+\_\+reader@{imagenet\+\_\+reader}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{imagenet\+\_\+reader()}{imagenet\_reader()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily lbann\+::imagenet\+\_\+reader\+::imagenet\+\_\+reader (\begin{DoxyParamCaption}\item[{const std\+::shared\+\_\+ptr$<$ cv\+\_\+process $>$ \&}]{pp,  }\item[{bool}]{shuffle = {\ttfamily true} }\end{DoxyParamCaption})}



Definition at line 36 of file data\+\_\+reader\+\_\+imagenet.\+cpp.


\begin{DoxyCode}
37   : \hyperlink{classlbann_1_1image__data__reader_a582185ab03c4643117fd93e0ba843882}{image\_data\_reader}(shuffle) \{
38   \hyperlink{classlbann_1_1imagenet__reader_ad1e108315d659509a3e166c2f8a4941f}{set\_defaults}();
39 
40   \textcolor{keywordflow}{if} (!pp) \{
41     std::stringstream err;
42     err << \_\_FILE\_\_<<\textcolor{stringliteral}{" "}<<\_\_LINE\_\_<< \textcolor{stringliteral}{" :: "} << \hyperlink{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}{get\_type}() << \textcolor{stringliteral}{" construction error: no image
       processor"};
43     \textcolor{keywordflow}{throw} lbann\_exception(err.str());
44   \}
45 
46   \hyperlink{classlbann_1_1imagenet__reader_a1b642b5eb01b209e72bdd8dfa139cafd}{replicate\_processor}(*pp);
47 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_abf46c9cf51a7e046173a0046fb0ad08a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a18939cd7962491c30dc857622bad9666}\label{classlbann_1_1imagenet__reader_a18939cd7962491c30dc857622bad9666}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!imagenet\+\_\+reader@{imagenet\+\_\+reader}}
\index{imagenet\+\_\+reader@{imagenet\+\_\+reader}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{imagenet\+\_\+reader()}{imagenet\_reader()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily lbann\+::imagenet\+\_\+reader\+::imagenet\+\_\+reader (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1imagenet__reader}{imagenet\+\_\+reader} \&}]{rhs }\end{DoxyParamCaption})}



Definition at line 49 of file data\+\_\+reader\+\_\+imagenet.\+cpp.


\begin{DoxyCode}
50   : \hyperlink{classlbann_1_1image__data__reader_a582185ab03c4643117fd93e0ba843882}{image\_data\_reader}(rhs) \{
51   \textcolor{keywordflow}{if} (rhs.m\_pps.size() == 0u || !rhs.m\_pps[0]) \{
52     std::stringstream err;
53     err << \_\_FILE\_\_<<\textcolor{stringliteral}{" "}<<\_\_LINE\_\_<< \textcolor{stringliteral}{" :: "} << \hyperlink{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}{get\_type}() << \textcolor{stringliteral}{" construction error: no image
       processor"};
54     \textcolor{keywordflow}{throw} lbann\_exception(err.str());
55   \}
56   \hyperlink{classlbann_1_1imagenet__reader_a1b642b5eb01b209e72bdd8dfa139cafd}{replicate\_processor}(*rhs.m\_pps[0]);
57 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a18939cd7962491c30dc857622bad9666_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a5a4ef2ba813d1a68890532e1a42bdcba}\label{classlbann_1_1imagenet__reader_a5a4ef2ba813d1a68890532e1a42bdcba}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!````~imagenet\+\_\+reader@{$\sim$imagenet\+\_\+reader}}
\index{````~imagenet\+\_\+reader@{$\sim$imagenet\+\_\+reader}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{$\sim$imagenet\+\_\+reader()}{~imagenet\_reader()}}
{\footnotesize\ttfamily lbann\+::imagenet\+\_\+reader\+::$\sim$imagenet\+\_\+reader (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Definition at line 76 of file data\+\_\+reader\+\_\+imagenet.\+cpp.


\begin{DoxyCode}
76                                   \{
77 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a71be5220be24de5caf00d2e422b750f2}\label{classlbann_1_1imagenet__reader_a71be5220be24de5caf00d2e422b750f2}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!copy@{copy}}
\index{copy@{copy}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1imagenet__reader}{imagenet\+\_\+reader}$\ast$ lbann\+::imagenet\+\_\+reader\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \hyperlink{classlbann_1_1generic__data__reader_a208ba1223e7aaa75e94b728501f12f86}{lbann\+::generic\+\_\+data\+\_\+reader}.



Reimplemented in \hyperlink{classlbann_1_1data__reader__mnist__siamese_a0b9750c72f9fdb28499b6dfe70bc9a6f}{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}, \hyperlink{classlbann_1_1data__reader__multi__images_a46e1b7fab6ac5af4398cb9b5da900a74}{lbann\+::data\+\_\+reader\+\_\+multi\+\_\+images}, \hyperlink{classlbann_1_1data__reader__triplet_aa390c4e801dfa367895ef0904daa0b77}{lbann\+::data\+\_\+reader\+\_\+triplet}, and \hyperlink{classlbann_1_1imagenet__reader__single_ac19ea9ae8887d86ef616099c2d93d699}{lbann\+::imagenet\+\_\+reader\+\_\+single}.



Definition at line 44 of file data\+\_\+reader\+\_\+imagenet.\+hpp.


\begin{DoxyCode}
44 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1imagenet__reader_a642331b94cdc3caad8335d65d096141c}{imagenet\_reader}(*\textcolor{keyword}{this}); \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a71be5220be24de5caf00d2e422b750f2_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a5c0662ebaa378f7f5b4448f4d207e872}\label{classlbann_1_1imagenet__reader_a5c0662ebaa378f7f5b4448f4d207e872}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!create\+\_\+datum\+\_\+view@{create\+\_\+datum\+\_\+view}}
\index{create\+\_\+datum\+\_\+view@{create\+\_\+datum\+\_\+view}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{create\+\_\+datum\+\_\+view()}{create\_datum\_view()}}
{\footnotesize\ttfamily \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} lbann\+::imagenet\+\_\+reader\+::create\+\_\+datum\+\_\+view (\begin{DoxyParamCaption}\item[{\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{X,  }\item[{const int}]{mb\+\_\+idx }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 122 of file data\+\_\+reader\+\_\+imagenet.\+cpp.


\begin{DoxyCode}
122                                                                      \{
123   \textcolor{keywordflow}{return} El::View(X, El::IR(0, X.Height()), El::IR(mb\_idx, mb\_idx + 1));
124 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a5c0662ebaa378f7f5b4448f4d207e872_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a6659e90c0243da40f214a877f65eb8ac}\label{classlbann_1_1imagenet__reader_a6659e90c0243da40f214a877f65eb8ac}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!fetch\+\_\+datum@{fetch\+\_\+datum}}
\index{fetch\+\_\+datum@{fetch\+\_\+datum}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{fetch\+\_\+datum()}{fetch\_datum()}}
{\footnotesize\ttfamily bool lbann\+::imagenet\+\_\+reader\+::fetch\+\_\+datum (\begin{DoxyParamCaption}\item[{\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{X,  }\item[{int}]{data\+\_\+id,  }\item[{int}]{mb\+\_\+idx,  }\item[{int}]{tid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Fetch a single sample into a matrix. 
\begin{DoxyParams}{Parameters}
{\em X} & The matrix to load data into. \\
\hline
{\em data\+\_\+id} & The index of the datum to fetch. \\
\hline
{\em mb\+\_\+idx} & The index within the mini-\/batch. \\
\hline
\end{DoxyParams}


Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a0a3cd87ed4a7057df185e0087f2d21c1}{lbann\+::generic\+\_\+data\+\_\+reader}.



Reimplemented in \hyperlink{classlbann_1_1imagenet__reader__single_a77c576d6085d4a8674322275dd9bd133}{lbann\+::imagenet\+\_\+reader\+\_\+single}.



Definition at line 126 of file data\+\_\+reader\+\_\+imagenet.\+cpp.


\begin{DoxyCode}
126                                                                           \{
127   \textcolor{keyword}{const} std::string imagepath = \hyperlink{classlbann_1_1generic__data__reader_ab4c6c2d4ba40ece809ce896828c8ff03}{get\_file\_dir}() + \hyperlink{classlbann_1_1image__data__reader_ae3fc949bd08c45ceafb1a03503261008}{m\_image\_list}[data\_id].first;
128 
129   \textcolor{keywordtype}{int} width=0, height=0, img\_type=0;
130 
131   std::vector<unsigned char> *image\_buf;
132 
133   \hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{::Mat} X\_v = \hyperlink{classlbann_1_1imagenet__reader_a5c0662ebaa378f7f5b4448f4d207e872}{create\_datum\_view}(X, mb\_idx);
134 
135   \textcolor{keywordtype}{bool} ret;
136   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store} != \textcolor{keyword}{nullptr}) \{
137     \hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store}->\hyperlink{classlbann_1_1generic__data__store_a2abb3d0327b528d36e23fcef9b937798}{get\_data\_buf}(data\_id, image\_buf, 0);
138     ret = \hyperlink{classlbann_1_1image__utils_ac324a04f877601387cfb10750f1f6b8d}{lbann::image\_utils::load\_image}(*image\_buf, width, height, img\_type,
       *(\hyperlink{classlbann_1_1imagenet__reader_a1e0d0ed4ac529de3e9f735512f5e3dd8}{m\_pps}[tid]), X\_v);
139   \} \textcolor{keywordflow}{else} \{
140     ret = \hyperlink{classlbann_1_1image__utils_ac324a04f877601387cfb10750f1f6b8d}{lbann::image\_utils::load\_image}(imagepath, width, height, img\_type, 
      *(\hyperlink{classlbann_1_1imagenet__reader_a1e0d0ed4ac529de3e9f735512f5e3dd8}{m\_pps}[tid]), X\_v);
141   \}
142 
143   \textcolor{keywordflow}{if}(!ret) \{
144     \textcolor{keywordflow}{throw} lbann\_exception(std::string\{\} + \_\_FILE\_\_ + \textcolor{stringliteral}{" "} + std::to\_string(\_\_LINE\_\_) + \textcolor{stringliteral}{" "}
145                           + \hyperlink{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}{get\_type}() + \textcolor{stringliteral}{": image\_utils::load\_image failed to load - "}
146                           + imagepath);
147   \}
148   \textcolor{keywordflow}{if}((width * height * CV\_MAT\_CN(img\_type)) != \hyperlink{classlbann_1_1image__data__reader_af512f1f866c0f654309b7f28886dca9a}{m\_image\_linearized\_size}) \{
149     \textcolor{keywordflow}{throw} lbann\_exception(std::string\{\} + \_\_FILE\_\_ + \textcolor{stringliteral}{" "} + std::to\_string(\_\_LINE\_\_) + \textcolor{stringliteral}{" "}
150                           + \hyperlink{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}{get\_type}() + \textcolor{stringliteral}{": mismatch data size -- either width, height or channel -
       "}
151                           + imagepath + \textcolor{stringliteral}{"[w,h,c]=["} + std::to\_string(width) + \textcolor{stringliteral}{"x"} + std::to\_string(height)
152                           + \textcolor{stringliteral}{"x"} + std::to\_string(CV\_MAT\_CN(img\_type)) + \textcolor{stringliteral}{"]"});
153   \}
154   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
155 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a6659e90c0243da40f214a877f65eb8ac_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a6659e90c0243da40f214a877f65eb8ac_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}\label{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!get\+\_\+type@{get\+\_\+type}}
\index{get\+\_\+type@{get\+\_\+type}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{get\+\_\+type()}{get\_type()}}
{\footnotesize\ttfamily std\+::string lbann\+::imagenet\+\_\+reader\+::get\+\_\+type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Return this data\+\_\+reader\textquotesingle{}s type 

Implements \hyperlink{classlbann_1_1generic__data__reader_abeb849fb8e10b4fa317c90bc33f61758}{lbann\+::generic\+\_\+data\+\_\+reader}.



Reimplemented in \hyperlink{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604}{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}, \hyperlink{classlbann_1_1data__reader__multi__images_a9939a88a40caf7b2a27de08deca54ac1}{lbann\+::data\+\_\+reader\+\_\+multi\+\_\+images}, \hyperlink{classlbann_1_1data__reader__triplet_a7ff627eed9a4671129cbf7fb9ca11871}{lbann\+::data\+\_\+reader\+\_\+triplet}, and \hyperlink{classlbann_1_1imagenet__reader__single_aecd9cec6777e4a7485daa5b0396afee0}{lbann\+::imagenet\+\_\+reader\+\_\+single}.



Definition at line 46 of file data\+\_\+reader\+\_\+imagenet.\+hpp.


\begin{DoxyCode}
46                                       \{
47     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"imagenet\_reader"};
48   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a5ea15cc16aa679a2cb549b44eb77f323}\label{classlbann_1_1imagenet__reader_a5ea15cc16aa679a2cb549b44eb77f323}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1imagenet__reader}{imagenet\+\_\+reader} \& lbann\+::imagenet\+\_\+reader\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1imagenet__reader}{imagenet\+\_\+reader} \&}]{rhs }\end{DoxyParamCaption})}



Definition at line 59 of file data\+\_\+reader\+\_\+imagenet.\+cpp.


\begin{DoxyCode}
59                                                                       \{
60   \textcolor{comment}{// check for self-assignment}
61   \textcolor{keywordflow}{if} (\textcolor{keyword}{this} == &rhs) \{
62     \textcolor{keywordflow}{return} (*\textcolor{keyword}{this});
63   \}
64 
65   \hyperlink{classlbann_1_1image__data__reader_a76a0b52eafb9ad133fb45fec7cf44700}{image\_data\_reader::operator=}(rhs);
66 
67   \textcolor{keywordflow}{if} (rhs.m\_pps.size() == 0u || !rhs.m\_pps[0]) \{
68     std::stringstream err;
69     err << \_\_FILE\_\_<<\textcolor{stringliteral}{" "}<<\_\_LINE\_\_<< \textcolor{stringliteral}{" :: "} << \hyperlink{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}{get\_type}() << \textcolor{stringliteral}{" construction error: no image
       processor"};
70     \textcolor{keywordflow}{throw} lbann\_exception(err.str());
71   \}
72   \hyperlink{classlbann_1_1imagenet__reader_a1b642b5eb01b209e72bdd8dfa139cafd}{replicate\_processor}(*rhs.m\_pps[0]);
73   \textcolor{keywordflow}{return} (*\textcolor{keyword}{this});
74 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a5ea15cc16aa679a2cb549b44eb77f323_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a5ea15cc16aa679a2cb549b44eb77f323_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a1b642b5eb01b209e72bdd8dfa139cafd}\label{classlbann_1_1imagenet__reader_a1b642b5eb01b209e72bdd8dfa139cafd}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!replicate\+\_\+processor@{replicate\+\_\+processor}}
\index{replicate\+\_\+processor@{replicate\+\_\+processor}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{replicate\+\_\+processor()}{replicate\_processor()}}
{\footnotesize\ttfamily bool lbann\+::imagenet\+\_\+reader\+::replicate\+\_\+processor (\begin{DoxyParamCaption}\item[{const cv\+\_\+process \&}]{pp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Replicate image processor for each Open\+MP thread. 



Definition at line 88 of file data\+\_\+reader\+\_\+imagenet.\+cpp.


\begin{DoxyCode}
88                                                               \{
89   \textcolor{keyword}{const} \textcolor{keywordtype}{int} nthreads = omp\_get\_max\_threads();
90   \hyperlink{classlbann_1_1imagenet__reader_a1e0d0ed4ac529de3e9f735512f5e3dd8}{m\_pps}.resize(nthreads);
91 
92   \textcolor{comment}{// Construct thread private preprocessing objects out of a shared pointer}
93 \textcolor{preprocessor}{  #pragma omp parallel for schedule(static, 1)}
94   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < nthreads; ++i) \{
95     \textcolor{comment}{//auto ppu = std::make\_unique<cv\_process>(pp); // c++14}
96     std::unique\_ptr<cv\_process> ppu(\textcolor{keyword}{new} cv\_process(pp));
97     \hyperlink{classlbann_1_1imagenet__reader_a1e0d0ed4ac529de3e9f735512f5e3dd8}{m\_pps}[i] = std::move(ppu);
98   \}
99 
100   \textcolor{keywordtype}{bool} ok = \textcolor{keyword}{true};
101   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; ok && (i < nthreads); ++i) \{
102     \textcolor{keywordflow}{if} (!\hyperlink{classlbann_1_1imagenet__reader_a1e0d0ed4ac529de3e9f735512f5e3dd8}{m\_pps}[i]) ok = \textcolor{keyword}{false};
103   \}
104 
105   \textcolor{keywordflow}{if} (!ok || (nthreads <= 0)) \{
106     std::stringstream err;
107     err << \_\_FILE\_\_<<\textcolor{stringliteral}{" "}<<\_\_LINE\_\_<< \textcolor{stringliteral}{" :: "} << \hyperlink{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}{get\_type}() << \textcolor{stringliteral}{" cannot replicate image processor"};
108     \textcolor{keywordflow}{throw} lbann\_exception(err.str());
109     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
110   \}
111 
112   \textcolor{keyword}{const} std::vector<unsigned int> dims = pp.get\_data\_dims();
113   \textcolor{keywordflow}{if} ((dims.size() == 2u) && (dims[0] != 0u) && (dims[1] != 0u)) \{
114     \hyperlink{classlbann_1_1image__data__reader_af001f3d1c0f1c580b66988233b3a64f0}{m\_image\_width} = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(dims[0]);
115     \hyperlink{classlbann_1_1image__data__reader_a0632efa3deaa9d61e671f741909eb3fe}{m\_image\_height} = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(dims[1]);
116     \hyperlink{classlbann_1_1image__data__reader_a0164b0e3abbe92daef73b36fb925403e}{set\_linearized\_image\_size}();
117   \}
118 
119   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
120 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a1b642b5eb01b209e72bdd8dfa139cafd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a1b642b5eb01b209e72bdd8dfa139cafd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_ad1e108315d659509a3e166c2f8a4941f}\label{classlbann_1_1imagenet__reader_ad1e108315d659509a3e166c2f8a4941f}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!set\+\_\+defaults@{set\+\_\+defaults}}
\index{set\+\_\+defaults@{set\+\_\+defaults}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{set\+\_\+defaults()}{set\_defaults()}}
{\footnotesize\ttfamily void lbann\+::imagenet\+\_\+reader\+::set\+\_\+defaults (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Set the default values for the width, the height, the number of channels, and the number of labels of an image. 



Reimplemented from \hyperlink{classlbann_1_1image__data__reader_a8e9dbeaa0239d56597455cc23787a21d}{lbann\+::image\+\_\+data\+\_\+reader}.



Reimplemented in \hyperlink{classlbann_1_1data__reader__multi__images_a5abe6981d750bc145e50f6141772805c}{lbann\+::data\+\_\+reader\+\_\+multi\+\_\+images}, \hyperlink{classlbann_1_1data__reader__mnist__siamese_a7e1c9530b5d56a0835db8a30af980164}{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}, and \hyperlink{classlbann_1_1data__reader__triplet_a88bc385a2d42e9f78a768ff496036843}{lbann\+::data\+\_\+reader\+\_\+triplet}.



Definition at line 79 of file data\+\_\+reader\+\_\+imagenet.\+cpp.


\begin{DoxyCode}
79                                    \{
80   \hyperlink{classlbann_1_1image__data__reader_af001f3d1c0f1c580b66988233b3a64f0}{m\_image\_width} = 256;
81   \hyperlink{classlbann_1_1image__data__reader_a0632efa3deaa9d61e671f741909eb3fe}{m\_image\_height} = 256;
82   \hyperlink{classlbann_1_1image__data__reader_aab1a440f361521dc7bd583cefe1061f8}{m\_image\_num\_channels} = 3;
83   \hyperlink{classlbann_1_1image__data__reader_a0164b0e3abbe92daef73b36fb925403e}{set\_linearized\_image\_size}();
84   \hyperlink{classlbann_1_1image__data__reader_af280e8758a6ec3acee7c62e6351d17e0}{m\_num\_labels} = 1000;
85 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_ad1e108315d659509a3e166c2f8a4941f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_ad1e108315d659509a3e166c2f8a4941f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a17af38eff1c3aee001d263248b8406a1}\label{classlbann_1_1imagenet__reader_a17af38eff1c3aee001d263248b8406a1}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!setup\+\_\+data\+\_\+store@{setup\+\_\+data\+\_\+store}}
\index{setup\+\_\+data\+\_\+store@{setup\+\_\+data\+\_\+store}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{setup\+\_\+data\+\_\+store()}{setup\_data\_store()}}
{\footnotesize\ttfamily void lbann\+::imagenet\+\_\+reader\+::setup\+\_\+data\+\_\+store (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



sets up a data\+\_\+store. 



Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a8b2a09d38512fc11f1b9d572c89100a7}{lbann\+::generic\+\_\+data\+\_\+reader}.



Reimplemented in \hyperlink{classlbann_1_1data__reader__multi__images_ac4c70724fe5f1378a81394cc2e686297}{lbann\+::data\+\_\+reader\+\_\+multi\+\_\+images}, \hyperlink{classlbann_1_1data__reader__mnist__siamese_a410d8aa510fb2f3f4d1a257d5b308819}{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}, and \hyperlink{classlbann_1_1data__reader__triplet_a2cd6fd46a7d2d90ccd754404683834c6}{lbann\+::data\+\_\+reader\+\_\+triplet}.



Definition at line 157 of file data\+\_\+reader\+\_\+imagenet.\+cpp.


\begin{DoxyCode}
157                                                \{
158   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store} != \textcolor{keyword}{nullptr}) \{
159     \textcolor{keyword}{delete} \hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store};
160   \}
161   \hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store} = \textcolor{keyword}{new} data\_store\_imagenet(\textcolor{keyword}{this}, m);
162   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store} != \textcolor{keyword}{nullptr}) \{
163     \hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store}->\hyperlink{classlbann_1_1generic__data__store_a1cff17def02ee21b6ca0befeb04bb582}{setup}();
164   \}
165 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a17af38eff1c3aee001d263248b8406a1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1imagenet__reader_a17af38eff1c3aee001d263248b8406a1_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1imagenet__reader_a1e0d0ed4ac529de3e9f735512f5e3dd8}\label{classlbann_1_1imagenet__reader_a1e0d0ed4ac529de3e9f735512f5e3dd8}} 
\index{lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}!m\+\_\+pps@{m\+\_\+pps}}
\index{m\+\_\+pps@{m\+\_\+pps}!lbann\+::imagenet\+\_\+reader@{lbann\+::imagenet\+\_\+reader}}
\subsubsection{\texorpdfstring{m\+\_\+pps}{m\_pps}}
{\footnotesize\ttfamily std\+::vector$<$std\+::unique\+\_\+ptr$<$cv\+\_\+process$>$ $>$ lbann\+::imagenet\+\_\+reader\+::m\+\_\+pps\hspace{0.3cm}{\ttfamily [protected]}}



preprocessor duplicated for each omp thread 



Definition at line 61 of file data\+\_\+reader\+\_\+imagenet.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/data\+\_\+readers/\hyperlink{data__reader__imagenet_8hpp}{data\+\_\+reader\+\_\+imagenet.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/data\+\_\+readers/\hyperlink{data__reader__imagenet_8cpp}{data\+\_\+reader\+\_\+imagenet.\+cpp}\end{DoxyCompactItemize}
