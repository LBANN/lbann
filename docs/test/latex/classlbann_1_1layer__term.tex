\hypertarget{classlbann_1_1layer__term}{}\section{lbann\+:\+:layer\+\_\+term Class Reference}
\label{classlbann_1_1layer__term}\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}


{\ttfamily \#include $<$layer\+\_\+term.\+hpp$>$}



Inheritance diagram for lbann\+:\+:layer\+\_\+term\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{classlbann_1_1layer__term__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:layer\+\_\+term\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{classlbann_1_1layer__term__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1layer__term_a5c9eec2b5212adc5dc947ba2e9c88802}{layer\+\_\+term} (\hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type} scale\+\_\+factor=\hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type}(1))
\item 
\hyperlink{classlbann_1_1layer__term}{layer\+\_\+term} $\ast$ \hyperlink{classlbann_1_1layer__term_a20820da7fd752572579a2dbaaae2ed24}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1layer__term_a4942422215408e724e68b5df8b20b715}{name} () const override
\item 
void \hyperlink{classlbann_1_1layer__term_a04ca36543288fb9c55ab99cc0cc2a648}{set\+\_\+evaluation\+\_\+layer} (\hyperlink{classlbann_1_1Layer}{Layer} $\ast$l)
\item 
void \hyperlink{classlbann_1_1layer__term_ae6d84339fb80384ca2bf898fb854a7c9}{setup} (\hyperlink{classlbann_1_1model}{model} \&m) override
\item 
void \hyperlink{classlbann_1_1layer__term_ae2ab6b694701db724345573416ce0427}{start\+\_\+evaluation} () override
\item 
\hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type} \hyperlink{classlbann_1_1layer__term_a2b0fdcf6a0dd7bea797b5ef1b4082f70}{finish\+\_\+evaluation} () override
\item 
void \hyperlink{classlbann_1_1layer__term_a857df1636853ea9b805611c55ff791e3}{differentiate} () override
\item 
void \hyperlink{classlbann_1_1layer__term_ab082c3a6feb225abb8e55595373532bf}{compute\+\_\+weight\+\_\+regularization} () override
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 35 of file layer\+\_\+term.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1layer__term_a5c9eec2b5212adc5dc947ba2e9c88802}\label{classlbann_1_1layer__term_a5c9eec2b5212adc5dc947ba2e9c88802}} 
\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}!layer\+\_\+term@{layer\+\_\+term}}
\index{layer\+\_\+term@{layer\+\_\+term}!lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}
\subsubsection{\texorpdfstring{layer\+\_\+term()}{layer\_term()}}
{\footnotesize\ttfamily lbann\+::layer\+\_\+term\+::layer\+\_\+term (\begin{DoxyParamCaption}\item[{\hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type}}]{scale\+\_\+factor = {\ttfamily \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type}(1)} }\end{DoxyParamCaption})}



Definition at line 31 of file layer\+\_\+term.\+cpp.


\begin{DoxyCode}
32   : \hyperlink{classlbann_1_1objective__function__term_a8c019e3c880f38dc20275e395acaeca1}{objective\_function\_term}(scale\_factor) \{\}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1layer__term_a5c9eec2b5212adc5dc947ba2e9c88802_icgraph}
\end{center}
\end{figure}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1layer__term_ab082c3a6feb225abb8e55595373532bf}\label{classlbann_1_1layer__term_ab082c3a6feb225abb8e55595373532bf}} 
\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}!compute\+\_\+weight\+\_\+regularization@{compute\+\_\+weight\+\_\+regularization}}
\index{compute\+\_\+weight\+\_\+regularization@{compute\+\_\+weight\+\_\+regularization}!lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}
\subsubsection{\texorpdfstring{compute\+\_\+weight\+\_\+regularization()}{compute\_weight\_regularization()}}
{\footnotesize\ttfamily void lbann\+::layer\+\_\+term\+::compute\+\_\+weight\+\_\+regularization (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Compute the gradient of the weight regularization term. The gradient is computed w.\+r.\+t. the weights. 

Implements \hyperlink{classlbann_1_1objective__function__term_a134cf89caed45527bbe9d811a0b93dfc}{lbann\+::objective\+\_\+function\+\_\+term}.



Definition at line 51 of file layer\+\_\+term.\+hpp.


\begin{DoxyCode}
51 \{\};
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1layer__term_a20820da7fd752572579a2dbaaae2ed24}\label{classlbann_1_1layer__term_a20820da7fd752572579a2dbaaae2ed24}} 
\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}!copy@{copy}}
\index{copy@{copy}!lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1layer__term}{layer\+\_\+term}$\ast$ lbann\+::layer\+\_\+term\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Copy function. 

Implements \hyperlink{classlbann_1_1objective__function__term_ae98a4ec173a602ad55d1df20dadd4cb9}{lbann\+::objective\+\_\+function\+\_\+term}.



Definition at line 38 of file layer\+\_\+term.\+hpp.


\begin{DoxyCode}
38 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1layer__term_a5c9eec2b5212adc5dc947ba2e9c88802}{layer\_term}(*\textcolor{keyword}{this}); \} 
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=335pt]{classlbann_1_1layer__term_a20820da7fd752572579a2dbaaae2ed24_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1layer__term_a857df1636853ea9b805611c55ff791e3}\label{classlbann_1_1layer__term_a857df1636853ea9b805611c55ff791e3}} 
\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}!differentiate@{differentiate}}
\index{differentiate@{differentiate}!lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}
\subsubsection{\texorpdfstring{differentiate()}{differentiate()}}
{\footnotesize\ttfamily void lbann\+::layer\+\_\+term\+::differentiate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Compute the gradient of the objective function term. The gradient is computed w.\+r.\+t. the objective function term inputs. This should include the scaling factor. 

Implements \hyperlink{classlbann_1_1objective__function__term_ad009c3cfbe1cf2fbb6cce015b16fdac5}{lbann\+::objective\+\_\+function\+\_\+term}.



Definition at line 72 of file layer\+\_\+term.\+cpp.


\begin{DoxyCode}
72                                \{
73   \textcolor{keyword}{auto}&& eval = \textcolor{keyword}{dynamic\_cast<}evaluation\_layer<data\_layout::DATA\_PARALLEL>*\textcolor{keyword}{>}(
      \hyperlink{classlbann_1_1objective__function__term_a9269cf0a237eacd1e220ba2739f44334}{m\_layers}[0]);
74   eval->set\_scale(\hyperlink{classlbann_1_1objective__function__term_a59a544b8ff0455ed5091de3bf0d81c3c}{m\_scale\_factor});
75 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=334pt]{classlbann_1_1layer__term_a857df1636853ea9b805611c55ff791e3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=339pt]{classlbann_1_1layer__term_a857df1636853ea9b805611c55ff791e3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1layer__term_a2b0fdcf6a0dd7bea797b5ef1b4082f70}\label{classlbann_1_1layer__term_a2b0fdcf6a0dd7bea797b5ef1b4082f70}} 
\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}!finish\+\_\+evaluation@{finish\+\_\+evaluation}}
\index{finish\+\_\+evaluation@{finish\+\_\+evaluation}!lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}
\subsubsection{\texorpdfstring{finish\+\_\+evaluation()}{finish\_evaluation()}}
{\footnotesize\ttfamily \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{Eval\+Type} lbann\+::layer\+\_\+term\+::finish\+\_\+evaluation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Complete evaluation of the objective function term. 

Implements \hyperlink{classlbann_1_1objective__function__term_a7a82f2cdbc954655ac860896306aed0c}{lbann\+::objective\+\_\+function\+\_\+term}.



Definition at line 65 of file layer\+\_\+term.\+cpp.


\begin{DoxyCode}
65                                        \{
66   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1objective__function__term_a59a544b8ff0455ed5091de3bf0d81c3c}{m\_scale\_factor} == \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{EvalType}(0)) \{ \textcolor{keywordflow}{return} \hyperlink{base_8hpp_a3266f5ac18504bbadea983c109566867}{EvalType}(0); \}
67   \textcolor{keyword}{auto}&& eval = \textcolor{keyword}{dynamic\_cast<}evaluation\_layer<data\_layout::DATA\_PARALLEL>*\textcolor{keyword}{>}(
      \hyperlink{classlbann_1_1objective__function__term_a9269cf0a237eacd1e220ba2739f44334}{m\_layers}[0]);
68   eval->set\_scale(\hyperlink{classlbann_1_1objective__function__term_a59a544b8ff0455ed5091de3bf0d81c3c}{m\_scale\_factor});
69   \textcolor{keywordflow}{return} eval->get\_value();
70 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=334pt]{classlbann_1_1layer__term_a2b0fdcf6a0dd7bea797b5ef1b4082f70_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=339pt]{classlbann_1_1layer__term_a2b0fdcf6a0dd7bea797b5ef1b4082f70_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1layer__term_a4942422215408e724e68b5df8b20b715}\label{classlbann_1_1layer__term_a4942422215408e724e68b5df8b20b715}} 
\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}!name@{name}}
\index{name@{name}!lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}
\subsubsection{\texorpdfstring{name()}{name()}}
{\footnotesize\ttfamily std\+::string lbann\+::layer\+\_\+term\+::name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Get the name of the objective function term. 

Implements \hyperlink{classlbann_1_1objective__function__term_a964fbfad3dd0434aa8f32c5fedf1079a}{lbann\+::objective\+\_\+function\+\_\+term}.



Definition at line 39 of file layer\+\_\+term.\+hpp.


\begin{DoxyCode}
39 \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"evaluation layer term"}; \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1layer__term_a4942422215408e724e68b5df8b20b715_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1layer__term_a04ca36543288fb9c55ab99cc0cc2a648}\label{classlbann_1_1layer__term_a04ca36543288fb9c55ab99cc0cc2a648}} 
\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}!set\+\_\+evaluation\+\_\+layer@{set\+\_\+evaluation\+\_\+layer}}
\index{set\+\_\+evaluation\+\_\+layer@{set\+\_\+evaluation\+\_\+layer}!lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}
\subsubsection{\texorpdfstring{set\+\_\+evaluation\+\_\+layer()}{set\_evaluation\_layer()}}
{\footnotesize\ttfamily void lbann\+::layer\+\_\+term\+::set\+\_\+evaluation\+\_\+layer (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1Layer}{Layer} $\ast$}]{l }\end{DoxyParamCaption})}



Definition at line 34 of file layer\+\_\+term.\+cpp.


\begin{DoxyCode}
34                                               \{
35   this->\hyperlink{classlbann_1_1objective__function__term_a9269cf0a237eacd1e220ba2739f44334}{m\_layers}.assign(1, l);
36 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{classlbann_1_1layer__term_a04ca36543288fb9c55ab99cc0cc2a648_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1layer__term_ae6d84339fb80384ca2bf898fb854a7c9}\label{classlbann_1_1layer__term_ae6d84339fb80384ca2bf898fb854a7c9}} 
\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}!setup@{setup}}
\index{setup@{setup}!lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}
\subsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily void lbann\+::layer\+\_\+term\+::setup (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} \&}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Setup objective function term. 

Reimplemented from \hyperlink{classlbann_1_1objective__function__term_a6c8dbdf18aac8676098189fb7b178e91}{lbann\+::objective\+\_\+function\+\_\+term}.



Definition at line 38 of file layer\+\_\+term.\+cpp.


\begin{DoxyCode}
38                                \{
39   \hyperlink{classlbann_1_1objective__function__term_a6c8dbdf18aac8676098189fb7b178e91}{objective\_function\_term::setup}(m);
40   std::stringstream err;
41 
42   \textcolor{comment}{// Make sure layer term points to an evaluation layer}
43   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1objective__function__term_a9269cf0a237eacd1e220ba2739f44334}{m\_layers}.size() != 1) \{
44     err << \textcolor{stringliteral}{"layer term in objective function points to an invalid number of layers "}
45         << \textcolor{stringliteral}{"(expected 1, found "} << \hyperlink{classlbann_1_1objective__function__term_a9269cf0a237eacd1e220ba2739f44334}{m\_layers}.size() << \textcolor{stringliteral}{")"};
46     \hyperlink{base_8hpp_a80b1d707117e968a6951b7222e4b2b87}{LBANN\_ERROR}(err.str());
47   \}
48   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1objective__function__term_a9269cf0a237eacd1e220ba2739f44334}{m\_layers}[0] == \textcolor{keyword}{nullptr}) \{
49     \hyperlink{base_8hpp_a80b1d707117e968a6951b7222e4b2b87}{LBANN\_ERROR}(\textcolor{stringliteral}{"layer term in objective function points to a null pointer"});
50   \}
51   \textcolor{keyword}{auto}&& eval = \textcolor{keyword}{dynamic\_cast<}evaluation\_layer<data\_layout::DATA\_PARALLEL>*\textcolor{keyword}{>}(
      \hyperlink{classlbann_1_1objective__function__term_a9269cf0a237eacd1e220ba2739f44334}{m\_layers}[0]);
52   \textcolor{keywordflow}{if} (eval == \textcolor{keyword}{nullptr}) \{
53     err << \textcolor{stringliteral}{"layer term in objective function must point to an evaluation layer, "}
54         << \textcolor{stringliteral}{"but "} << \hyperlink{classlbann_1_1objective__function__term_a9269cf0a237eacd1e220ba2739f44334}{m\_layers}[0]->get\_name() << \textcolor{stringliteral}{" is type "} << \hyperlink{classlbann_1_1objective__function__term_a9269cf0a237eacd1e220ba2739f44334}{m\_layers}[0]->get\_type();
55     \hyperlink{base_8hpp_a80b1d707117e968a6951b7222e4b2b87}{LBANN\_ERROR}(err.str());
56   \}
57 
58   \textcolor{comment}{// Set scaling factor}
59   eval->set\_scale(\hyperlink{classlbann_1_1objective__function__term_a59a544b8ff0455ed5091de3bf0d81c3c}{m\_scale\_factor});
60 
61 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1layer__term_ae6d84339fb80384ca2bf898fb854a7c9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=339pt]{classlbann_1_1layer__term_ae6d84339fb80384ca2bf898fb854a7c9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1layer__term_ae2ab6b694701db724345573416ce0427}\label{classlbann_1_1layer__term_ae2ab6b694701db724345573416ce0427}} 
\index{lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}!start\+\_\+evaluation@{start\+\_\+evaluation}}
\index{start\+\_\+evaluation@{start\+\_\+evaluation}!lbann\+::layer\+\_\+term@{lbann\+::layer\+\_\+term}}
\subsubsection{\texorpdfstring{start\+\_\+evaluation()}{start\_evaluation()}}
{\footnotesize\ttfamily void lbann\+::layer\+\_\+term\+::start\+\_\+evaluation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Start evaluation of the objective function term. This should include the scaling factor. The result is not available until finish\+\_\+evaluation has been called. 

Implements \hyperlink{classlbann_1_1objective__function__term_a0af4dfd71fb30e43d1ae7611172ad9b0}{lbann\+::objective\+\_\+function\+\_\+term}.



Definition at line 63 of file layer\+\_\+term.\+cpp.


\begin{DoxyCode}
63 \{\}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=339pt]{classlbann_1_1layer__term_ae2ab6b694701db724345573416ce0427_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/objective\+\_\+functions/\hyperlink{layer__term_8hpp}{layer\+\_\+term.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/objective\+\_\+functions/\hyperlink{layer__term_8cpp}{layer\+\_\+term.\+cpp}\end{DoxyCompactItemize}
