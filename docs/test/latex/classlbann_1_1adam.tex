\hypertarget{classlbann_1_1adam}{}\section{lbann\+:\+:adam Class Reference}
\label{classlbann_1_1adam}\index{lbann\+::adam@{lbann\+::adam}}


{\ttfamily \#include $<$adam.\+hpp$>$}



Inheritance diagram for lbann\+:\+:adam\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=167pt]{classlbann_1_1adam__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:adam\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam__coll__graph}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structlbann_1_1adam_1_1packing__header}{packing\+\_\+header}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1adam_a9d6848fa245bc2adfe142ae3aeb4e33d}{adam} (\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm}, Data\+Type learning\+\_\+rate, Data\+Type beta1=Data\+Type(0.\+9), Data\+Type beta2=Data\+Type(0.\+99), Data\+Type eps=Data\+Type(1e-\/8), cudnn\+::cudnn\+\_\+manager $\ast$cudnn=nullptr)
\item 
\hyperlink{classlbann_1_1adam_a77464b030ec2be620155eff22acdff76}{adam} (const \hyperlink{classlbann_1_1adam}{adam} \&other)
\item 
\hyperlink{classlbann_1_1adam}{adam} \& \hyperlink{classlbann_1_1adam_a00051b788b2bb34102a6bad5a380fc85}{operator=} (const \hyperlink{classlbann_1_1adam}{adam} \&other)
\item 
\hyperlink{classlbann_1_1adam_a5ab2783191786e2c9c1c71d6edecfb2e}{$\sim$adam} () override
\item 
\hyperlink{classlbann_1_1adam}{adam} $\ast$ \hyperlink{classlbann_1_1adam_a95866f94044a4e7bb34bf35551ade4cc}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1adam_a091b61b0125d2da89d4029dd30ca1ce7}{get\+\_\+type} () const override
\item 
std\+::string \hyperlink{classlbann_1_1adam_a14eb9754e2aa38a732d92b6d42311676}{get\+\_\+description} () const override
\item 
void \hyperlink{classlbann_1_1adam_aea0b1fa44197fe184a6feca5ec5c808e}{setup} (\hyperlink{classlbann_1_1weights}{weights} \&w) override
\item 
void \hyperlink{classlbann_1_1adam_a3bcd1bcbbed2b99c407eb0cd9fd6d449}{step\+\_\+compute} (\hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat} \&values, const \hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat} \&gradient) override
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classlbann_1_1adam_a43e941b596c5d1cc68b795b0399398c4}{pack\+\_\+scalars} (\hyperlink{classlbann_1_1persist}{persist} \&p)
\item 
bool \hyperlink{classlbann_1_1adam_a21a3d2bce0bac5e6c022c5d95ec6348b}{unpack\+\_\+scalars} (\hyperlink{classlbann_1_1persist}{persist} \&p, struct \hyperlink{structlbann_1_1adam_1_1packing__header}{packing\+\_\+header} $\ast$header)
\item 
void \hyperlink{classlbann_1_1adam_ae5b6108946e6a09b4e13e4285350aa05}{unpack\+\_\+header} (struct \hyperlink{structlbann_1_1adam_1_1packing__header}{packing\+\_\+header} \&header)
\item 
bool \hyperlink{classlbann_1_1adam_a8070db0a451bdbc6e86200eaa14f6ac7}{save\+\_\+to\+\_\+checkpoint\+\_\+shared} (\hyperlink{classlbann_1_1persist}{persist} \&p, std\+::string m\+\_\+name) override
\item 
bool \hyperlink{classlbann_1_1adam_aca07e925a4751fc5c10a62fb9c72c896}{load\+\_\+from\+\_\+checkpoint\+\_\+shared} (\hyperlink{classlbann_1_1persist}{persist} \&p, std\+::string m\+\_\+name) override
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
Data\+Type \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\+\_\+beta1}
\item 
Data\+Type \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\+\_\+beta2}
\item 
Data\+Type \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\+\_\+eps}
\item 
Data\+Type \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\+\_\+current\+\_\+beta1}
\item 
Data\+Type \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\+\_\+current\+\_\+beta2}
\item 
\hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat} $\ast$ \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\+\_\+moment1}
\item 
\hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat} $\ast$ \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\+\_\+moment2}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Adam optimizer. Reference\+: Kingma, D. and Ba, J. 2014. Adam\+: A Method for Stochastic Optimization. 

Definition at line 38 of file adam.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1adam_a9d6848fa245bc2adfe142ae3aeb4e33d}\label{classlbann_1_1adam_a9d6848fa245bc2adfe142ae3aeb4e33d}} 
\index{lbann\+::adam@{lbann\+::adam}!adam@{adam}}
\index{adam@{adam}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{adam()}{adam()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily lbann\+::adam\+::adam (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1lbann__comm}{lbann\+\_\+comm} $\ast$}]{comm,  }\item[{Data\+Type}]{learning\+\_\+rate,  }\item[{Data\+Type}]{beta1 = {\ttfamily DataType(0.9)},  }\item[{Data\+Type}]{beta2 = {\ttfamily DataType(0.99)},  }\item[{Data\+Type}]{eps = {\ttfamily DataType(1e-\/8)},  }\item[{\hyperlink{classlbann_1_1cudnn_1_1cudnn__manager}{cudnn\+::cudnn\+\_\+manager} $\ast$}]{cudnn = {\ttfamily nullptr} }\end{DoxyParamCaption})}

Constructor. 

Definition at line 32 of file adam.\+cpp.


\begin{DoxyCode}
38   : \hyperlink{classlbann_1_1optimizer_a136ed79c3f279ecded5be380fb67b05f}{optimizer}(\hyperlink{file__io_8cpp_ab048c6f9fcbcfaa57ce68b00263dbebe}{comm}, learning\_rate),
39     \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1}(beta1),
40     \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2}(beta2),
41     \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps}(eps),
42     \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\_current\_beta1}(1),
43     \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\_current\_beta2}(1),
44     \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}(\textcolor{keyword}{nullptr}),
45     \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}(\textcolor{keyword}{nullptr}) \{\}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=315pt]{classlbann_1_1adam_a9d6848fa245bc2adfe142ae3aeb4e33d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_a77464b030ec2be620155eff22acdff76}\label{classlbann_1_1adam_a77464b030ec2be620155eff22acdff76}} 
\index{lbann\+::adam@{lbann\+::adam}!adam@{adam}}
\index{adam@{adam}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{adam()}{adam()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily lbann\+::adam\+::adam (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1adam}{adam} \&}]{other }\end{DoxyParamCaption})}

Copy constructor. 

Definition at line 47 of file adam.\+cpp.


\begin{DoxyCode}
48   : \hyperlink{classlbann_1_1optimizer_a136ed79c3f279ecded5be380fb67b05f}{optimizer}(other),
49     \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1}(other.m\_beta1),
50     \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2}(other.m\_beta2),
51     \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps}(other.m\_eps),
52     \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\_current\_beta1}(other.m\_current\_beta1),
53     \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\_current\_beta2}(other.m\_current\_beta2),
54     \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}(other.m\_moment1),
55     \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}(other.m\_moment2) \{
56   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1} != \textcolor{keyword}{nullptr}) \{ \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1} = \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}->Copy(); \}
57   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2} != \textcolor{keyword}{nullptr}) \{ \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2} = \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->Copy(); \}
58 \textcolor{preprocessor}{  #ifdef LBANN\_HAS\_CUDNN}
59   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn} != \textcolor{keyword}{nullptr} && other.m\_weights != \textcolor{keyword}{nullptr}) \{
60     \textcolor{keyword}{const} \textcolor{keywordtype}{int} \hyperlink{structlayer__header_ad986e4b92e5b455e066fd349725c6bd9}{height} = other.m\_weights->get\_matrix\_height();
61     \textcolor{keyword}{const} \textcolor{keywordtype}{int} \hyperlink{structlayer__header_af1f45c9c74db048ea424114418f22d50}{width} = other.m\_weights->get\_matrix\_width();
62     m\_moment1\_d = \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->copy(other.m\_moment1\_d, height, width);
63     m\_moment2\_d = \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->copy(other.m\_moment2\_d, height, width);
64   \}
65 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
66 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a77464b030ec2be620155eff22acdff76_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_a5ab2783191786e2c9c1c71d6edecfb2e}\label{classlbann_1_1adam_a5ab2783191786e2c9c1c71d6edecfb2e}} 
\index{lbann\+::adam@{lbann\+::adam}!````~adam@{$\sim$adam}}
\index{````~adam@{$\sim$adam}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{$\sim$adam()}{~adam()}}
{\footnotesize\ttfamily lbann\+::adam\+::$\sim$adam (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}

Destructor. 

Definition at line 111 of file adam.\+cpp.


\begin{DoxyCode}
111             \{
112   \textcolor{keywordflow}{if}(\hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1} != \textcolor{keyword}{nullptr}) \{ \textcolor{keyword}{delete} \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}; \}
113   \textcolor{keywordflow}{if}(\hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2} != \textcolor{keyword}{nullptr}) \{ \textcolor{keyword}{delete} \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}; \}
114 \textcolor{preprocessor}{  #ifdef LBANN\_HAS\_CUDNN}
115   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn} != \textcolor{keyword}{nullptr}) \{
116     \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->deallocate\_on\_gpus(m\_moment1\_d);
117     \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->deallocate\_on\_gpus(m\_moment2\_d);
118   \}
119 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
120 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1adam_a95866f94044a4e7bb34bf35551ade4cc}\label{classlbann_1_1adam_a95866f94044a4e7bb34bf35551ade4cc}} 
\index{lbann\+::adam@{lbann\+::adam}!copy@{copy}}
\index{copy@{copy}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1adam}{adam}$\ast$ lbann\+::adam\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Create a copy. 

Implements \hyperlink{classlbann_1_1optimizer_adf19a1d19d832ebfe70072cc202cdf39}{lbann\+::optimizer}.



Definition at line 57 of file adam.\+hpp.


\begin{DoxyCode}
57 \{ \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1adam_a9d6848fa245bc2adfe142ae3aeb4e33d}{adam}(*\textcolor{keyword}{this}); \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=315pt]{classlbann_1_1adam_a95866f94044a4e7bb34bf35551ade4cc_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_a14eb9754e2aa38a732d92b6d42311676}\label{classlbann_1_1adam_a14eb9754e2aa38a732d92b6d42311676}} 
\index{lbann\+::adam@{lbann\+::adam}!get\+\_\+description@{get\+\_\+description}}
\index{get\+\_\+description@{get\+\_\+description}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{get\+\_\+description()}{get\_description()}}
{\footnotesize\ttfamily std\+::string lbann\+::adam\+::get\+\_\+description (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Get a human-\/readable description of the optimizer. 

Reimplemented from \hyperlink{classlbann_1_1optimizer_a66bb8d28dfb41452ac1a75a3efd47723}{lbann\+::optimizer}.



Definition at line 122 of file adam.\+cpp.


\begin{DoxyCode}
122                                       \{
123   std::stringstream ss;
124   ss << \hyperlink{classlbann_1_1optimizer_a66bb8d28dfb41452ac1a75a3efd47723}{optimizer::get\_description}() << \textcolor{stringliteral}{", "}
125      << \textcolor{stringliteral}{"beta1="} << \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1} << \textcolor{stringliteral}{", "}
126      << \textcolor{stringliteral}{"beta2="} << \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2} << \textcolor{stringliteral}{", "}
127      << \textcolor{stringliteral}{"eps="} << \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps};
128   \textcolor{keywordflow}{return} ss.str();
129 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a14eb9754e2aa38a732d92b6d42311676_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a14eb9754e2aa38a732d92b6d42311676_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_a091b61b0125d2da89d4029dd30ca1ce7}\label{classlbann_1_1adam_a091b61b0125d2da89d4029dd30ca1ce7}} 
\index{lbann\+::adam@{lbann\+::adam}!get\+\_\+type@{get\+\_\+type}}
\index{get\+\_\+type@{get\+\_\+type}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{get\+\_\+type()}{get\_type()}}
{\footnotesize\ttfamily std\+::string lbann\+::adam\+::get\+\_\+type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Returns the optimizer name. 

Implements \hyperlink{classlbann_1_1optimizer_a7b7a6814e14eeee157e1cbb7f15dd4ff}{lbann\+::optimizer}.



Definition at line 60 of file adam.\+hpp.


\begin{DoxyCode}
60 \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"adam"}; \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a091b61b0125d2da89d4029dd30ca1ce7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_aca07e925a4751fc5c10a62fb9c72c896}\label{classlbann_1_1adam_aca07e925a4751fc5c10a62fb9c72c896}} 
\index{lbann\+::adam@{lbann\+::adam}!load\+\_\+from\+\_\+checkpoint\+\_\+shared@{load\+\_\+from\+\_\+checkpoint\+\_\+shared}}
\index{load\+\_\+from\+\_\+checkpoint\+\_\+shared@{load\+\_\+from\+\_\+checkpoint\+\_\+shared}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{load\+\_\+from\+\_\+checkpoint\+\_\+shared()}{load\_from\_checkpoint\_shared()}}
{\footnotesize\ttfamily bool lbann\+::adam\+::load\+\_\+from\+\_\+checkpoint\+\_\+shared (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1persist}{persist} \&}]{p,  }\item[{std\+::string}]{m\+\_\+name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}}



Reimplemented from \hyperlink{classlbann_1_1optimizer_a42a52aab9a682fda57c1e639968a44b9}{lbann\+::optimizer}.



Definition at line 234 of file adam.\+cpp.


\begin{DoxyCode}
234                                                                         \{
235   \hyperlink{classlbann_1_1optimizer_a42a52aab9a682fda57c1e639968a44b9}{optimizer::load\_from\_checkpoint\_shared}(p, name\_prefix);
236   \textcolor{keyword}{struct }packing\_header header;
237   \textcolor{keywordflow}{if} (p.get\_rank() == 0) \{
238     \hyperlink{classlbann_1_1adam_a21a3d2bce0bac5e6c022c5d95ec6348b}{unpack\_scalars}(p, &header);
239   \}
240 
241   MPI\_Bcast(&header, \textcolor{keyword}{sizeof}(header), MPI\_BYTE, 0, MPI\_COMM\_WORLD);
242 
243   \hyperlink{classlbann_1_1adam_ae5b6108946e6a09b4e13e4285350aa05}{unpack\_header}(header);
244 
245   \textcolor{keywordtype}{char} l\_name[512];
246   sprintf(l\_name, \textcolor{stringliteral}{"%s\_optimizer\_adam\_moment1\_%lldx%lld.bin"}, name\_prefix.c\_str(), 
      \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}->Height(), \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->Width());
247   p.read\_distmat(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, l\_name, (\hyperlink{base_8hpp_a0fab5387556805cfeac3e7e567bf66c5}{DistMat}*)
      \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1});
248 
249   sprintf(l\_name, \textcolor{stringliteral}{"%s\_optimizer\_adam\_moment2\_%lldx%lld.bin"}, name\_prefix.c\_str(), 
      \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->Height(), \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->Width());
250   p.read\_distmat(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, l\_name, (\hyperlink{base_8hpp_a0fab5387556805cfeac3e7e567bf66c5}{DistMat}*)
      \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2});
251 
252   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
253 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_aca07e925a4751fc5c10a62fb9c72c896_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classlbann_1_1adam_aca07e925a4751fc5c10a62fb9c72c896_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_a00051b788b2bb34102a6bad5a380fc85}\label{classlbann_1_1adam_a00051b788b2bb34102a6bad5a380fc85}} 
\index{lbann\+::adam@{lbann\+::adam}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1adam}{adam} \& lbann\+::adam\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1adam}{adam} \&}]{other }\end{DoxyParamCaption})}

Copy assignment operator. 

Definition at line 68 of file adam.\+cpp.


\begin{DoxyCode}
68                                        \{
69   \hyperlink{classlbann_1_1optimizer_ab7811e0a4d2d9b594140aed78b6de743}{optimizer::operator=}(other);
70   \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1} = other.m\_beta1;
71   \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2} = other.m\_beta2;
72   \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps} = other.m\_eps;
73   \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\_current\_beta1} = other.m\_current\_beta1;
74   \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\_current\_beta2} = other.m\_current\_beta2;
75 
76   \textcolor{comment}{// Copy moment matrices}
77   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1} != \textcolor{keyword}{nullptr} && other.m\_moment1 != \textcolor{keyword}{nullptr}
78       && \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}->DistData() == other.m\_moment1->DistData()) \{
79     El::Copy(*other.m\_moment1, *\hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1});
80   \}
81   \textcolor{keywordflow}{else} \{
82     \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1} != \textcolor{keyword}{nullptr}) \{ \textcolor{keyword}{delete} \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}; \}
83     \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1} = other.m\_moment1;
84     \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1} != \textcolor{keyword}{nullptr}) \{ \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1} = \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}->Copy(); \}
85   \}
86   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2} != \textcolor{keyword}{nullptr} && other.m\_moment2 != \textcolor{keyword}{nullptr}
87       && \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->DistData() == other.m\_moment2->DistData()) \{
88     El::Copy(*other.m\_moment2, *\hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2});
89   \}
90   \textcolor{keywordflow}{else} \{
91     \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2} != \textcolor{keyword}{nullptr}) \{ \textcolor{keyword}{delete} \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}; \}
92     \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2} = other.m\_moment2;
93     \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2} != \textcolor{keyword}{nullptr}) \{ \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2} = \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->Copy(); \}
94   \}
95 
96   \textcolor{comment}{// Copy GPU data}
97 \textcolor{preprocessor}{  #ifdef LBANN\_HAS\_CUDNN}
98   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn} != \textcolor{keyword}{nullptr} && other.m\_weights != \textcolor{keyword}{nullptr}) \{
99     \textcolor{keyword}{const} \textcolor{keywordtype}{int} height = other.m\_weights->get\_matrix\_height();
100     \textcolor{keyword}{const} \textcolor{keywordtype}{int} width = other.m\_weights->get\_matrix\_width();
101     \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->deallocate\_on\_gpus(m\_moment1\_d);
102     \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->deallocate\_on\_gpus(m\_moment2\_d);
103     m\_moment1\_d = \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->copy(other.m\_moment1\_d, height, width);
104     m\_moment2\_d = \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->copy(other.m\_moment2\_d, height, width);
105   \}
106 \textcolor{preprocessor}{  #endif // LBANN\_HAS\_CUDNN}
107 
108   \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
109 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a00051b788b2bb34102a6bad5a380fc85_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_a43e941b596c5d1cc68b795b0399398c4}\label{classlbann_1_1adam_a43e941b596c5d1cc68b795b0399398c4}} 
\index{lbann\+::adam@{lbann\+::adam}!pack\+\_\+scalars@{pack\+\_\+scalars}}
\index{pack\+\_\+scalars@{pack\+\_\+scalars}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{pack\+\_\+scalars()}{pack\_scalars()}}
{\footnotesize\ttfamily bool lbann\+::adam\+::pack\+\_\+scalars (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1persist}{persist} \&}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 112 of file adam.\+hpp.


\begin{DoxyCode}
112                                 \{
113     p.write\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"beta1"}, \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1});
114     p.write\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"beta2"}, \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2});
115     p.write\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"eps"},   \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps});
116     p.write\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"current\_beta1"}, 
      \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\_current\_beta1});
117     p.write\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"current\_beta2"}, 
      \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\_current\_beta2});
118     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
119   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a43e941b596c5d1cc68b795b0399398c4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a43e941b596c5d1cc68b795b0399398c4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_a8070db0a451bdbc6e86200eaa14f6ac7}\label{classlbann_1_1adam_a8070db0a451bdbc6e86200eaa14f6ac7}} 
\index{lbann\+::adam@{lbann\+::adam}!save\+\_\+to\+\_\+checkpoint\+\_\+shared@{save\+\_\+to\+\_\+checkpoint\+\_\+shared}}
\index{save\+\_\+to\+\_\+checkpoint\+\_\+shared@{save\+\_\+to\+\_\+checkpoint\+\_\+shared}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{save\+\_\+to\+\_\+checkpoint\+\_\+shared()}{save\_to\_checkpoint\_shared()}}
{\footnotesize\ttfamily bool lbann\+::adam\+::save\+\_\+to\+\_\+checkpoint\+\_\+shared (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1persist}{persist} \&}]{p,  }\item[{std\+::string}]{m\+\_\+name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}}



Reimplemented from \hyperlink{classlbann_1_1optimizer_afed10c6d8c5bd922f95075abeff711ce}{lbann\+::optimizer}.



Definition at line 216 of file adam.\+cpp.


\begin{DoxyCode}
216                                                                       \{
217   \hyperlink{classlbann_1_1optimizer_afed10c6d8c5bd922f95075abeff711ce}{optimizer::save\_to\_checkpoint\_shared}(p, name\_prefix);
218 \textcolor{comment}{// m\_learning\_rate;}
219 
220   \textcolor{keywordflow}{if} (p.get\_rank() == 0) \{
221     \hyperlink{classlbann_1_1adam_a43e941b596c5d1cc68b795b0399398c4}{pack\_scalars}(p);
222   \}
223 
224   \textcolor{keywordtype}{char} l\_name[512];
225   sprintf(l\_name, \textcolor{stringliteral}{"%s\_optimizer\_adam\_moment1\_%lldx%lld"}, name\_prefix.c\_str(), 
      \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}->Height(), \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->Width());
226   p.write\_distmat(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, l\_name, (\hyperlink{base_8hpp_a0fab5387556805cfeac3e7e567bf66c5}{DistMat}*)
      \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1});
227 
228   sprintf(l\_name, \textcolor{stringliteral}{"%s\_optimizer\_adam\_moment2\_%lldx%lld"}, name\_prefix.c\_str(), 
      \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->Height(), \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->Width());
229   p.write\_distmat(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, l\_name, (\hyperlink{base_8hpp_a0fab5387556805cfeac3e7e567bf66c5}{DistMat}*)
      \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2});
230 
231   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
232 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a8070db0a451bdbc6e86200eaa14f6ac7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a8070db0a451bdbc6e86200eaa14f6ac7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_aea0b1fa44197fe184a6feca5ec5c808e}\label{classlbann_1_1adam_aea0b1fa44197fe184a6feca5ec5c808e}} 
\index{lbann\+::adam@{lbann\+::adam}!setup@{setup}}
\index{setup@{setup}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily void lbann\+::adam\+::setup (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1weights}{weights} \&}]{w }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Setup optimizer. 

Reimplemented from \hyperlink{classlbann_1_1optimizer_a7641a88b3c166df2d974a298622b992b}{lbann\+::optimizer}.



Definition at line 131 of file adam.\+cpp.


\begin{DoxyCode}
131                            \{
132   \hyperlink{classlbann_1_1optimizer_a7641a88b3c166df2d974a298622b992b}{optimizer::setup}(w);
133 
134   \textcolor{comment}{// Allocate matrices}
135   \textcolor{keyword}{const} \textcolor{keywordtype}{int} height = \hyperlink{classlbann_1_1optimizer_a3df20cb0ae2b60430ad4fd235d66c12e}{m\_gradient}->Height();
136   \textcolor{keyword}{const} \textcolor{keywordtype}{int} width = \hyperlink{classlbann_1_1optimizer_a3df20cb0ae2b60430ad4fd235d66c12e}{m\_gradient}->Width();
137   \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1} = \hyperlink{classlbann_1_1optimizer_a3df20cb0ae2b60430ad4fd235d66c12e}{m\_gradient}->Construct(\hyperlink{classlbann_1_1optimizer_a3df20cb0ae2b60430ad4fd235d66c12e}{m\_gradient}->Grid(),
138                                     \hyperlink{classlbann_1_1optimizer_a3df20cb0ae2b60430ad4fd235d66c12e}{m\_gradient}->Root());
139   \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2} = \hyperlink{classlbann_1_1optimizer_a3df20cb0ae2b60430ad4fd235d66c12e}{m\_gradient}->Construct(\hyperlink{classlbann_1_1optimizer_a3df20cb0ae2b60430ad4fd235d66c12e}{m\_gradient}->Grid(),
140                                     \hyperlink{classlbann_1_1optimizer_a3df20cb0ae2b60430ad4fd235d66c12e}{m\_gradient}->Root());
141   El::Zeros(*\hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}, height, width);
142   El::Zeros(*\hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}, height, width);
143 
144   \textcolor{comment}{// Allocate GPU objects}
145   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn} != \textcolor{keyword}{nullptr}) \{
146 \textcolor{preprocessor}{#ifdef LBANN\_HAS\_CUDNN}
147     \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->allocate\_on\_gpus(m\_moment1\_d, height, width);
148     \hyperlink{classlbann_1_1optimizer_a2f24dbeaca18b06f4aa7d179bbf96680}{m\_cudnn}->allocate\_on\_gpus(m\_moment2\_d, height, width);
149 \textcolor{preprocessor}{#endif // LBANN\_HAS\_CUDNN}
150   \}
151 
152 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_aea0b1fa44197fe184a6feca5ec5c808e_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=332pt]{classlbann_1_1adam_aea0b1fa44197fe184a6feca5ec5c808e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_a3bcd1bcbbed2b99c407eb0cd9fd6d449}\label{classlbann_1_1adam_a3bcd1bcbbed2b99c407eb0cd9fd6d449}} 
\index{lbann\+::adam@{lbann\+::adam}!step\+\_\+compute@{step\+\_\+compute}}
\index{step\+\_\+compute@{step\+\_\+compute}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{step\+\_\+compute()}{step\_compute()}}
{\footnotesize\ttfamily void lbann\+::adam\+::step\+\_\+compute (\begin{DoxyParamCaption}\item[{\hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat} \&}]{values,  }\item[{const \hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat} \&}]{gradient }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Perform the computation in an optimization step. 

Implements \hyperlink{classlbann_1_1optimizer_a0db72c298a0bc3405fb0af97d104a036}{lbann\+::optimizer}.



Definition at line 154 of file adam.\+cpp.


\begin{DoxyCode}
154                                                                       \{
155 
156   \textcolor{comment}{// Precompute the bias correction and learning rate.}
157   \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\_current\_beta1} *= \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1};
158   \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\_current\_beta2} *= \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2};
159   \textcolor{keyword}{const} DataType correction = \hyperlink{classlbann_1_1optimizer_ad393dcdcb82b44510c586ed5ec46d4dd}{m\_learning\_rate} *
160                               (std::sqrt(DataType(1) - \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\_current\_beta2})
161                                / (DataType(1) - \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\_current\_beta1}));
162 
163   \textcolor{comment}{// Get local matrix data}
164   \textcolor{keyword}{const} \textcolor{keywordtype}{int} local\_height = values.LocalHeight();
165   \textcolor{keyword}{const} \textcolor{keywordtype}{int} local\_width = values.LocalWidth();
166   DataType* \_\_restrict\_\_ values\_buffer = values.Buffer();
167   \textcolor{keyword}{const} \textcolor{keywordtype}{int} values\_ldim = values.LDim();
168   \textcolor{keyword}{const} DataType* \_\_restrict\_\_ gradient\_buffer = gradient.LockedBuffer();
169   \textcolor{keyword}{const} \textcolor{keywordtype}{int} gradient\_ldim = gradient.LDim();
170   DataType* \_\_restrict\_\_ moment1\_buffer = \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}->Buffer();
171   \textcolor{keyword}{const} \textcolor{keywordtype}{int} moment1\_ldim = \hyperlink{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}{m\_moment1}->LDim();
172   DataType* \_\_restrict\_\_ moment2\_buffer = \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->Buffer();
173   \textcolor{keyword}{const} \textcolor{keywordtype}{int} moment2\_ldim = \hyperlink{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}{m\_moment2}->LDim();
174 
175   \textcolor{comment}{// Check if matrix data is contiguous}
176   \textcolor{keywordflow}{if} (values\_ldim != local\_height
177       || gradient\_ldim != local\_height
178       || moment1\_ldim != local\_height
179       || moment2\_ldim != local\_height) \{
180     \textcolor{comment}{// Update with non-contiguous data}
181 \textcolor{preprocessor}{    #pragma omp parallel for collapse(2)}
182     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0; j<local\_width; ++j) \{
183       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<local\_height; ++i) \{
184         DataType& x = values\_buffer[i+j*values\_ldim];
185         \textcolor{comment}{// See below; avoid denormalization.}
186         \textcolor{keyword}{const} DataType g = gradient\_buffer[i+j*gradient\_ldim] + \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps};
187         DataType& m1 = moment1\_buffer[i+j*moment1\_ldim];
188         DataType& m2 = moment2\_buffer[i+j*moment2\_ldim];
189         m1 = \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1} * m1 + (DataType(1) - \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1}) * g;
190         m2 = \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2} * m2 + (DataType(1) - \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2}) * g * g;
191         x -= correction * m1 / (std::sqrt(m2) + \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps});
192       \}
193     \}
194   \} \textcolor{keywordflow}{else} \{
195     \textcolor{comment}{// Update with contiguous data}
196 \textcolor{preprocessor}{    #pragma omp parallel for}
197     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<local\_height*local\_width; ++i) \{
198       DataType& x = values\_buffer[i];
199       \textcolor{comment}{// We add eps here because sometimes the gradient is small enough that}
200       \textcolor{comment}{// g*g can become denormalized, which can significantly impact the}
201       \textcolor{comment}{// performance.}
202       \textcolor{keyword}{const} DataType g = gradient\_buffer[i] + \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps};
203       DataType& m1 = moment1\_buffer[i];
204       DataType& m2 = moment2\_buffer[i];
205       m1 = \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1} * m1 + (DataType(1) - \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1}) * g;
206       m2 = \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2} * m2 + (DataType(1) - \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2}) * g * g;
207       x -= correction * m1 / (std::sqrt(m2) + \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps});
208     \}
209   \}
210 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a3bcd1bcbbed2b99c407eb0cd9fd6d449_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_ae5b6108946e6a09b4e13e4285350aa05}\label{classlbann_1_1adam_ae5b6108946e6a09b4e13e4285350aa05}} 
\index{lbann\+::adam@{lbann\+::adam}!unpack\+\_\+header@{unpack\+\_\+header}}
\index{unpack\+\_\+header@{unpack\+\_\+header}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{unpack\+\_\+header()}{unpack\_header()}}
{\footnotesize\ttfamily void lbann\+::adam\+::unpack\+\_\+header (\begin{DoxyParamCaption}\item[{struct \hyperlink{structlbann_1_1adam_1_1packing__header}{packing\+\_\+header} \&}]{header }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 138 of file adam.\+hpp.


\begin{DoxyCode}
138                                                     \{
139     \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1} = header.beta1;
140     \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2} = header.beta2;
141     \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps} = header.eps;
142     \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\_current\_beta1} = header.current\_beta1;
143     \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\_current\_beta2} = header.current\_beta2;
144   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_ae5b6108946e6a09b4e13e4285350aa05_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classlbann_1_1adam_ae5b6108946e6a09b4e13e4285350aa05_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1adam_a21a3d2bce0bac5e6c022c5d95ec6348b}\label{classlbann_1_1adam_a21a3d2bce0bac5e6c022c5d95ec6348b}} 
\index{lbann\+::adam@{lbann\+::adam}!unpack\+\_\+scalars@{unpack\+\_\+scalars}}
\index{unpack\+\_\+scalars@{unpack\+\_\+scalars}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{unpack\+\_\+scalars()}{unpack\_scalars()}}
{\footnotesize\ttfamily bool lbann\+::adam\+::unpack\+\_\+scalars (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1persist}{persist} \&}]{p,  }\item[{struct \hyperlink{structlbann_1_1adam_1_1packing__header}{packing\+\_\+header} $\ast$}]{header }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line 121 of file adam.\+hpp.


\begin{DoxyCode}
121                                                                  \{
122     p.read\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"beta1"}, &\hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1});
123     p.read\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"beta2"}, &\hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2});
124     p.read\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"eps"},   &\hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps});
125     p.read\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"current\_beta1"}, &
      \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\_current\_beta1});
126     p.read\_datatype(\hyperlink{namespacelbann_adee41f31f15f3906cbdcce4a1417eb56a61b3a8faa9c1091806675c230a9abe64}{persist\_type::train}, \textcolor{stringliteral}{"current\_beta2"}, &
      \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\_current\_beta2});
127 
128     \textcolor{keywordflow}{if}(header != \textcolor{keyword}{nullptr}) \{
129       header->beta1 = \hyperlink{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}{m\_beta1};
130       header->beta2 = \hyperlink{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}{m\_beta2};
131       header->eps = \hyperlink{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}{m\_eps};
132       header->current\_beta1 = \hyperlink{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}{m\_current\_beta1};
133       header->current\_beta2 = \hyperlink{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}{m\_current\_beta2};
134     \}
135     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
136   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a21a3d2bce0bac5e6c022c5d95ec6348b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1adam_a21a3d2bce0bac5e6c022c5d95ec6348b_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}\label{classlbann_1_1adam_a73af15a28066edbfad9ba6a900746a19}} 
\index{lbann\+::adam@{lbann\+::adam}!m\+\_\+beta1@{m\+\_\+beta1}}
\index{m\+\_\+beta1@{m\+\_\+beta1}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{m\+\_\+beta1}{m\_beta1}}
{\footnotesize\ttfamily Data\+Type lbann\+::adam\+::m\+\_\+beta1\hspace{0.3cm}{\ttfamily [private]}}

Update factor for first moment estimate. 

Definition at line 78 of file adam.\+hpp.

\mbox{\Hypertarget{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}\label{classlbann_1_1adam_ab1f2a16b8eb7e265895ea9eef3fe87b2}} 
\index{lbann\+::adam@{lbann\+::adam}!m\+\_\+beta2@{m\+\_\+beta2}}
\index{m\+\_\+beta2@{m\+\_\+beta2}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{m\+\_\+beta2}{m\_beta2}}
{\footnotesize\ttfamily Data\+Type lbann\+::adam\+::m\+\_\+beta2\hspace{0.3cm}{\ttfamily [private]}}

Update factor for second moment estimate. 

Definition at line 80 of file adam.\+hpp.

\mbox{\Hypertarget{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}\label{classlbann_1_1adam_a53c3034e187da2720447bbb4f2b59a5d}} 
\index{lbann\+::adam@{lbann\+::adam}!m\+\_\+current\+\_\+beta1@{m\+\_\+current\+\_\+beta1}}
\index{m\+\_\+current\+\_\+beta1@{m\+\_\+current\+\_\+beta1}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{m\+\_\+current\+\_\+beta1}{m\_current\_beta1}}
{\footnotesize\ttfamily Data\+Type lbann\+::adam\+::m\+\_\+current\+\_\+beta1\hspace{0.3cm}{\ttfamily [private]}}

beta1 $^\wedge$ iteration. 

Definition at line 84 of file adam.\+hpp.

\mbox{\Hypertarget{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}\label{classlbann_1_1adam_ad38376b684d69d4a15da1d11f8808ca7}} 
\index{lbann\+::adam@{lbann\+::adam}!m\+\_\+current\+\_\+beta2@{m\+\_\+current\+\_\+beta2}}
\index{m\+\_\+current\+\_\+beta2@{m\+\_\+current\+\_\+beta2}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{m\+\_\+current\+\_\+beta2}{m\_current\_beta2}}
{\footnotesize\ttfamily Data\+Type lbann\+::adam\+::m\+\_\+current\+\_\+beta2\hspace{0.3cm}{\ttfamily [private]}}

beta2 $^\wedge$ iteration. 

Definition at line 86 of file adam.\+hpp.

\mbox{\Hypertarget{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}\label{classlbann_1_1adam_a751102f0fd866612f5685050a08020a9}} 
\index{lbann\+::adam@{lbann\+::adam}!m\+\_\+eps@{m\+\_\+eps}}
\index{m\+\_\+eps@{m\+\_\+eps}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{m\+\_\+eps}{m\_eps}}
{\footnotesize\ttfamily Data\+Type lbann\+::adam\+::m\+\_\+eps\hspace{0.3cm}{\ttfamily [private]}}

Small factor to avoid division by zero. 

Definition at line 82 of file adam.\+hpp.

\mbox{\Hypertarget{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}\label{classlbann_1_1adam_aa10a518a5356257bc69e655b88b0ed67}} 
\index{lbann\+::adam@{lbann\+::adam}!m\+\_\+moment1@{m\+\_\+moment1}}
\index{m\+\_\+moment1@{m\+\_\+moment1}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{m\+\_\+moment1}{m\_moment1}}
{\footnotesize\ttfamily \hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat}$\ast$ lbann\+::adam\+::m\+\_\+moment1\hspace{0.3cm}{\ttfamily [private]}}

First moment estimates. 

Definition at line 88 of file adam.\+hpp.

\mbox{\Hypertarget{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}\label{classlbann_1_1adam_aea3295a0ee7da5e9c56fd6ff2f05c63f}} 
\index{lbann\+::adam@{lbann\+::adam}!m\+\_\+moment2@{m\+\_\+moment2}}
\index{m\+\_\+moment2@{m\+\_\+moment2}!lbann\+::adam@{lbann\+::adam}}
\subsubsection{\texorpdfstring{m\+\_\+moment2}{m\_moment2}}
{\footnotesize\ttfamily \hyperlink{base_8hpp_a9a697a504ae84010e7439ffec862b470}{Abs\+Dist\+Mat}$\ast$ lbann\+::adam\+::m\+\_\+moment2\hspace{0.3cm}{\ttfamily [private]}}

Second moment estimates. 

Definition at line 90 of file adam.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/optimizers/\hyperlink{adam_8hpp}{adam.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/optimizers/\hyperlink{adam_8cpp}{adam.\+cpp}\end{DoxyCompactItemize}
