\hypertarget{namespacelbann_1_1stack__trace}{}\section{lbann\+:\+:stack\+\_\+trace Namespace Reference}
\label{namespacelbann_1_1stack__trace}\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{namespacelbann_1_1stack__trace_a1063a9a501d78a7525224461e155a483}{set\+\_\+lbann\+\_\+stack\+\_\+trace\+\_\+world\+\_\+rank} (int rank)
\item 
static bool \hyperlink{namespacelbann_1_1stack__trace_aa071d75a81128e2a8100d66529482842}{open\+\_\+output\+\_\+file} ()
\item 
static void \hyperlink{namespacelbann_1_1stack__trace_a45e4398bd4d0a7b9956107192a342b89}{close\+\_\+output\+\_\+file} ()
\item 
void \hyperlink{namespacelbann_1_1stack__trace_a52adbb11fce7541e2bc34b712d09e868}{print\+\_\+stack\+\_\+trace} ()
\item 
void \hyperlink{namespacelbann_1_1stack__trace_ae7396b3b0ee5d087a045f04ce690cae4}{print\+\_\+lbann\+\_\+exception\+\_\+stack\+\_\+trace} (std\+::string m)
\item 
std\+::string \hyperlink{namespacelbann_1_1stack__trace_a22d63f8c305ad282df5af296d61639e6}{sig\+\_\+name} (int signal)
\item 
void \hyperlink{namespacelbann_1_1stack__trace_a12c3aa60ec15015b925249fc61352f07}{register\+\_\+handler} ()
\item 
void \hyperlink{namespacelbann_1_1stack__trace_a4bf58556b9c42ac8930c273a921172de}{lbann\+\_\+signal\+\_\+handler} (int signal)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static std\+::ofstream \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\+\_\+file}
\item 
static int \hyperlink{namespacelbann_1_1stack__trace_a78efe186260936105751e65f56c381d7}{my\+\_\+lbann\+\_\+tracing\+\_\+id} = 0
\item 
struct sigaction \hyperlink{namespacelbann_1_1stack__trace_a4a87ea956ec9344d4432f5e7d3dd445e}{sa}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespacelbann_1_1stack__trace_a45e4398bd4d0a7b9956107192a342b89}\label{namespacelbann_1_1stack__trace_a45e4398bd4d0a7b9956107192a342b89}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!close\+\_\+output\+\_\+file@{close\+\_\+output\+\_\+file}}
\index{close\+\_\+output\+\_\+file@{close\+\_\+output\+\_\+file}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{close\+\_\+output\+\_\+file()}{close\_output\_file()}}
{\footnotesize\ttfamily static void lbann\+::stack\+\_\+trace\+::close\+\_\+output\+\_\+file (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 76 of file stack\+\_\+trace.\+cpp.


\begin{DoxyCode}
76                                 \{
77   \textcolor{keywordflow}{if} (\hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.is\_open()) \{
78     \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.close();
79   \}
80 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacelbann_1_1stack__trace_a45e4398bd4d0a7b9956107192a342b89_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacelbann_1_1stack__trace_a4bf58556b9c42ac8930c273a921172de}\label{namespacelbann_1_1stack__trace_a4bf58556b9c42ac8930c273a921172de}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!lbann\+\_\+signal\+\_\+handler@{lbann\+\_\+signal\+\_\+handler}}
\index{lbann\+\_\+signal\+\_\+handler@{lbann\+\_\+signal\+\_\+handler}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{lbann\+\_\+signal\+\_\+handler()}{lbann\_signal\_handler()}}
{\footnotesize\ttfamily void lbann\+::stack\+\_\+trace\+::lbann\+\_\+signal\+\_\+handler (\begin{DoxyParamCaption}\item[{int}]{signal }\end{DoxyParamCaption})}

For internal use; made public for testing. 

Definition at line 241 of file stack\+\_\+trace.\+cpp.


\begin{DoxyCode}
241                                       \{
242 std::cerr << \textcolor{stringliteral}{"starting lbann\_signal\_handler\(\backslash\)n"};
243   \textcolor{keywordflow}{if} (! \hyperlink{namespacelbann_1_1stack__trace_aa071d75a81128e2a8100d66529482842}{open\_output\_file}()) \{
244     \textcolor{keywordflow}{return};
245   \}
246   std::stringstream s;
247   s <<  
248          \textcolor{stringliteral}{"\(\backslash\)n**************************************************************************\(\backslash\)n"}
249          \textcolor{stringliteral}{" Caught this signal: "} << \hyperlink{namespacelbann_1_1stack__trace_a22d63f8c305ad282df5af296d61639e6}{sig\_name}(signal) << \textcolor{stringliteral}{"\(\backslash\)n"}
250          \textcolor{stringliteral}{" Note: see /usr/include/bits/signum.h for signal explanations\(\backslash\)n"}
251          \textcolor{stringliteral}{" Am now attempting to print the stack trace ...\(\backslash\)n"}
252          \textcolor{stringliteral}{"**************************************************************************\(\backslash\)n"};
253   \textcolor{keywordflow}{if} (\hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.is\_open()) \{
254     \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file} << s.str();
255   \}
256   std::cerr << s.str();
257   \hyperlink{namespacelbann_1_1stack__trace_a52adbb11fce7541e2bc34b712d09e868}{print\_stack\_trace}();
258   \hyperlink{namespacelbann_1_1stack__trace_a45e4398bd4d0a7b9956107192a342b89}{close\_output\_file}();
259 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacelbann_1_1stack__trace_a4bf58556b9c42ac8930c273a921172de_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=330pt]{namespacelbann_1_1stack__trace_a4bf58556b9c42ac8930c273a921172de_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacelbann_1_1stack__trace_aa071d75a81128e2a8100d66529482842}\label{namespacelbann_1_1stack__trace_aa071d75a81128e2a8100d66529482842}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!open\+\_\+output\+\_\+file@{open\+\_\+output\+\_\+file}}
\index{open\+\_\+output\+\_\+file@{open\+\_\+output\+\_\+file}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{open\+\_\+output\+\_\+file()}{open\_output\_file()}}
{\footnotesize\ttfamily static bool lbann\+::stack\+\_\+trace\+::open\+\_\+output\+\_\+file (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 55 of file stack\+\_\+trace.\+cpp.


\begin{DoxyCode}
55                                \{
56   \hyperlink{classoptions}{options} * opts = \hyperlink{classoptions_a9ecfe9c365269df68a41b961c31ae3f5}{options::get}();
57   \textcolor{keywordtype}{bool} success = \textcolor{keyword}{true};
58   \textcolor{keywordflow}{if} (opts->\hyperlink{classoptions_aafb1d2a7ccde0b1bf786230ba4080ecd}{has\_bool}(\textcolor{stringliteral}{"stack\_trace\_to\_file"}) && opts->\hyperlink{classoptions_a99aa190102de33e2aed39723929f9fad}{get\_bool}(\textcolor{stringliteral}{"stack\_trace\_to\_file"})) \{
59     std::stringstream b;
60     b << \textcolor{stringliteral}{"stack\_trace\_"} << \hyperlink{namespacelbann_1_1stack__trace_a78efe186260936105751e65f56c381d7}{my\_lbann\_tracing\_id} << \textcolor{stringliteral}{".txt"};
61     \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.open(b.str().c\_str());
62     \textcolor{keywordflow}{if} (! \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.is\_open()) \{
63       std::stringstream err;
64       err << \_\_FILE\_\_ << \textcolor{stringliteral}{" "} << \_\_LINE\_\_ << \textcolor{stringliteral}{" :: "}
65           << \textcolor{stringliteral}{" failed to open file: "} << b.str() << \textcolor{stringliteral}{" for writing"};
66 
67       \textcolor{comment}{//todo: can this be done better? Can't throw exception, else}
68       \textcolor{comment}{//      we go into an infinite loop}
69       std::cerr << err.str() << std::endl;
70       success = \textcolor{keyword}{false};
71     \}
72   \}
73   \textcolor{keywordflow}{return} success;
74 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacelbann_1_1stack__trace_aa071d75a81128e2a8100d66529482842_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacelbann_1_1stack__trace_aa071d75a81128e2a8100d66529482842_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacelbann_1_1stack__trace_ae7396b3b0ee5d087a045f04ce690cae4}\label{namespacelbann_1_1stack__trace_ae7396b3b0ee5d087a045f04ce690cae4}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!print\+\_\+lbann\+\_\+exception\+\_\+stack\+\_\+trace@{print\+\_\+lbann\+\_\+exception\+\_\+stack\+\_\+trace}}
\index{print\+\_\+lbann\+\_\+exception\+\_\+stack\+\_\+trace@{print\+\_\+lbann\+\_\+exception\+\_\+stack\+\_\+trace}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{print\+\_\+lbann\+\_\+exception\+\_\+stack\+\_\+trace()}{print\_lbann\_exception\_stack\_trace()}}
{\footnotesize\ttfamily void lbann\+::stack\+\_\+trace\+::print\+\_\+lbann\+\_\+exception\+\_\+stack\+\_\+trace (\begin{DoxyParamCaption}\item[{std\+::string}]{m }\end{DoxyParamCaption})}

For internal use; made public for testing. Attempts to print a stack trace when an \hyperlink{classlbann_1_1lbann__exception}{lbann\+\_\+exception} is thrown. Called by lbann\+\_\+exception() ctor. 

Definition at line 135 of file stack\+\_\+trace.\+cpp.


\begin{DoxyCode}
135                                                     \{
136   \textcolor{keywordflow}{if} (! \hyperlink{namespacelbann_1_1stack__trace_aa071d75a81128e2a8100d66529482842}{open\_output\_file}()) \{
137     \textcolor{keywordflow}{return};
138   \}
139   
140   std::stringstream s;
141   s << \textcolor{stringliteral}{"\(\backslash\)n**************************************************************************\(\backslash\)n"}
142     << \textcolor{stringliteral}{" This lbann\_exception is about to be thrown:"} << m << \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)n"}
143     << \textcolor{stringliteral}{" Am now attempting to print the stack trace ...\(\backslash\)n"}
144     << \textcolor{stringliteral}{"**************************************************************************\(\backslash\)n"};
145   \textcolor{keywordflow}{if} (\hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.is\_open()) \{
146     \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file} << s.str();
147   \}
148   std::cerr << s.str();
149   \hyperlink{namespacelbann_1_1stack__trace_a52adbb11fce7541e2bc34b712d09e868}{print\_stack\_trace}();
150   \hyperlink{namespacelbann_1_1stack__trace_a45e4398bd4d0a7b9956107192a342b89}{close\_output\_file}();
151 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacelbann_1_1stack__trace_ae7396b3b0ee5d087a045f04ce690cae4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacelbann_1_1stack__trace_ae7396b3b0ee5d087a045f04ce690cae4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacelbann_1_1stack__trace_a52adbb11fce7541e2bc34b712d09e868}\label{namespacelbann_1_1stack__trace_a52adbb11fce7541e2bc34b712d09e868}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!print\+\_\+stack\+\_\+trace@{print\+\_\+stack\+\_\+trace}}
\index{print\+\_\+stack\+\_\+trace@{print\+\_\+stack\+\_\+trace}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{print\+\_\+stack\+\_\+trace()}{print\_stack\_trace()}}
{\footnotesize\ttfamily void lbann\+::stack\+\_\+trace\+::print\+\_\+stack\+\_\+trace (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

For internal use; made public for testing. Attempts to print a stack trace. Calls non-\/reentrant functions, so behaviour may be undefined if used within a signal handler. Can be used when exceptions are thrown without undefined behavior. 

Definition at line 82 of file stack\+\_\+trace.\+cpp.


\begin{DoxyCode}
82                          \{
83   \textcolor{keywordflow}{if} (\hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.is\_open()) \{
84     \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file} << \textcolor{stringliteral}{"\(\backslash\)n**************************************************************************\(\backslash\)n"};
85   \}
86 
87 \textcolor{preprocessor}{  #define MAX\_STACK\_FRAMES 64}
88   \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stack\_traces[\hyperlink{stack__trace_8cpp_a2ed127ee3fe422f95420f138273e6da7}{MAX\_STACK\_FRAMES}];
89   \textcolor{keywordtype}{int} trace\_size = backtrace(stack\_traces, \hyperlink{stack__trace_8cpp_a2ed127ee3fe422f95420f138273e6da7}{MAX\_STACK\_FRAMES});
90   \textcolor{keywordtype}{char} **messages = backtrace\_symbols(stack\_traces, trace\_size);
91   Dl\_info info;
92   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<trace\_size; i++) \{
93     std::cerr << \textcolor{stringliteral}{"rank: "} << \hyperlink{namespacelbann_1_1stack__trace_a78efe186260936105751e65f56c381d7}{my\_lbann\_tracing\_id} << \textcolor{stringliteral}{" :: "};
94     dladdr(stack\_traces[i], &info);
95     \textcolor{keywordflow}{if} (info.dli\_sname != NULL) \{
96       \textcolor{keywordtype}{char} *demangled\_name = abi::\_\_cxa\_demangle(info.dli\_sname, \textcolor{keyword}{nullptr}, \textcolor{keyword}{nullptr}, \textcolor{keyword}{nullptr});
97       \textcolor{keywordflow}{if} (demangled\_name != NULL) \{
98         std::string test(demangled\_name);
99         \textcolor{comment}{/*if (test.find("\_\_libc\_start\_main") != std::string::npos) \{}
100 \textcolor{comment}{          i = 100000;}
101 \textcolor{comment}{          break;}
102 \textcolor{comment}{        \}}
103 \textcolor{comment}{        */}
104         \textcolor{keywordflow}{if} (test.find(\textcolor{stringliteral}{"lbann::stack\_trace::print\_stack\_trace"}) == std::string::npos && test.find(\textcolor{stringliteral}{"
      lbann::stack\_trace::print\_lbann\_exception\_stack\_trace"}) == std::string::npos) \{
105           std::cerr << demangled\_name << std::endl;
106           \textcolor{keywordflow}{if} (\hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.is\_open()) \{
107             \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file} << \textcolor{stringliteral}{"  >>>> "} << demangled\_name << std::endl;
108           \}
109         \}
110         free(demangled\_name);
111       \} \textcolor{keywordflow}{else} \{
112         std::cerr << \textcolor{stringliteral}{"demangling failed for: "} << info.dli\_sname << std::endl;
113         \textcolor{keywordflow}{if} (\hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.is\_open()) \{
114           \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file} << \textcolor{stringliteral}{"  >>>> demangling failed for: "} << info.dli\_sname << std::endl;
115         \}
116       \}
117     \} \textcolor{keywordflow}{else} \{
118       std::cerr << \textcolor{stringliteral}{"dli\_sname == NULL for: "} << stack\_traces[i] << \textcolor{stringliteral}{" backtrace message was: "} << messages[i
      ] << std::endl;
119       \textcolor{keywordflow}{if} (\hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.is\_open()) \{
120         \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file} << \textcolor{stringliteral}{"  >>>> dli\_sname == NULL for: "} << stack\_traces[i] << \textcolor{stringliteral}{" backtrace message was: "}
       << messages[i] << std::endl;
121       \}
122     \}
123   \}
124   std::cerr << std::endl;
125 
126   \textcolor{keywordflow}{if} (\hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.is\_open()) \{
127     \hyperlink{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}{to\_file}.close();
128   \}
129 
130   std::cerr << \textcolor{stringliteral}{"sleeping for two seconds to give all procs a chance to write ...\(\backslash\)n"};
131   sleep(2);
132 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacelbann_1_1stack__trace_a52adbb11fce7541e2bc34b712d09e868_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacelbann_1_1stack__trace_a12c3aa60ec15015b925249fc61352f07}\label{namespacelbann_1_1stack__trace_a12c3aa60ec15015b925249fc61352f07}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!register\+\_\+handler@{register\+\_\+handler}}
\index{register\+\_\+handler@{register\+\_\+handler}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{register\+\_\+handler()}{register\_handler()}}
{\footnotesize\ttfamily void lbann\+::stack\+\_\+trace\+::register\+\_\+handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Register our signal handler; This is called in \hyperlink{namespacelbann_a3d91b615e42bf5744deeed770879bc8c}{initialize()}, but only if the cmd line option \char`\"{}-\/-\/catch\+\_\+signals\char`\"{} is present. It is not active by default, because the handler calls non-\/reentrant, functions, which can result in undefined behavior. See\+: \href{https://www.ibm.com/developerworks/library/l-reent/}{\tt https\+://www.\+ibm.\+com/developerworks/library/l-\/reent/} for discussion. That said, it is possible (likely?) that our handler will work correctly. And if there\textquotesingle{}s a S\+I\+G\+S\+EV and it doesn\textquotesingle{}t, nothing much is lost (I\+MO). 

Definition at line 227 of file stack\+\_\+trace.\+cpp.


\begin{DoxyCode}
227                         \{
228   \hyperlink{classoptions}{options} *opts = \hyperlink{classoptions_a9ecfe9c365269df68a41b961c31ae3f5}{options::get}();
229   \textcolor{keywordflow}{if} (opts->\hyperlink{classoptions_aafb1d2a7ccde0b1bf786230ba4080ecd}{has\_bool}(\textcolor{stringliteral}{"catch\_signals"}) and opts->\hyperlink{classoptions_a99aa190102de33e2aed39723929f9fad}{get\_bool}(\textcolor{stringliteral}{"catch\_signals"})) \{
230     \hyperlink{namespacelbann_1_1stack__trace_a4a87ea956ec9344d4432f5e7d3dd445e}{sa}.sa\_handler = &\hyperlink{namespacelbann_1_1stack__trace_a4bf58556b9c42ac8930c273a921172de}{lbann\_signal\_handler};
231     \hyperlink{namespacelbann_1_1stack__trace_a4a87ea956ec9344d4432f5e7d3dd445e}{sa}.sa\_flags = SA\_RESTART;
232     sigfillset(&\hyperlink{namespacelbann_1_1stack__trace_a4a87ea956ec9344d4432f5e7d3dd445e}{sa}.sa\_mask);
233 
234     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<40; i++) \{
235       sigaction(i, &\hyperlink{namespacelbann_1_1stack__trace_a4a87ea956ec9344d4432f5e7d3dd445e}{sa}, NULL);
236     \}
237   \}
238 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacelbann_1_1stack__trace_a12c3aa60ec15015b925249fc61352f07_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacelbann_1_1stack__trace_a1063a9a501d78a7525224461e155a483}\label{namespacelbann_1_1stack__trace_a1063a9a501d78a7525224461e155a483}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!set\+\_\+lbann\+\_\+stack\+\_\+trace\+\_\+world\+\_\+rank@{set\+\_\+lbann\+\_\+stack\+\_\+trace\+\_\+world\+\_\+rank}}
\index{set\+\_\+lbann\+\_\+stack\+\_\+trace\+\_\+world\+\_\+rank@{set\+\_\+lbann\+\_\+stack\+\_\+trace\+\_\+world\+\_\+rank}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{set\+\_\+lbann\+\_\+stack\+\_\+trace\+\_\+world\+\_\+rank()}{set\_lbann\_stack\_trace\_world\_rank()}}
{\footnotesize\ttfamily void lbann\+::stack\+\_\+trace\+::set\+\_\+lbann\+\_\+stack\+\_\+trace\+\_\+world\+\_\+rank (\begin{DoxyParamCaption}\item[{int}]{rank }\end{DoxyParamCaption})}

This module contains functions for printing a stack trace when either a signal is caught or an lbann exception is thrown. Default behavior\+: processes write to cerr. The cmd line option \char`\"{}-\/-\/stack\+\_\+trace\+\_\+to\+\_\+file\char`\"{} will additionally cause each processor to attempt to write its stack trace to \char`\"{}stack\+\_\+trace\+\_\+$<$rank\+\_\+in\+\_\+world$>$.\+txt\char`\"{}

To use in your driver, you need to call \hyperlink{namespacelbann_1_1stack__trace_a12c3aa60ec15015b925249fc61352f07}{register\+\_\+handler()} after the call to \hyperlink{classoptions_a9ecfe9c365269df68a41b961c31ae3f5}{options\+::get()}-\/$>$init(), and also include the option --catch\+\_\+signals on the command line\+For internal use; made public for testing. called by \hyperlink{namespacelbann_a3d91b615e42bf5744deeed770879bc8c}{initialize()} 

Definition at line 49 of file stack\+\_\+trace.\+cpp.


\begin{DoxyCode}
49                                                 \{
50   \hyperlink{namespacelbann_1_1stack__trace_a78efe186260936105751e65f56c381d7}{my\_lbann\_tracing\_id} = rank;
51 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{namespacelbann_1_1stack__trace_a1063a9a501d78a7525224461e155a483_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacelbann_1_1stack__trace_a22d63f8c305ad282df5af296d61639e6}\label{namespacelbann_1_1stack__trace_a22d63f8c305ad282df5af296d61639e6}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!sig\+\_\+name@{sig\+\_\+name}}
\index{sig\+\_\+name@{sig\+\_\+name}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{sig\+\_\+name()}{sig\_name()}}
{\footnotesize\ttfamily std\+::string lbann\+::stack\+\_\+trace\+::sig\+\_\+name (\begin{DoxyParamCaption}\item[{int}]{signal }\end{DoxyParamCaption})}

For internal use; made public for testing. called by print\+\_\+lbann\+\_\+signal\+\_\+stack\+\_\+trace(). 

Definition at line 154 of file stack\+\_\+trace.\+cpp.


\begin{DoxyCode}
154                                \{
155   std::string r;
156   \textcolor{keywordflow}{switch} (signal) \{
157     \textcolor{keywordflow}{case} 1 : 
158       r = \textcolor{stringliteral}{"SIGHUP"}; \textcolor{keywordflow}{break};
159     \textcolor{keywordflow}{case} 2 :
160       r = \textcolor{stringliteral}{"SIGINT"}; \textcolor{keywordflow}{break};
161     \textcolor{keywordflow}{case} 3 :
162       r = \textcolor{stringliteral}{"SIGQUIT"}; \textcolor{keywordflow}{break};
163     \textcolor{keywordflow}{case} 4 :
164       r = \textcolor{stringliteral}{"SIGILL"}; \textcolor{keywordflow}{break};
165     \textcolor{keywordflow}{case} 5 :
166       r = \textcolor{stringliteral}{"SIGTRAP"}; \textcolor{keywordflow}{break};
167     \textcolor{keywordflow}{case} 6 :
168       r = \textcolor{stringliteral}{"SIGABRT"}; \textcolor{keywordflow}{break};
169     \textcolor{keywordflow}{case} 7 :
170       r = \textcolor{stringliteral}{"SIGBUS"}; \textcolor{keywordflow}{break};
171     \textcolor{keywordflow}{case} 8 :
172       r = \textcolor{stringliteral}{"SIGFPE"}; \textcolor{keywordflow}{break};
173     \textcolor{keywordflow}{case} 9 :
174       r = \textcolor{stringliteral}{"SIGKILL"}; \textcolor{keywordflow}{break};
175     \textcolor{keywordflow}{case} 10 :
176       r = \textcolor{stringliteral}{"SIGUSR1"}; \textcolor{keywordflow}{break};
177     \textcolor{keywordflow}{case} 11 :
178       r = \textcolor{stringliteral}{"SIGSEGV"}; \textcolor{keywordflow}{break};
179     \textcolor{keywordflow}{case} 12 :
180       r = \textcolor{stringliteral}{"SIGUSR2"}; \textcolor{keywordflow}{break};
181     \textcolor{keywordflow}{case} 13 :
182       r = \textcolor{stringliteral}{"SIGPIPE"}; \textcolor{keywordflow}{break};
183     \textcolor{keywordflow}{case} 14 :
184       r = \textcolor{stringliteral}{"SIGALRM"}; \textcolor{keywordflow}{break};
185     \textcolor{keywordflow}{case} 15 :
186       r = \textcolor{stringliteral}{"SIGTERM"}; \textcolor{keywordflow}{break};
187     \textcolor{keywordflow}{case} 16 :
188       r = \textcolor{stringliteral}{"SIGSTKFLT"}; \textcolor{keywordflow}{break};
189     \textcolor{keywordflow}{case} 17 :
190       r = \textcolor{stringliteral}{"SIGCHLD"}; \textcolor{keywordflow}{break};
191     \textcolor{keywordflow}{case} 18 :
192       r = \textcolor{stringliteral}{"SIGCONT"}; \textcolor{keywordflow}{break};
193     \textcolor{keywordflow}{case} 19 :
194       r = \textcolor{stringliteral}{"SIGSTOP"}; \textcolor{keywordflow}{break};
195     \textcolor{keywordflow}{case} 20 :
196       r = \textcolor{stringliteral}{"SIGTSTP"}; \textcolor{keywordflow}{break};
197     \textcolor{keywordflow}{case} 21 :
198       r = \textcolor{stringliteral}{"SIGTTIN"}; \textcolor{keywordflow}{break};
199     \textcolor{keywordflow}{case} 22 :
200       r = \textcolor{stringliteral}{"SIGTTOU"}; \textcolor{keywordflow}{break};
201     \textcolor{keywordflow}{case} 23 :
202       r = \textcolor{stringliteral}{"SIGURG"}; \textcolor{keywordflow}{break};
203     \textcolor{keywordflow}{case} 24 :
204       r = \textcolor{stringliteral}{"SIGXCPU"}; \textcolor{keywordflow}{break};
205     \textcolor{keywordflow}{case} 25 :
206       r = \textcolor{stringliteral}{"SIGXFSZ"}; \textcolor{keywordflow}{break};
207     \textcolor{keywordflow}{case} 26 :
208       r = \textcolor{stringliteral}{"SIGVTALRM"}; \textcolor{keywordflow}{break};
209     \textcolor{keywordflow}{case} 27 :
210       r = \textcolor{stringliteral}{"SIGPROF"}; \textcolor{keywordflow}{break};
211     \textcolor{keywordflow}{case} 28 :
212       r = \textcolor{stringliteral}{"SIGWINCH"}; \textcolor{keywordflow}{break};
213     \textcolor{keywordflow}{case} 29 :
214       r = \textcolor{stringliteral}{"SIGPOLL"}; \textcolor{keywordflow}{break};
215     \textcolor{keywordflow}{case} 30 :
216       r = \textcolor{stringliteral}{"SIGPWR"}; \textcolor{keywordflow}{break};
217     \textcolor{keywordflow}{case} 31 :
218       r = \textcolor{stringliteral}{"SIGSYS"}; \textcolor{keywordflow}{break};
219     default :
220       std::stringstream s;
221       s << \textcolor{stringliteral}{"unknown signal #"} << signal;
222       r = s.str();
223   \}
224   \textcolor{keywordflow}{return} r;
225 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacelbann_1_1stack__trace_a22d63f8c305ad282df5af296d61639e6_icgraph}
\end{center}
\end{figure}


\subsection{Variable Documentation}
\mbox{\Hypertarget{namespacelbann_1_1stack__trace_a78efe186260936105751e65f56c381d7}\label{namespacelbann_1_1stack__trace_a78efe186260936105751e65f56c381d7}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!my\+\_\+lbann\+\_\+tracing\+\_\+id@{my\+\_\+lbann\+\_\+tracing\+\_\+id}}
\index{my\+\_\+lbann\+\_\+tracing\+\_\+id@{my\+\_\+lbann\+\_\+tracing\+\_\+id}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{my\+\_\+lbann\+\_\+tracing\+\_\+id}{my\_lbann\_tracing\_id}}
{\footnotesize\ttfamily int lbann\+::stack\+\_\+trace\+::my\+\_\+lbann\+\_\+tracing\+\_\+id = 0\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 45 of file stack\+\_\+trace.\+cpp.

\mbox{\Hypertarget{namespacelbann_1_1stack__trace_a4a87ea956ec9344d4432f5e7d3dd445e}\label{namespacelbann_1_1stack__trace_a4a87ea956ec9344d4432f5e7d3dd445e}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!sa@{sa}}
\index{sa@{sa}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{sa}{sa}}
{\footnotesize\ttfamily struct sigaction lbann\+::stack\+\_\+trace\+::sa}



Definition at line 47 of file stack\+\_\+trace.\+cpp.

\mbox{\Hypertarget{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}\label{namespacelbann_1_1stack__trace_a6c838c74fec7cc57e5ccad283a8d282b}} 
\index{lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}!to\+\_\+file@{to\+\_\+file}}
\index{to\+\_\+file@{to\+\_\+file}!lbann\+::stack\+\_\+trace@{lbann\+::stack\+\_\+trace}}
\subsubsection{\texorpdfstring{to\+\_\+file}{to\_file}}
{\footnotesize\ttfamily std\+::ofstream lbann\+::stack\+\_\+trace\+::to\+\_\+file\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 43 of file stack\+\_\+trace.\+cpp.

