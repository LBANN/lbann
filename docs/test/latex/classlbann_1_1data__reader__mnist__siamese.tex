\hypertarget{classlbann_1_1data__reader__mnist__siamese}{}\section{lbann\+:\+:data\+\_\+reader\+\_\+mnist\+\_\+siamese Class Reference}
\label{classlbann_1_1data__reader__mnist__siamese}\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}


{\ttfamily \#include $<$data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+hpp$>$}



Inheritance diagram for lbann\+:\+:data\+\_\+reader\+\_\+mnist\+\_\+siamese\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=213pt]{classlbann_1_1data__reader__mnist__siamese__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for lbann\+:\+:data\+\_\+reader\+\_\+mnist\+\_\+siamese\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \hyperlink{classlbann_1_1data__reader__mnist__siamese_abc3253e1de3910bef9e317ef5a396a47}{label\+\_\+t} = unsigned char
\item 
using \hyperlink{classlbann_1_1data__reader__mnist__siamese_af159922f68098bfcb16a9df46d501103}{sample\+\_\+t} = std\+::pair$<$ int, int $>$
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlbann_1_1data__reader__mnist__siamese_af10a15ece71ae9c20069161a1c83abcd}{data\+\_\+reader\+\_\+mnist\+\_\+siamese} (const std\+::shared\+\_\+ptr$<$ cv\+\_\+process $>$ \&pp, bool shuffle=true)
\item 
\hyperlink{classlbann_1_1data__reader__mnist__siamese_ac68ac9d831b8ac2209069fb4d407060a}{data\+\_\+reader\+\_\+mnist\+\_\+siamese} (const \hyperlink{classlbann_1_1data__reader__mnist__siamese}{data\+\_\+reader\+\_\+mnist\+\_\+siamese} \&)
\item 
\hyperlink{classlbann_1_1data__reader__mnist__siamese}{data\+\_\+reader\+\_\+mnist\+\_\+siamese} \& \hyperlink{classlbann_1_1data__reader__mnist__siamese_ad41517c9c789bbf8d7e0696832e52d98}{operator=} (const \hyperlink{classlbann_1_1data__reader__mnist__siamese}{data\+\_\+reader\+\_\+mnist\+\_\+siamese} \&)
\item 
\hyperlink{classlbann_1_1data__reader__mnist__siamese_a308c0ac052f218a52da40043164fab1b}{$\sim$data\+\_\+reader\+\_\+mnist\+\_\+siamese} () override
\item 
\hyperlink{classlbann_1_1data__reader__mnist__siamese}{data\+\_\+reader\+\_\+mnist\+\_\+siamese} $\ast$ \hyperlink{classlbann_1_1data__reader__mnist__siamese_a0b9750c72f9fdb28499b6dfe70bc9a6f}{copy} () const override
\item 
std\+::string \hyperlink{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604}{get\+\_\+type} () const override
\item 
void \hyperlink{classlbann_1_1data__reader__mnist__siamese_abe572754f0b1415407c1b698b0f83656}{set\+\_\+input\+\_\+params} (const int, const int, const int, const int) override
\item 
void \hyperlink{classlbann_1_1data__reader__mnist__siamese_a2c60a89c5815fa24b34d4febfecfc3db}{load} () override
\item 
int \hyperlink{classlbann_1_1data__reader__mnist__siamese_ac44a7118e94338e14f7b6a9e33239155}{fetch\+\_\+data} (\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&X) override
\begin{DoxyCompactList}\small\item\em Fetch this mini-\/batch\textquotesingle{}s samples into X by calling the new overloaded \hyperlink{classlbann_1_1data__reader__mnist__siamese_a299dd32be165c5acf320b6f40404cb17}{fetch\+\_\+datum()} \end{DoxyCompactList}\item 
int \hyperlink{classlbann_1_1data__reader__mnist__siamese_a1709140fcdcea9baaaf1bab7a48f3bce}{fetch\+\_\+labels} (\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&Y) override
\begin{DoxyCompactList}\small\item\em Fetch this mini-\/batch\textquotesingle{}s labels into Y by calling the new overloaded \hyperlink{classlbann_1_1data__reader__mnist__siamese_a0f4171af4c56100c1c78cb53e938222c}{fetch\+\_\+label()} \end{DoxyCompactList}\item 
void \hyperlink{classlbann_1_1data__reader__mnist__siamese_a410d8aa510fb2f3f4d1a257d5b308819}{setup\+\_\+data\+\_\+store} (\hyperlink{classlbann_1_1model}{model} $\ast$m) override
\begin{DoxyCompactList}\small\item\em sets up a data\+\_\+store. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classlbann_1_1data__reader__mnist__siamese_a7e1c9530b5d56a0835db8a30af980164}{set\+\_\+defaults} () override
\item 
bool \hyperlink{classlbann_1_1data__reader__mnist__siamese_a299dd32be165c5acf320b6f40404cb17}{fetch\+\_\+datum} (\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&X, int data\+\_\+id, int mb\+\_\+idx, int tid) override
\item 
bool \hyperlink{classlbann_1_1data__reader__mnist__siamese_a0f4171af4c56100c1c78cb53e938222c}{fetch\+\_\+label} (\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&Y, int data\+\_\+id, int mb\+\_\+idx, int tid) override
\item 
virtual bool \hyperlink{classlbann_1_1data__reader__mnist__siamese_a9124e72ab8d6913f5c90222ff0f45272}{fetch\+\_\+datum} (\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&X, std\+::pair$<$ int, int $>$ data\+\_\+id, int mb\+\_\+idx, int tid)
\item 
virtual bool \hyperlink{classlbann_1_1data__reader__mnist__siamese_addb5a1f18e903d73a2c32125c90f4a1f}{fetch\+\_\+label} (\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&Y, std\+::pair$<$ int, int $>$ data\+\_\+id, int mb\+\_\+idx, int tid)
\item 
void \hyperlink{classlbann_1_1data__reader__mnist__siamese_ad1949fc1a71af86d792e927c0181f87d}{shuffle\+\_\+indices} () override
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ int $>$ \hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\+\_\+shuffled\+\_\+indices2}
\begin{DoxyCompactList}\small\item\em To randomly choose the siamese pair input online. \end{DoxyCompactList}\item 
std\+::vector$<$ std\+::vector$<$ unsigned char $>$ $>$ \hyperlink{classlbann_1_1data__reader__mnist__siamese_a5b664a53047546c1be6d19ecabbd30dc}{m\+\_\+image\+\_\+data}
\begin{DoxyCompactList}\small\item\em Store the preloaded data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
With M\+N\+I\+ST dataset, there is no individual image file. All the images or labels are packed into a single binary file respectively. This reader pre-\/loads all the data into memory as minist\+\_\+reader does. However, to feed a siamese model, this reader randomly chooses the paired input on-\/line. It maintains another data index list, \textquotesingle{}m\+\_\+shuffled\+\_\+indices2\textquotesingle{}. It first copies the primary list maintined by the base class to the secondary list, and shuffles the secondary whenever the primary gets shuffled via the overridden \hyperlink{classlbann_1_1data__reader__mnist__siamese_ad1949fc1a71af86d792e927c0181f87d}{shuffle\+\_\+indices()} method. 

Definition at line 52 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+hpp.



\subsection{Member Typedef Documentation}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_abc3253e1de3910bef9e317ef5a396a47}\label{classlbann_1_1data__reader__mnist__siamese_abc3253e1de3910bef9e317ef5a396a47}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!label\+\_\+t@{label\+\_\+t}}
\index{label\+\_\+t@{label\+\_\+t}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{label\+\_\+t}{label\_t}}
{\footnotesize\ttfamily using \hyperlink{classlbann_1_1data__reader__mnist__siamese_abc3253e1de3910bef9e317ef5a396a47}{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::label\+\_\+t} =  unsigned char}



Definition at line 54 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+hpp.

\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_af159922f68098bfcb16a9df46d501103}\label{classlbann_1_1data__reader__mnist__siamese_af159922f68098bfcb16a9df46d501103}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!sample\+\_\+t@{sample\+\_\+t}}
\index{sample\+\_\+t@{sample\+\_\+t}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{sample\+\_\+t}{sample\_t}}
{\footnotesize\ttfamily using \hyperlink{classlbann_1_1data__reader__mnist__siamese_af159922f68098bfcb16a9df46d501103}{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::sample\+\_\+t} =  std\+::pair$<$int, int$>$}



Definition at line 55 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_af10a15ece71ae9c20069161a1c83abcd}\label{classlbann_1_1data__reader__mnist__siamese_af10a15ece71ae9c20069161a1c83abcd}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!data\+\_\+reader\+\_\+mnist\+\_\+siamese@{data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\index{data\+\_\+reader\+\_\+mnist\+\_\+siamese@{data\+\_\+reader\+\_\+mnist\+\_\+siamese}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{data\+\_\+reader\+\_\+mnist\+\_\+siamese()}{data\_reader\_mnist\_siamese()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese (\begin{DoxyParamCaption}\item[{const std\+::shared\+\_\+ptr$<$ cv\+\_\+process $>$ \&}]{pp,  }\item[{bool}]{shuffle = {\ttfamily true} }\end{DoxyParamCaption})}



Definition at line 43 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
44   : \hyperlink{classlbann_1_1data__reader__multi__images_a91725ae909007b26410837257aa921dc}{data\_reader\_multi\_images}(pp, shuffle) \{
45   \hyperlink{classlbann_1_1data__reader__mnist__siamese_a7e1c9530b5d56a0835db8a30af980164}{set\_defaults}();
46 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_af10a15ece71ae9c20069161a1c83abcd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_af10a15ece71ae9c20069161a1c83abcd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_ac68ac9d831b8ac2209069fb4d407060a}\label{classlbann_1_1data__reader__mnist__siamese_ac68ac9d831b8ac2209069fb4d407060a}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!data\+\_\+reader\+\_\+mnist\+\_\+siamese@{data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\index{data\+\_\+reader\+\_\+mnist\+\_\+siamese@{data\+\_\+reader\+\_\+mnist\+\_\+siamese}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{data\+\_\+reader\+\_\+mnist\+\_\+siamese()}{data\_reader\_mnist\_siamese()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1data__reader__mnist__siamese}{data\+\_\+reader\+\_\+mnist\+\_\+siamese} \&}]{rhs }\end{DoxyParamCaption})}



Definition at line 48 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
49   : \hyperlink{classlbann_1_1data__reader__multi__images_a91725ae909007b26410837257aa921dc}{data\_reader\_multi\_images}(rhs),
50     \hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2}(rhs.m\_shuffled\_indices2),
51     \hyperlink{classlbann_1_1data__reader__mnist__siamese_a5b664a53047546c1be6d19ecabbd30dc}{m\_image\_data}(rhs.m\_image\_data)
52 \{\}
\end{DoxyCode}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a308c0ac052f218a52da40043164fab1b}\label{classlbann_1_1data__reader__mnist__siamese_a308c0ac052f218a52da40043164fab1b}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!````~data\+\_\+reader\+\_\+mnist\+\_\+siamese@{$\sim$data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\index{````~data\+\_\+reader\+\_\+mnist\+\_\+siamese@{$\sim$data\+\_\+reader\+\_\+mnist\+\_\+siamese}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{$\sim$data\+\_\+reader\+\_\+mnist\+\_\+siamese()}{~data\_reader\_mnist\_siamese()}}
{\footnotesize\ttfamily lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::$\sim$data\+\_\+reader\+\_\+mnist\+\_\+siamese (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Definition at line 67 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
67                                                       \{
68 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a0b9750c72f9fdb28499b6dfe70bc9a6f}\label{classlbann_1_1data__reader__mnist__siamese_a0b9750c72f9fdb28499b6dfe70bc9a6f}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!copy@{copy}}
\index{copy@{copy}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1data__reader__mnist__siamese}{data\+\_\+reader\+\_\+mnist\+\_\+siamese}$\ast$ lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::copy (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \hyperlink{classlbann_1_1imagenet__reader_a71be5220be24de5caf00d2e422b750f2}{lbann\+::imagenet\+\_\+reader}.



Definition at line 62 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+hpp.


\begin{DoxyCode}
62                                                    \{
63     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classlbann_1_1data__reader__mnist__siamese_af10a15ece71ae9c20069161a1c83abcd}{data\_reader\_mnist\_siamese}(*\textcolor{keyword}{this});
64   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a0b9750c72f9fdb28499b6dfe70bc9a6f_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_ac44a7118e94338e14f7b6a9e33239155}\label{classlbann_1_1data__reader__mnist__siamese_ac44a7118e94338e14f7b6a9e33239155}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!fetch\+\_\+data@{fetch\+\_\+data}}
\index{fetch\+\_\+data@{fetch\+\_\+data}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{fetch\+\_\+data()}{fetch\_data()}}
{\footnotesize\ttfamily int lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::fetch\+\_\+data (\begin{DoxyParamCaption}\item[{\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{X }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Fetch this mini-\/batch\textquotesingle{}s samples into X by calling the new overloaded \hyperlink{classlbann_1_1data__reader__mnist__siamese_a299dd32be165c5acf320b6f40404cb17}{fetch\+\_\+datum()} 

Fill the input minibatch matrix with the samples of image pairs by using the overloaded \hyperlink{classlbann_1_1data__reader__mnist__siamese_a299dd32be165c5acf320b6f40404cb17}{fetch\+\_\+datum()} Allow each thread to perform any preprocessing necessary on the data source prior to fetching data

Allow each thread to perform any postprocessing necessary on the data source prior to fetching data 

Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a46b658ba4f6b746632b683568ab76f77}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 90 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
90                                                 \{
91   \textcolor{keywordtype}{int} nthreads = omp\_get\_max\_threads();
92   \textcolor{keywordflow}{if}(!\hyperlink{classlbann_1_1generic__data__reader_a2b10538440d784f0f12582a5407acef2}{position\_valid}()) \{
93     \textcolor{keywordflow}{throw} lbann\_exception(
94       std::string\{\} + \_\_FILE\_\_ + \textcolor{stringliteral}{" "} + std::to\_string(\_\_LINE\_\_)
95       + \textcolor{stringliteral}{" :: "} + \hyperlink{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604}{get\_type}() + \textcolor{stringliteral}{"  load error: !position\_valid"}
96       + \textcolor{stringliteral}{" -- current pos = "} + std::to\_string(\hyperlink{classlbann_1_1generic__data__reader_a2facf4e410099ac8c1fa586e797ec2e0}{m\_current\_pos})
97       + \textcolor{stringliteral}{" and there are "} + std::to\_string(\hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.size()) + \textcolor{stringliteral}{" indices"});
98   \}
99 
102 \textcolor{preprocessor}{  #pragma omp parallel for schedule(static, 1)}
103   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} t = 0; t < nthreads; t++) \{
104     \hyperlink{classlbann_1_1generic__data__reader_ad613f95666b973d8da77773fb34c9b66}{preprocess\_data\_source}(omp\_get\_thread\_num());
105   \}
106 
107   \textcolor{keywordtype}{int} loaded\_batch\_size = \hyperlink{classlbann_1_1generic__data__reader_a850e99110dd1e9df2985f09ea196fea8}{get\_loaded\_mini\_batch\_size}();
108   \textcolor{keyword}{const} \textcolor{keywordtype}{int} end\_pos = std::min(static\_cast<size\_t>(\hyperlink{classlbann_1_1generic__data__reader_a2facf4e410099ac8c1fa586e797ec2e0}{m\_current\_pos}+loaded\_batch\_size),
109                                \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.size());
110   \textcolor{keyword}{const} \textcolor{keywordtype}{int} mb\_size = std::min(
111     El::Int\{((end\_pos - \hyperlink{classlbann_1_1generic__data__reader_a2facf4e410099ac8c1fa586e797ec2e0}{m\_current\_pos}) + \hyperlink{classlbann_1_1generic__data__reader_a58461c39de7e17eafc5b98aec99cbb9b}{m\_sample\_stride} - 1) / 
      \hyperlink{classlbann_1_1generic__data__reader_a58461c39de7e17eafc5b98aec99cbb9b}{m\_sample\_stride}\},
112     X.Width());
113 
114   El::Zeros(X, X.Height(), X.Width());
115   El::Zeros(\hyperlink{classlbann_1_1generic__data__reader_a4ee1a159c74561c15a5e0c267ad3cc6a}{m\_indices\_fetched\_per\_mb}, mb\_size, 1);
116 
117 \textcolor{preprocessor}{  #pragma omp parallel for}
118   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} s = 0; s < mb\_size; s++) \{
119     \textcolor{comment}{// Catch exceptions within the OpenMP thread.}
120     \textcolor{keywordflow}{try} \{
121       \textcolor{keywordtype}{int} n = \hyperlink{classlbann_1_1generic__data__reader_a2facf4e410099ac8c1fa586e797ec2e0}{m\_current\_pos} + (s * \hyperlink{classlbann_1_1generic__data__reader_a58461c39de7e17eafc5b98aec99cbb9b}{m\_sample\_stride});
122       \hyperlink{classlbann_1_1data__reader__mnist__siamese_af159922f68098bfcb16a9df46d501103}{sample\_t} index = std::make\_pair(\hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}[n], 
      \hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2}[n]);
123       \textcolor{keywordtype}{bool} valid = \hyperlink{classlbann_1_1data__reader__mnist__siamese_a299dd32be165c5acf320b6f40404cb17}{fetch\_datum}(X, index, s, omp\_get\_thread\_num());
124       \textcolor{keywordflow}{if} (!valid) \{
125         \textcolor{keywordflow}{throw} lbann\_exception(
126           std::string\{\} + \_\_FILE\_\_ + \textcolor{stringliteral}{" "} + std::to\_string(\_\_LINE\_\_) +
127           \textcolor{stringliteral}{" :: generic data reader load error: datum not valid"});
128       \}
129       El::Int index\_coded = \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}[n] + 
      \hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2}[n]*(std::numeric\_limits<label\_t>::max()+1);
130       \hyperlink{classlbann_1_1generic__data__reader_a4ee1a159c74561c15a5e0c267ad3cc6a}{m\_indices\_fetched\_per\_mb}.Set(s, 0, index\_coded);
131     \} \textcolor{keywordflow}{catch} (lbann\_exception& e) \{
132       \hyperlink{namespacelbann_aedccb3bf2d674ccb5573ab9960720731}{lbann\_report\_exception}(e);
133     \} \textcolor{keywordflow}{catch} (std::exception& e) \{
134       El::ReportException(e);
135     \}
136   \}
137 
140 \textcolor{preprocessor}{  #pragma omp parallel for schedule(static, 1)}
141   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} t = 0; t < nthreads; t++) \{
142     \hyperlink{classlbann_1_1generic__data__reader_a7bbf74725a96235dc1cd20ff440a69bd}{postprocess\_data\_source}(omp\_get\_thread\_num());
143   \}
144 
145   \textcolor{keywordflow}{return} mb\_size;
146 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_ac44a7118e94338e14f7b6a9e33239155_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_ac44a7118e94338e14f7b6a9e33239155_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a299dd32be165c5acf320b6f40404cb17}\label{classlbann_1_1data__reader__mnist__siamese_a299dd32be165c5acf320b6f40404cb17}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!fetch\+\_\+datum@{fetch\+\_\+datum}}
\index{fetch\+\_\+datum@{fetch\+\_\+datum}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{fetch\+\_\+datum()}{fetch\_datum()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::fetch\+\_\+datum (\begin{DoxyParamCaption}\item[{\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{X,  }\item[{int}]{data\+\_\+id,  }\item[{int}]{mb\+\_\+idx,  }\item[{int}]{tid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}



Definition at line 246 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
246                                                                                     \{
247   \textcolor{keywordflow}{throw} lbann\_exception(std::string\{\} + \_\_FILE\_\_ + \textcolor{stringliteral}{" "} + std::to\_string(\_\_LINE\_\_) + \textcolor{stringliteral}{" "}
248                         + \hyperlink{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604}{get\_type}() + \textcolor{stringliteral}{": unused interface is called"});
249   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
250 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a299dd32be165c5acf320b6f40404cb17_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a299dd32be165c5acf320b6f40404cb17_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a9124e72ab8d6913f5c90222ff0f45272}\label{classlbann_1_1data__reader__mnist__siamese_a9124e72ab8d6913f5c90222ff0f45272}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!fetch\+\_\+datum@{fetch\+\_\+datum}}
\index{fetch\+\_\+datum@{fetch\+\_\+datum}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{fetch\+\_\+datum()}{fetch\_datum()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily virtual bool lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::fetch\+\_\+datum (\begin{DoxyParamCaption}\item[{\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{X,  }\item[{std\+::pair$<$ int, int $>$}]{data\+\_\+id,  }\item[{int}]{mb\+\_\+idx,  }\item[{int}]{tid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}

Fetch two data items identified by the pair of indices to the pre-\/loaded data list, and put them into the column mb\+\_\+idx of matrix x. \mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a0f4171af4c56100c1c78cb53e938222c}\label{classlbann_1_1data__reader__mnist__siamese_a0f4171af4c56100c1c78cb53e938222c}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!fetch\+\_\+label@{fetch\+\_\+label}}
\index{fetch\+\_\+label@{fetch\+\_\+label}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{fetch\+\_\+label()}{fetch\_label()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::fetch\+\_\+label (\begin{DoxyParamCaption}\item[{\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{Y,  }\item[{int}]{data\+\_\+id,  }\item[{int}]{mb\+\_\+idx,  }\item[{int}]{tid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}



Definition at line 253 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
253                                                                                     \{
254   \textcolor{keywordflow}{throw} lbann\_exception(std::string\{\} + \_\_FILE\_\_ + \textcolor{stringliteral}{" "} + std::to\_string(\_\_LINE\_\_) + \textcolor{stringliteral}{" "}
255                         + \hyperlink{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604}{get\_type}() + \textcolor{stringliteral}{": unused interface is called"});
256   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
257 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a0f4171af4c56100c1c78cb53e938222c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a0f4171af4c56100c1c78cb53e938222c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_addb5a1f18e903d73a2c32125c90f4a1f}\label{classlbann_1_1data__reader__mnist__siamese_addb5a1f18e903d73a2c32125c90f4a1f}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!fetch\+\_\+label@{fetch\+\_\+label}}
\index{fetch\+\_\+label@{fetch\+\_\+label}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{fetch\+\_\+label()}{fetch\_label()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily virtual bool lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::fetch\+\_\+label (\begin{DoxyParamCaption}\item[{\+::\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{Y,  }\item[{std\+::pair$<$ int, int $>$}]{data\+\_\+id,  }\item[{int}]{mb\+\_\+idx,  }\item[{int}]{tid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}

Take a pair of indices to the preloaded sample list, and compare the labels of the corresponding samples. Store 1 if equal or 0 at the column mb\+\_\+idx of the given matrix Y. \mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a1709140fcdcea9baaaf1bab7a48f3bce}\label{classlbann_1_1data__reader__mnist__siamese_a1709140fcdcea9baaaf1bab7a48f3bce}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!fetch\+\_\+labels@{fetch\+\_\+labels}}
\index{fetch\+\_\+labels@{fetch\+\_\+labels}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{fetch\+\_\+labels()}{fetch\_labels()}}
{\footnotesize\ttfamily int lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::fetch\+\_\+labels (\begin{DoxyParamCaption}\item[{\hyperlink{base_8hpp_a68f11fdc31b62516cb310831bbe54d73}{Mat} \&}]{Y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Fetch this mini-\/batch\textquotesingle{}s labels into Y by calling the new overloaded \hyperlink{classlbann_1_1data__reader__mnist__siamese_a0f4171af4c56100c1c78cb53e938222c}{fetch\+\_\+label()} 

Fill the ground truth table by using the overloaded \hyperlink{classlbann_1_1data__reader__mnist__siamese_a0f4171af4c56100c1c78cb53e938222c}{fetch\+\_\+label()} 

Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_a7e624f92e38b0ee4224a6afaaf2acbdb}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 152 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
152                                                   \{
153   \textcolor{keywordflow}{if}(!\hyperlink{classlbann_1_1generic__data__reader_a2b10538440d784f0f12582a5407acef2}{position\_valid}()) \{
154     \textcolor{keywordflow}{throw} lbann\_exception(
155       std::string\{\} + \_\_FILE\_\_ + \textcolor{stringliteral}{" "} + std::to\_string(\_\_LINE\_\_) +
156       \textcolor{stringliteral}{" :: generic data reader load error: !position\_valid"});
157   \}
158 
159   \textcolor{keywordtype}{int} loaded\_batch\_size = \hyperlink{classlbann_1_1generic__data__reader_a850e99110dd1e9df2985f09ea196fea8}{get\_loaded\_mini\_batch\_size}();
160   \textcolor{keyword}{const} \textcolor{keywordtype}{int} end\_pos = std::min(static\_cast<size\_t>(\hyperlink{classlbann_1_1generic__data__reader_a2facf4e410099ac8c1fa586e797ec2e0}{m\_current\_pos}+loaded\_batch\_size),
161                                \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.size());
162   \textcolor{keyword}{const} \textcolor{keywordtype}{int} mb\_size = std::min(
163     El::Int\{((end\_pos - \hyperlink{classlbann_1_1generic__data__reader_a2facf4e410099ac8c1fa586e797ec2e0}{m\_current\_pos}) + \hyperlink{classlbann_1_1generic__data__reader_a58461c39de7e17eafc5b98aec99cbb9b}{m\_sample\_stride} - 1) / 
      \hyperlink{classlbann_1_1generic__data__reader_a58461c39de7e17eafc5b98aec99cbb9b}{m\_sample\_stride}\},
164     Y.Width());
165 
166   El::Zeros(Y, Y.Height(), Y.Width());
167 
168 \textcolor{comment}{//  if (m\_data\_store != nullptr) \{}
169     \textcolor{comment}{//@todo: get it to work, then add omp support}
170     \textcolor{comment}{//m\_data\_store->fetch\_labels(...);}
171  \textcolor{comment}{// \}}
172 
173 \textcolor{comment}{//  else \{}
174 \textcolor{preprocessor}{    #pragma omp parallel for}
175     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} s = 0; s < mb\_size; s++) \{
176       \textcolor{comment}{// Catch exceptions within the OpenMP thread.}
177       \textcolor{keywordflow}{try} \{
178         \textcolor{keywordtype}{int} n = \hyperlink{classlbann_1_1generic__data__reader_a2facf4e410099ac8c1fa586e797ec2e0}{m\_current\_pos} + (s * \hyperlink{classlbann_1_1generic__data__reader_a58461c39de7e17eafc5b98aec99cbb9b}{m\_sample\_stride});
179         \hyperlink{classlbann_1_1data__reader__mnist__siamese_af159922f68098bfcb16a9df46d501103}{sample\_t} index = std::make\_pair(\hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}[n], 
      \hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2}[n]);
180 
181         \textcolor{keywordtype}{bool} valid = \hyperlink{classlbann_1_1data__reader__mnist__siamese_a0f4171af4c56100c1c78cb53e938222c}{fetch\_label}(Y, index, s, omp\_get\_thread\_num());
182         \textcolor{keywordflow}{if} (!valid) \{
183           \textcolor{keywordflow}{throw} lbann\_exception(
184             std::string\{\} + \_\_FILE\_\_ + \textcolor{stringliteral}{" "} + std::to\_string(\_\_LINE\_\_) +
185             \textcolor{stringliteral}{" :: generic data reader load error: label not valid"});
186         \}
187       \} \textcolor{keywordflow}{catch} (lbann\_exception& e) \{
188         \hyperlink{namespacelbann_aedccb3bf2d674ccb5573ab9960720731}{lbann\_report\_exception}(e);
189       \} \textcolor{keywordflow}{catch} (std::exception& e) \{
190         El::ReportException(e);
191       \}
192     \}
193   \textcolor{comment}{//\}}
194   \textcolor{keywordflow}{return} mb\_size;
195 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a1709140fcdcea9baaaf1bab7a48f3bce_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a1709140fcdcea9baaaf1bab7a48f3bce_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604}\label{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!get\+\_\+type@{get\+\_\+type}}
\index{get\+\_\+type@{get\+\_\+type}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{get\+\_\+type()}{get\_type()}}
{\footnotesize\ttfamily std\+::string lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::get\+\_\+type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Return this data\+\_\+reader\textquotesingle{}s type 

Reimplemented from \hyperlink{classlbann_1_1imagenet__reader_a0afea0db8b4286b56211842f8f1d7678}{lbann\+::imagenet\+\_\+reader}.



Definition at line 66 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+hpp.


\begin{DoxyCode}
66                                       \{
67     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"data\_reader\_mnist\_siamese"};
68   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a2c60a89c5815fa24b34d4febfecfc3db}\label{classlbann_1_1data__reader__mnist__siamese_a2c60a89c5815fa24b34d4febfecfc3db}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!load@{load}}
\index{load@{load}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::load (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Load the dataset. Each data reader implementation should implement this to initialize its internal data structures, determine the number of samples and their dimensionality (if needed), and set up and shuffle samples. 

Reimplemented from \hyperlink{classlbann_1_1image__data__reader_a99cb80242d7d20bc1e8baeaff25ff790}{lbann\+::image\+\_\+data\+\_\+reader}.



Definition at line 265 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
265                                      \{
266   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_ae82c40eebc05e2f0c1198afcc7a7f009}{is\_master}()) \{
267     std::cerr << \textcolor{stringliteral}{"starting lbann::"} << \hyperlink{classlbann_1_1data__reader__mnist__siamese_a2c5a29603f850bb0684dba1c64981604}{get\_type}() << \textcolor{stringliteral}{"::load\(\backslash\)n"};
268   \}
269   \hyperlink{classlbann_1_1data__reader__mnist__siamese_a5b664a53047546c1be6d19ecabbd30dc}{m\_image\_data}.clear();
270 
271   \textcolor{keyword}{const} std::string FileDir = \hyperlink{classlbann_1_1generic__data__reader_ab4c6c2d4ba40ece809ce896828c8ff03}{get\_file\_dir}();
272   \textcolor{keyword}{const} std::string ImageFile = \hyperlink{classlbann_1_1generic__data__reader_a56664e1b43f3fe923cf6d652f14b40a9}{get\_data\_filename}();
273   \textcolor{keyword}{const} std::string LabelFile = \hyperlink{classlbann_1_1generic__data__reader_af0f82d719fcd6e0668414836f2673d5c}{get\_label\_filename}();
274 
275   \textcolor{comment}{// set filepath}
276   \textcolor{keyword}{const} std::string imagepath = FileDir + \textcolor{stringliteral}{"/"} + ImageFile;
277   \textcolor{keyword}{const} std::string labelpath = FileDir + \textcolor{stringliteral}{"/"} + LabelFile;
278 
279   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_ae82c40eebc05e2f0c1198afcc7a7f009}{is\_master}()) \{
280     std::cerr << \textcolor{stringliteral}{"read labels!\(\backslash\)n"};
281   \}
282 
283   \hyperlink{namespacelbann_a59f65281406da5bc57f49d8ec682be2d}{load\_mnist\_data}(imagepath, labelpath, \hyperlink{classlbann_1_1generic__data__reader_a51af253029b7daea29bc46cbbef686b3}{m\_first\_n}, 
      \hyperlink{classlbann_1_1data__reader__mnist__siamese_a5b664a53047546c1be6d19ecabbd30dc}{m\_image\_data});
284 
285   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_a51af253029b7daea29bc46cbbef686b3}{m\_first\_n} > 0) \{
286     \hyperlink{classlbann_1_1generic__data__reader_ae6929a8bd2e59da72a8c2e537f0b2b37}{set\_use\_percent}(1.0);
287     \hyperlink{classlbann_1_1generic__data__reader_aa2d83c4ffc58534e0c193b6b9f9fb925}{set\_absolute\_sample\_count}(0u);
288   \}
289 
290   \textcolor{comment}{// reset indices}
291   \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.clear();
292   \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.resize(\hyperlink{classlbann_1_1data__reader__mnist__siamese_a5b664a53047546c1be6d19ecabbd30dc}{m\_image\_data}.size());
293   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} n = 0; n < \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.size(); n++) \{
294     \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}[n] = n;
295   \}
296   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_ae82c40eebc05e2f0c1198afcc7a7f009}{is\_master}()) \{
297     std::cerr << \textcolor{stringliteral}{"calling select\_subset\_of\_data; m\_shuffled\_indices.size: "} <<
298       \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.size() << std::endl;
299   \}
300   \hyperlink{classlbann_1_1generic__data__reader_aa28fdeeb6af492540f507e49adff5d6c}{select\_subset\_of\_data}();
301 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a2c60a89c5815fa24b34d4febfecfc3db_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a2c60a89c5815fa24b34d4febfecfc3db_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_ad41517c9c789bbf8d7e0696832e52d98}\label{classlbann_1_1data__reader__mnist__siamese_ad41517c9c789bbf8d7e0696832e52d98}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!operator=@{operator=}}
\index{operator=@{operator=}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \hyperlink{classlbann_1_1data__reader__mnist__siamese}{data\+\_\+reader\+\_\+mnist\+\_\+siamese} \& lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::operator= (\begin{DoxyParamCaption}\item[{const \hyperlink{classlbann_1_1data__reader__mnist__siamese}{data\+\_\+reader\+\_\+mnist\+\_\+siamese} \&}]{rhs }\end{DoxyParamCaption})}



Definition at line 54 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
54                                                                                                     \{
55   \textcolor{comment}{// check for self-assignment}
56   \textcolor{keywordflow}{if} (\textcolor{keyword}{this} == &rhs) \{
57     \textcolor{keywordflow}{return} (*\textcolor{keyword}{this});
58   \}
59 
60   \hyperlink{classlbann_1_1data__reader__multi__images_a8d9eae4dde10654c1f1bf7c1fe685e99}{data\_reader\_multi\_images::operator=}(rhs);
61   \hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2} = rhs.m\_shuffled\_indices2;
62   \hyperlink{classlbann_1_1data__reader__mnist__siamese_a5b664a53047546c1be6d19ecabbd30dc}{m\_image\_data} = rhs.m\_image\_data;
63 
64   \textcolor{keywordflow}{return} (*\textcolor{keyword}{this});
65 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_ad41517c9c789bbf8d7e0696832e52d98_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a7e1c9530b5d56a0835db8a30af980164}\label{classlbann_1_1data__reader__mnist__siamese_a7e1c9530b5d56a0835db8a30af980164}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!set\+\_\+defaults@{set\+\_\+defaults}}
\index{set\+\_\+defaults@{set\+\_\+defaults}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{set\+\_\+defaults()}{set\_defaults()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::set\+\_\+defaults (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Set the default configuration such as the width, height, and number of channels of the image sample. 

Reimplemented from \hyperlink{classlbann_1_1imagenet__reader_ad1e108315d659509a3e166c2f8a4941f}{lbann\+::imagenet\+\_\+reader}.



Definition at line 70 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
70                                              \{
71   \hyperlink{classlbann_1_1image__data__reader_af001f3d1c0f1c580b66988233b3a64f0}{m\_image\_width} = 28;
72   \hyperlink{classlbann_1_1image__data__reader_a0632efa3deaa9d61e671f741909eb3fe}{m\_image\_height} = 28;
73   \hyperlink{classlbann_1_1image__data__reader_aab1a440f361521dc7bd583cefe1061f8}{m\_image\_num\_channels} = 1;
74   \hyperlink{classlbann_1_1image__data__reader_a0164b0e3abbe92daef73b36fb925403e}{set\_linearized\_image\_size}();
75   \hyperlink{classlbann_1_1image__data__reader_af280e8758a6ec3acee7c62e6351d17e0}{m\_num\_labels} = 2;
76   \hyperlink{classlbann_1_1data__reader__multi__images_a70752a5442e99333fec52def9eadc58f}{m\_num\_img\_srcs} = 2;
77 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a7e1c9530b5d56a0835db8a30af980164_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a7e1c9530b5d56a0835db8a30af980164_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_abe572754f0b1415407c1b698b0f83656}\label{classlbann_1_1data__reader__mnist__siamese_abe572754f0b1415407c1b698b0f83656}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!set\+\_\+input\+\_\+params@{set\+\_\+input\+\_\+params}}
\index{set\+\_\+input\+\_\+params@{set\+\_\+input\+\_\+params}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{set\+\_\+input\+\_\+params()}{set\_input\_params()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::set\+\_\+input\+\_\+params (\begin{DoxyParamCaption}\item[{const int}]{,  }\item[{const int}]{,  }\item[{const int}]{,  }\item[{const int}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Set up M\+N\+I\+ST dataset-\/specific input parameters, which are pre-\/defined and also set as the default. This does not change the setup, but only preserves the default. 

Reimplemented from \hyperlink{classlbann_1_1image__data__reader_a6ed9b8b12ad3ffa93ad458d872f8c044}{lbann\+::image\+\_\+data\+\_\+reader}.



Definition at line 80 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
81                                               \{
82   \hyperlink{classlbann_1_1data__reader__mnist__siamese_a7e1c9530b5d56a0835db8a30af980164}{set\_defaults}();
83 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_abe572754f0b1415407c1b698b0f83656_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_abe572754f0b1415407c1b698b0f83656_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a410d8aa510fb2f3f4d1a257d5b308819}\label{classlbann_1_1data__reader__mnist__siamese_a410d8aa510fb2f3f4d1a257d5b308819}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!setup\+\_\+data\+\_\+store@{setup\+\_\+data\+\_\+store}}
\index{setup\+\_\+data\+\_\+store@{setup\+\_\+data\+\_\+store}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{setup\+\_\+data\+\_\+store()}{setup\_data\_store()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::setup\+\_\+data\+\_\+store (\begin{DoxyParamCaption}\item[{\hyperlink{classlbann_1_1model}{model} $\ast$}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



sets up a data\+\_\+store. 



Reimplemented from \hyperlink{classlbann_1_1imagenet__reader_a17af38eff1c3aee001d263248b8406a1}{lbann\+::imagenet\+\_\+reader}.



Definition at line 321 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
321                                                          \{
322   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store} != \textcolor{keyword}{nullptr}) \{
323     \textcolor{keyword}{delete} \hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store};
324   \}
325   \hyperlink{classlbann_1_1generic__data__reader_aefc076b842933a882214f4f709ca49c9}{m\_data\_store} = \textcolor{keyword}{nullptr};
326 \}
\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_a410d8aa510fb2f3f4d1a257d5b308819_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_ad1949fc1a71af86d792e927c0181f87d}\label{classlbann_1_1data__reader__mnist__siamese_ad1949fc1a71af86d792e927c0181f87d}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!shuffle\+\_\+indices@{shuffle\+\_\+indices}}
\index{shuffle\+\_\+indices@{shuffle\+\_\+indices}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{shuffle\+\_\+indices()}{shuffle\_indices()}}
{\footnotesize\ttfamily void lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::shuffle\+\_\+indices (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

Shuffle the second index list added in this class as well as the one in the base class whenever the latter gets shuffled. 

Reimplemented from \hyperlink{classlbann_1_1generic__data__reader_af1aaa4d1a693974c1b1f1318b6ed60b8}{lbann\+::generic\+\_\+data\+\_\+reader}.



Definition at line 304 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp.


\begin{DoxyCode}
304                                                 \{
305   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2}.size() != \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.size()) \{
306     \hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2} = \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices};
307     \textcolor{keywordflow}{if} (!\hyperlink{classlbann_1_1generic__data__reader_a8039ed9c12a5847f0dcf7dd54b8d2f5b}{m\_shuffle}) \{
308       std::shuffle(\hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2}.begin(), 
      \hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2}.end(),
309                    \hyperlink{namespacelbann_aba9d11cb3a739cd84e7234ceeb32d098}{get\_data\_seq\_generator}());
310     \}
311   \}
312   \textcolor{keywordflow}{if} (\hyperlink{classlbann_1_1generic__data__reader_a8039ed9c12a5847f0dcf7dd54b8d2f5b}{m\_shuffle}) \{
313     std::shuffle(\hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.begin(), 
      \hyperlink{classlbann_1_1generic__data__reader_aaab6aeff67ffff1c689336851fec2c57}{m\_shuffled\_indices}.end(),
314                  \hyperlink{namespacelbann_aba9d11cb3a739cd84e7234ceeb32d098}{get\_data\_seq\_generator}());
315     std::shuffle(\hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2}.begin(), 
      \hyperlink{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}{m\_shuffled\_indices2}.end(),
316                  \hyperlink{namespacelbann_aba9d11cb3a739cd84e7234ceeb32d098}{get\_data\_seq\_generator}());
317   \}
318 \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{classlbann_1_1data__reader__mnist__siamese_ad1949fc1a71af86d792e927c0181f87d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlbann_1_1data__reader__mnist__siamese_ad1949fc1a71af86d792e927c0181f87d_icgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a5b664a53047546c1be6d19ecabbd30dc}\label{classlbann_1_1data__reader__mnist__siamese_a5b664a53047546c1be6d19ecabbd30dc}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!m\+\_\+image\+\_\+data@{m\+\_\+image\+\_\+data}}
\index{m\+\_\+image\+\_\+data@{m\+\_\+image\+\_\+data}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{m\+\_\+image\+\_\+data}{m\_image\_data}}
{\footnotesize\ttfamily std\+::vector$<$std\+::vector$<$unsigned char$>$ $>$ lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::m\+\_\+image\+\_\+data\hspace{0.3cm}{\ttfamily [protected]}}



Store the preloaded data. 



Definition at line 124 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+hpp.

\mbox{\Hypertarget{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}\label{classlbann_1_1data__reader__mnist__siamese_a42a4b1513a7305cc62d219ac0d9473c3}} 
\index{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}!m\+\_\+shuffled\+\_\+indices2@{m\+\_\+shuffled\+\_\+indices2}}
\index{m\+\_\+shuffled\+\_\+indices2@{m\+\_\+shuffled\+\_\+indices2}!lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese@{lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese}}
\subsubsection{\texorpdfstring{m\+\_\+shuffled\+\_\+indices2}{m\_shuffled\_indices2}}
{\footnotesize\ttfamily std\+::vector$<$int$>$ lbann\+::data\+\_\+reader\+\_\+mnist\+\_\+siamese\+::m\+\_\+shuffled\+\_\+indices2\hspace{0.3cm}{\ttfamily [protected]}}



To randomly choose the siamese pair input online. 



Definition at line 122 of file data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/include/lbann/data\+\_\+readers/\hyperlink{data__reader__mnist__siamese_8hpp}{data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+hpp}\item 
/\+Users/mckinney27/doxy-\/testbed/lbann/src/data\+\_\+readers/\hyperlink{data__reader__mnist__siamese_8cpp}{data\+\_\+reader\+\_\+mnist\+\_\+siamese.\+cpp}\end{DoxyCompactItemize}
